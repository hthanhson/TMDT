2025-04-18 23:41:29,946 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:41:29,947 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:41:29,953 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:41:29,953 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:41:29,953 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,954 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,954 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:41:29,954 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getUnreadCount executed in 8 ms
2025-04-18 23:41:29,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:41:29,954 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:41:29,954 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 8 ms
2025-04-18 23:41:29,955 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,955 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:41:29,956 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:29,956 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:29,956 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=24ms
2025-04-18 23:41:29,956 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=24ms
2025-04-18 23:41:29,957 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,957 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:41:29,958 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:41:29,958 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications/unread-count
2025-04-18 23:41:29,958 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:41:29,958 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:41:29,958 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:41:29,958 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:41:29,959 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:41:29,959 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:41:29,958 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 15 ms
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:41:29,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:29,959 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:41:29,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:41:29,960 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:41:29,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:41:29,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:41:29,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:41:29,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:41:29,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,961 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:41:29,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:41:29,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:41:29,961 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:41:29,961 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:41:29,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:41:29,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:41:29,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:41:29,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@22d9159a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:29,964 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,964 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@71fef2b8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:29,964 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:41:29,965 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:41:29,965 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:41:29,965 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:41:29,965 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:41:29,965 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,966 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:41:29,966 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:41:29,966 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:41:29,966 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,966 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,967 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,967 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:41:29,967 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:29,967 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:29,968 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:29,968 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:29,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,968 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:41:29,968 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:41:29,968 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:41:29,968 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:41:29,968 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:41:29,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:41:29,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:41:29,969 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:41:29,969 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,969 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,970 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:41:29,970 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:41:29,970 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:41:29,970 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getUnreadCount executed in 2 ms
2025-04-18 23:41:29,971 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 3 ms
2025-04-18 23:41:29,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:41:29,972 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:29,972 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:29,972 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=14ms
2025-04-18 23:41:29,972 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=14ms
2025-04-18 23:41:29,973 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,974 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:41:29,975 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:29,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=43ms
2025-04-18 23:41:29,976 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-18 23:41:29,976 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:41:29,976 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:41:29,976 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:41:29,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-18 23:41:29,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:29,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:41:29,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:29,978 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:41:29,979 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:41:29,979 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:41:29,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:41:29,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:41:29,982 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:41:29,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:29,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:29,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:41:29,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:41:29,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@c895e6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:29,983 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:41:29,984 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:41:29,985 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts with args: [6]
2025-04-18 23:41:29,985 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:41:29,987 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,987 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:41:29,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:41:29,989 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,990 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:41:29,991 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:41:29,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:41:29,993 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:41:29,995 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:41:29,995 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 10 ms
2025-04-18 23:41:29,995 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,996 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:41:29,996 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,996 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:41:29,997 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:29,998 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:41:29,999 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:29,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:41:30,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:30,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:41:30,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:30,001 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:41:30,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:30,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:41:30,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:30,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:41:30,003 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:30,003 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:41:30,004 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:30,004 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:41:30,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:41:30,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:41:30,008 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:41:30,009 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:41:30,011 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:30,011 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=35ms
2025-04-18 23:41:34,040 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-18 23:41:34,041 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:41:34,041 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications?currentUserId=3
2025-04-18 23:41:34,041 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:41:34,041 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-18 23:41:34,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:34,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:41:34,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:34,042 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:41:34,043 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:41:34,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:41:34,044 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:41:34,044 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:41:34,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:41:34,046 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:34,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:34,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:41:34,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:41:34,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6c744658, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:34,048 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:41:34,048 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications?currentUserId=3
2025-04-18 23:41:34,048 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:41:34,049 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:34,050 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:34,050 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:34,050 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:41:34,050 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:41:34,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:41:34,051 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:34,052 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:41:34,052 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 2 ms
2025-04-18 23:41:34,054 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:34,054 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=13ms
2025-04-18 23:41:40,333 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:41:40,333 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:41:40,333 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:41:53,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-18 23:41:53,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:41:53,530 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications?currentUserId=3
2025-04-18 23:41:53,530 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:41:53,531 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-18 23:41:53,531 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:53,531 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:41:53,531 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:41:53,532 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:41:53,532 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:41:53,532 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:41:53,534 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:41:53,534 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:41:53,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:41:53,535 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:53,537 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:53,537 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:41:53,538 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:41:53,538 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@61f7fd5f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:41:53,538 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:41:53,538 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications?currentUserId=3
2025-04-18 23:41:53,539 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:41:53,540 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:53,541 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:53,542 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:41:53,542 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:41:53,542 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:41:53,542 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:41:53,543 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:41:53,544 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:41:53,545 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 3 ms
2025-04-18 23:41:53,548 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:41:53,549 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=19ms
2025-04-18 23:42:10,343 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:42:10,343 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:42:10,344 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:42:23,778 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-18 23:42:23,779 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:42:23,779 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications?currentUserId=3
2025-04-18 23:42:23,779 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:42:23,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-18 23:42:23,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:42:23,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:42:23,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:42:23,781 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:42:23,781 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:42:23,781 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:42:23,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:42:23,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:42:23,784 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:42:23,784 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:42:23,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:42:23,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:42:23,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:42:23,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1e04ec81, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:42:23,786 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:42:23,786 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications?currentUserId=3
2025-04-18 23:42:23,787 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:42:23,788 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:42:23,789 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:42:23,789 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:42:23,789 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:42:23,789 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:42:23,790 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:42:23,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:42:23,792 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:42:23,792 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 3 ms
2025-04-18 23:42:23,794 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:42:23,794 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=15ms
2025-04-18 23:42:40,351 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:42:40,351 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:42:40,351 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:42:53,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:42:53,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:42:53,782 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:42:53,783 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:42:53,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:42:53,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:42:53,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:42:53,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:42:53,784 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:42:53,785 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:42:53,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:42:53,786 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:42:53,787 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:42:53,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:42:53,788 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:42:53,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:42:53,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:42:53,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:42:53,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@718d2fce, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:42:53,790 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:42:53,790 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:42:53,791 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:42:53,791 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:42:53,792 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:42:53,792 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:42:53,792 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:42:53,792 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:42:53,794 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:42:53,795 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:42:53,796 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:42:53,796 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 4 ms
2025-04-18 23:42:53,802 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:42:53,803 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=22ms
2025-04-18 23:43:10,357 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:43:10,357 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:43:10,357 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:43:16,406 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications
2025-04-18 23:43:16,406 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:16,407 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications?currentUserId=3
2025-04-18 23:43:16,407 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:16,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications, Method: GET
2025-04-18 23:43:16,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:16,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:43:16,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:16,409 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:43:16,409 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:43:16,409 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:43:16,411 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:16,411 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:16,411 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:16,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:16,413 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:16,413 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:43:16,413 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:16,413 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7d2174c3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:16,413 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:16,413 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications?currentUserId=3
2025-04-18 23:43:16,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:16,414 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:16,416 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:16,416 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:16,416 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:16,416 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:16,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:43:16,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:16,418 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:43:16,419 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllNotifications executed in 3 ms
2025-04-18 23:43:16,420 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:16,420 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=13ms
2025-04-18 23:43:25,693 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:43:25,693 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:25,694 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:43:25,694 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:25,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:43:25,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:25,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:43:25,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:25,695 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:43:25,695 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:43:25,695 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:43:25,696 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:25,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:25,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:25,698 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:25,699 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:25,699 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:43:25,699 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:25,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@22c641ce, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:25,700 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:25,700 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:43:25,701 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:25,701 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:25,702 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:25,702 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:25,702 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:25,702 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:25,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:43:25,704 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:25,705 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:43:25,705 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 3 ms
2025-04-18 23:43:25,707 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:25,707 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=14ms
2025-04-18 23:43:40,368 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:43:40,368 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:43:40,368 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:43:40,712 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-18 23:43:40,712 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:40,712 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications?currentUserId=3
2025-04-18 23:43:40,713 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:40,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-18 23:43:40,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:40,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:43:40,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:40,714 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:43:40,714 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:43:40,714 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:43:40,715 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:40,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:40,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:40,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:40,720 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:40,720 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:43:40,720 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:40,721 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@127af07f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:40,721 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:40,721 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications?currentUserId=3
2025-04-18 23:43:40,723 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:40,723 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:40,726 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:40,726 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:40,726 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:40,726 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:40,727 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:43:40,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:40,729 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:43:40,729 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 3 ms
2025-04-18 23:43:40,731 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:40,731 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=19ms
2025-04-18 23:43:41,311 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-18 23:43:41,312 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:41,312 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications?currentUserId=3
2025-04-18 23:43:41,312 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:41,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-18 23:43:41,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:41,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:43:41,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:41,313 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:43:41,313 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:43:41,313 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:43:41,315 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:41,316 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:41,316 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:41,317 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:41,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:41,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:43:41,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:41,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@60b7fa3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:41,319 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:41,319 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications?currentUserId=3
2025-04-18 23:43:41,320 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:41,321 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:41,323 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:41,324 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:41,324 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:41,324 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:41,325 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:43:41,325 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:41,326 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:43:41,326 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 2 ms
2025-04-18 23:43:41,328 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:41,328 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=16ms
2025-04-18 23:43:56,317 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications/unread-count
2025-04-18 23:43:56,317 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:56,317 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:43:56,318 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:56,319 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:43:56,319 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-18 23:43:56,319 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,319 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:43:56,319 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:56,319 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:43:56,319 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:56,319 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,319 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:43:56,319 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications?currentUserId=3
2025-04-18 23:43:56,321 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:56,321 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:43:56,321 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:43:56,322 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:43:56,322 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:43:56,322 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:43:56,322 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:43:56,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:56,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:56,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:56,323 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:56,323 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:56,323 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:56,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:56,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:56,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:56,324 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,324 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,324 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1b2be332, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4f4a64ca, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,326 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@429a82cf, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,327 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:43:56,327 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:56,327 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:56,327 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:43:56,327 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:43:56,327 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications?currentUserId=3
2025-04-18 23:43:56,328 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [6]
2025-04-18 23:43:56,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:56,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:56,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:43:56,329 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,329 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,330 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,331 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,331 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,331 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:43:56,331 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,331 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,331 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:56,331 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:56,332 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:56,332 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:56,332 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:43:56,332 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:43:56,333 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,333 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,333 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,334 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:43:56,335 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:43:56,335 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:43:56,335 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,336 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getUnreadCount executed in 4 ms
2025-04-18 23:43:56,336 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 4 ms
2025-04-18 23:43:56,336 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:43:56,337 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:56,337 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:56,338 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=19ms
2025-04-18 23:43:56,338 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=21ms
2025-04-18 23:43:56,337 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,338 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:43:56,342 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,343 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications/unread-count
2025-04-18 23:43:56,343 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:43:56,343 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:43:56,343 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:56,343 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:56,343 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:43:56,343 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:43:56,344 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:56,344 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,344 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:43:56,345 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 17 ms
2025-04-18 23:43:56,345 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:43:56,345 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:43:56,346 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:43:56,346 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:43:56,346 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,346 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:43:56,346 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:43:56,346 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:43:56,347 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:56,347 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:56,347 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,348 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:56,348 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:56,348 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:43:56,349 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:56,349 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,349 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:56,349 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,349 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,349 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:43:56,350 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,351 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:43:56,351 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,351 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:43:56,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:43:56,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:56,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:56,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1fbe6dbe, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@728a881c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,352 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,352 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:56,352 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:43:56,352 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:43:56,352 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:43:56,352 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:43:56,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:56,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:43:56,355 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,355 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,355 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:43:56,357 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,359 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:43:56,359 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,359 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,359 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,359 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:43:56,360 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:56,360 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:43:56,360 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:56,360 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:43:56,360 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,361 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:43:56,361 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:43:56,361 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:43:56,361 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,361 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,362 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,362 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:43:56,363 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:43:56,363 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getUnreadCount executed in 3 ms
2025-04-18 23:43:56,363 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 3 ms
2025-04-18 23:43:56,363 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:43:56,364 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:56,364 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:56,364 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,364 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=21ms
2025-04-18 23:43:56,364 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=21ms
2025-04-18 23:43:56,364 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:43:56,365 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,366 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:43:56,366 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,367 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:43:56,369 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:56,370 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=51ms
2025-04-18 23:43:56,371 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-18 23:43:56,371 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:43:56,371 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:43:56,371 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:43:56,371 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-18 23:43:56,371 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,373 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:43:56,373 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:43:56,373 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:43:56,374 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:43:56,375 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:43:56,377 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:43:56,377 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:43:56,379 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:43:56,379 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:43:56,382 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,383 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:43:56,383 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:43:56,383 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@42210747, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:43:56,383 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:43:56,384 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:43:56,385 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts with args: [6]
2025-04-18 23:43:56,386 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:43:56,388 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,389 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:43:56,391 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:43:56,392 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,393 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:43:56,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,395 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:43:56,397 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:43:56,398 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:43:56,400 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:43:56,400 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 15 ms
2025-04-18 23:43:56,401 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,401 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:43:56,402 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,402 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:43:56,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,404 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:43:56,405 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:43:56,407 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,407 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:43:56,408 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,409 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:43:56,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,411 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:43:56,411 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:43:56,412 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:43:56,413 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,413 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:43:56,413 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:43:56,413 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:43:56,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:43:56,414 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:43:56,414 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:43:56,414 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=43ms
2025-04-18 23:44:00,033 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products
2025-04-18 23:44:00,033 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /wishlist
2025-04-18 23:44:00,033 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,033 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,033 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:44:00,034 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,033 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /wishlist?currentUserId=3
2025-04-18 23:44:00,034 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,034 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products, Method: GET
2025-04-18 23:44:00,035 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,035 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/top
2025-04-18 23:44:00,035 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:44:00,035 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,035 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,035 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,035 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /wishlist, Method: GET
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:44:00,036 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /categories
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:44:00,036 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,036 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:44:00,037 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /categories?currentUserId=3
2025-04-18 23:44:00,037 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/max-price
2025-04-18 23:44:00,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,037 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /categories, Method: GET
2025-04-18 23:44:00,037 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/max-price?currentUserId=3
2025-04-18 23:44:00,037 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,037 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:44:00,037 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,037 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,037 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,037 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,037 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/max-price, Method: GET
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:44:00,039 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,039 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:44:00,039 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,039 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:44:00,040 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,040 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,040 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/recommended
2025-04-18 23:44:00,040 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:44:00,040 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,040 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,040 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:44:00,040 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:44:00,040 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/recommended?currentUserId=3
2025-04-18 23:44:00,040 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,041 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/recommended, Method: GET
2025-04-18 23:44:00,041 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:44:00,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,042 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,042 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:44:00,043 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:44:00,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:44:00,043 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,043 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2463822f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:44:00,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,044 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /wishlist?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@73def418, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,044 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /wishlist?currentUserId=3
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:44:00,044 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,044 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,044 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,044 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,044 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,044 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@25971a72, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,044 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,044 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,045 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,045 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,045 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:44:00,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:00,045 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,045 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllProducts
2025-04-18 23:44:00,046 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,046 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,046 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,046 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,046 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:44:00,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:44:00,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4dcb38eb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3ac56007, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,047 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_
2025-04-18 23:44:00,048 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /products/max-price?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,048 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /categories?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:44:00,048 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/max-price?currentUserId=3
2025-04-18 23:44:00,048 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /categories?currentUserId=3
2025-04-18 23:44:00,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,048 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:44:00,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2ab46d1a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,048 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,048 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:44:00,049 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllCategories
2025-04-18 23:44:00,049 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:00,049 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:44:00,049 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,049 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-10] Get wishlist request for user: 3
2025-04-18 23:44:00,049 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,050 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,050 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        wishlist0_.id as id1_20_,
        wishlist0_.created_at as created_2_20_,
        wishlist0_.product_id as product_3_20_,
        wishlist0_.user_id as user_id4_20_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-18 23:44:00,050 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-18 23:44:00,050 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,050 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,050 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-7] Unhandled exception occurred
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "max-price"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.NumberFormatException: For input string: "max-price"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Long.parseLong(Long.java:711)
	at java.base/java.lang.Long.valueOf(Long.java:1163)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 102 common frames omitted
2025-04-18 23:44:00,050 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,052 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,052 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /products/recommended?currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,052 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/recommended?currentUserId=3
2025-04-18 23:44:00,052 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,053 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,053 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,053 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=500, Time=16ms
2025-04-18 23:44:00,053 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getRecommendedProducts with args: [10]
2025-04-18 23:44:00,053 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:44:00,054 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,053 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,056 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,056 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,055 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Điện thoại, description=Các loại điện thoại di động, imageUrl=https://example.com/images/categories/phone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=2, name=Laptop, description=Máy tính xách tay các loại, imageUrl=https://example.com/images/categories/laptop.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=3, name=Máy tính bảng, description=Các loại máy tính bảng, imageUrl=https://example.com/images/categories/tablet.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=4, name=Phụ kiện, description=Phụ kiện công nghệ, imageUrl=https://example.com/images/categories/accessories.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=5, name=TV & Thiết bị điện tử, description=Tivi và các thiết bị điện tử, imageUrl=https://example.com/images/categories/tv.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=9, name=Điện thoại Oppo, description=Các dòng điện thoại Oppo, imageUrl=https://example.com/images/categories/oppo.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=11, name=Laptop Dell, description=Máy tính xách tay của Dell, imageUrl=https://example.com/images/categories/dell.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=12, name=Laptop HP, description=Máy tính xách tay của HP, imageUrl=https://example.com/images/categories/hp.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=13, name=Laptop Asus, description=Máy tính xách tay của Asus, imageUrl=https://example.com/images/categories/asus.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=15, name=Tai nghe, description=Các loại tai nghe, imageUrl=https://example.com/images/categories/headphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=17, name=Ốp lưng, description=Ốp lưng bảo vệ điện thoại, imageUrl=https://example.com/images/categories/case.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)],[]>]
2025-04-18 23:44:00,057 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,057 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllCategories executed in 8 ms
2025-04-18 23:44:00,057 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/max-price
2025-04-18 23:44:00,058 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,058 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,058 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-18 23:44:00,058 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:44:00,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,058 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,058 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/max-price?currentUserId=3
2025-04-18 23:44:00,058 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,058 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/max-price, Method: GET
2025-04-18 23:44:00,058 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,060 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:44:00,060 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,060 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,060 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,061 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:44:00,060 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,062 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:44:00,061 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,062 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:44:00,062 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,062 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,063 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,063 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,063 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@b379d1b],[]>]
2025-04-18 23:44:00,063 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getWishlist executed in 14 ms
2025-04-18 23:44:00,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,064 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,064 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:44:00,064 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,064 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,064 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=31ms
2025-04-18 23:44:00,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,064 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getTopProducts executed in 19 ms
2025-04-18 23:44:00,065 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:44:00,065 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,065 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [9]
2025-04-18 23:44:00,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /wishlist
2025-04-18 23:44:00,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,069 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,069 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /wishlist?currentUserId=3
2025-04-18 23:44:00,069 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,069 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllProducts with result: [<200 OK OK,[Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=41, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:35:08), Product(id=27, name=iPhone 14, description=iPhone 14 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.999E7, stock=41, imageUrl=https://example.com/images/products/iphone14.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=80, soldCount=130, isFeatured=false, discountPercentage=2.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:39:44), Product(id=28, name=iPhone 13, description=iPhone 13 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.799E7, stock=40, imageUrl=https://example.com/images/products/iphone13.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=150, soldCount=300, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=31, name=Samsung Galaxy A54, description=Samsung Galaxy A54 128GB, màn hình 6.4 inch Super AMOLED, chip Exynos 1380, price=9990000.0, stock=69, imageUrl=https://example.com/images/products/a54.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=60, soldCount=200, isFeatured=false, discountPercentage=8.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=33, name=Xiaomi 13 Pro, description=Xiaomi 13 Pro 256GB, màn hình 6.73 inch AMOLED, chip Snapdragon 8 Gen 2, price=2.199E7, stock=25, imageUrl=https://example.com/images/products/xiaomi13pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=35, soldCount=60, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=34, name=Xiaomi 13, description=Xiaomi 13 128GB, màn hình 6.36 inch AMOLED, chip Snapdragon 8 Gen 2, price=1.799E7, stock=30, imageUrl=https://example.com/images/products/xiaomi13.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=30, soldCount=50, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=35, name=Xiaomi Redmi Note 12 Pro, description=Xiaomi Redmi Note 12 Pro 128GB, màn hình 6.67 inch AMOLED, chip MediaTek Dimensity 1080, price=7990000.0, stock=77, imageUrl=https://example.com/images/products/redminote12pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=90, soldCount=250, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:38:02), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=38, name=MacBook Pro 16 M2 Max, description=MacBook Pro 16 inch M2 Max 32GB RAM, 1TB SSD, price=6.999E7, stock=9, imageUrl=https://example.com/images/products/macbookpro16.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=3.5, reviewCount=2, soldCount=20, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T21:53:38), Product(id=39, name=Asus ROG Strix G15, description=Asus ROG Strix G15 AMD Ryzen 7-6800H, 16GB RAM, RTX 3060, 512GB SSD, price=3.299E7, stock=18, imageUrl=https://example.com/images/products/rogg15.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=55, soldCount=90, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=40, name=MSI Stealth 15M, description=MSI Stealth 15M Intel Core i7-11375H, 16GB RAM, RTX 3060, 512GB SSD, price=2.899E7, stock=15, imageUrl=https://example.com/images/products/stealth15m.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=45, soldCount=80, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=43, name=Galaxy Buds 2 Pro, description=Tai nghe không dây Samsung Galaxy Buds 2 Pro với công nghệ Hi-Fi 24bit, price=3990000.0, stock=45, imageUrl=https://example.com/images/products/buds2pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=150, soldCount=280, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=44, name=Xiaomi Redmi Buds 4 Pro, description=Tai nghe không dây Xiaomi Redmi Buds 4 Pro với tính năng chống ồn, price=1690000.0, stock=80, imageUrl=https://example.com/images/products/redmibuds4pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=100, soldCount=200, isFeatured=false, discountPercentage=15.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=45, name=Anker PowerCore Slim 10000, description=Pin dự phòng Anker PowerCore Slim 10000mAh với công nghệ PowerIQ, price=790000.0, stock=100, imageUrl=https://example.com/images/products/ankerpowercore.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=300, soldCount=500, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=46, name=Mi Power Bank 3 20000, description=Pin dự phòng Xiaomi Mi Power Bank 3 20000mAh với 2 cổng USB-A và 1 cổng USB-C, price=890000.0, stock=90, imageUrl=https://example.com/images/products/mipowerbank3.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=250, soldCount=450, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=47, name=Samsung Wireless Powerbank, description=Pin dự phòng Samsung Wireless 10000mAh với khả năng sạc không dây, price=1290000.0, stock=70, imageUrl=https://example.com/images/products/samsungpowerbank.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.4, reviewCount=180, soldCount=320, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:44:00,070 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,070 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,070 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,070 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,070 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,070 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllProducts executed in 25 ms
2025-04-18 23:44:00,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-18 23:44:00,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /wishlist, Method: GET
2025-04-18 23:44:00,071 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,072 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,072 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:44:00,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,072 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,073 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,073 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:44:00,073 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:44:00,073 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,073 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@26e7c3ee, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,073 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,073 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,074 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /products/max-price?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,074 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/max-price?currentUserId=3
2025-04-18 23:44:00,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,074 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:44:00,074 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=41, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:35:08), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35)],[]>]
2025-04-18 23:44:00,074 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:44:00,074 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getRecommendedProducts executed in 21 ms
2025-04-18 23:44:00,074 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,074 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,077 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,077 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,076 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,076 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [11]
2025-04-18 23:44:00,080 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-1] Unhandled exception occurred
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "max-price"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.NumberFormatException: For input string: "max-price"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Long.parseLong(Long.java:711)
	at java.base/java.lang.Long.valueOf(Long.java:1163)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 102 common frames omitted
2025-04-18 23:44:00,086 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,085 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,085 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,086 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,086 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=500, Time=28ms
2025-04-18 23:44:00,086 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,088 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,088 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,088 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,088 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [12]
2025-04-18 23:44:00,089 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,089 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,091 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,091 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:44:00,091 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [13]
2025-04-18 23:44:00,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@cbcc578, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,092 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /wishlist?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,092 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /wishlist?currentUserId=3
2025-04-18 23:44:00,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,094 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,094 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,094 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,094 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:44:00,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:00,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:44:00,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,096 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,096 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,096 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,097 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,097 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:44:00,097 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-18 23:44:00,098 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:44:00,098 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,098 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:44:00,098 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,099 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,099 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:44:00,099 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:00,099 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [15]
2025-04-18 23:44:00,099 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,099 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,099 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:44:00,099 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=64ms
2025-04-18 23:44:00,099 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-8] Get wishlist request for user: 3
2025-04-18 23:44:00,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,100 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,100 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,100 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        wishlist0_.id as id1_20_,
        wishlist0_.created_at as created_2_20_,
        wishlist0_.product_id as product_3_20_,
        wishlist0_.user_id as user_id4_20_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-18 23:44:00,101 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,101 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,101 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,101 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,102 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,102 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [17]
2025-04-18 23:44:00,102 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:44:00,102 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:44:00,102 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,102 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,102 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,103 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,103 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,103 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,103 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,103 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:44:00,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:44:00,105 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,106 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:44:00,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,107 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:44:00,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,107 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:44:00,107 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@375379a0],[]>]
2025-04-18 23:44:00,107 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:44:00,107 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,107 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [5]
2025-04-18 23:44:00,107 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getWishlist executed in 8 ms
2025-04-18 23:44:00,108 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,108 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,108 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,108 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:44:00,108 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,109 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,109 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,108 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,109 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=41ms
2025-04-18 23:44:00,109 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=72ms
2025-04-18 23:44:00,109 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,109 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,109 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,110 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,110 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,110 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,111 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /categories
2025-04-18 23:44:00,111 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,112 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /categories?currentUserId=3
2025-04-18 23:44:00,112 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,112 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,112 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,112 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /categories, Method: GET
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6e4039b0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,114 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,114 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:44:00,114 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,114 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:44:00,114 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,115 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:44:00,115 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,115 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,115 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:44:00,115 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,115 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:44:00,115 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,116 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,116 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,116 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,117 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,117 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:44:00,118 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,118 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:44:00,118 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,118 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:44:00,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,122 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,122 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,122 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:44:00,122 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,122 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=82ms
2025-04-18 23:44:00,122 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,124 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,125 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,124 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,125 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/recommended
2025-04-18 23:44:00,125 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,126 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/recommended?currentUserId=3
2025-04-18 23:44:00,126 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,126 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,126 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,126 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,127 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/recommended, Method: GET
2025-04-18 23:44:00,127 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,127 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:44:00,127 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,127 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,127 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,127 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,127 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 12 ms
2025-04-18 23:44:00,129 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:44:00,129 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,129 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:44:00,129 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,129 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3fd90f16, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,129 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /categories?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,130 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /categories?currentUserId=3
2025-04-18 23:44:00,130 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,130 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:44:00,130 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:44:00,129 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,130 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,130 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,130 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllCategories
2025-04-18 23:44:00,132 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-18 23:44:00,132 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,133 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,133 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,133 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,133 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,133 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,133 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,134 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,134 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,134 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,134 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,135 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,135 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Điện thoại, description=Các loại điện thoại di động, imageUrl=https://example.com/images/categories/phone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=2, name=Laptop, description=Máy tính xách tay các loại, imageUrl=https://example.com/images/categories/laptop.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=3, name=Máy tính bảng, description=Các loại máy tính bảng, imageUrl=https://example.com/images/categories/tablet.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=4, name=Phụ kiện, description=Phụ kiện công nghệ, imageUrl=https://example.com/images/categories/accessories.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=5, name=TV & Thiết bị điện tử, description=Tivi và các thiết bị điện tử, imageUrl=https://example.com/images/categories/tv.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=9, name=Điện thoại Oppo, description=Các dòng điện thoại Oppo, imageUrl=https://example.com/images/categories/oppo.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=11, name=Laptop Dell, description=Máy tính xách tay của Dell, imageUrl=https://example.com/images/categories/dell.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=12, name=Laptop HP, description=Máy tính xách tay của HP, imageUrl=https://example.com/images/categories/hp.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=13, name=Laptop Asus, description=Máy tính xách tay của Asus, imageUrl=https://example.com/images/categories/asus.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=15, name=Tai nghe, description=Các loại tai nghe, imageUrl=https://example.com/images/categories/headphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=17, name=Ốp lưng, description=Ốp lưng bảo vệ điện thoại, imageUrl=https://example.com/images/categories/case.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)],[]>]
2025-04-18 23:44:00,135 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllCategories executed in 5 ms
2025-04-18 23:44:00,135 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,135 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:44:00,136 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,136 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5866a297, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,136 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,136 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:00,136 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,136 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,136 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,136 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-18 23:44:00,137 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /products/recommended?currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,137 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/recommended?currentUserId=3
2025-04-18 23:44:00,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,138 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,138 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,139 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:44:00,139 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getRecommendedProducts with args: [10]
2025-04-18 23:44:00,139 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,139 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,139 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,139 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,140 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,140 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,140 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:44:00,141 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,141 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,141 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,141 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:44:00,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:44:00,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:44:00,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [9]
2025-04-18 23:44:00,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-18 23:44:00,142 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,144 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=42ms
2025-04-18 23:44:00,144 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,144 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,145 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,145 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,145 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,145 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,147 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-18 23:44:00,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,147 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,147 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,147 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [11]
2025-04-18 23:44:00,147 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,148 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,148 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,148 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,148 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,148 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,149 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:44:00,149 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,148 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [12]
2025-04-18 23:44:00,149 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,149 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,149 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:44:00,149 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,149 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,150 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:44:00,150 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [13]
2025-04-18 23:44:00,150 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=41, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:35:08), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35)],[]>]
2025-04-18 23:44:00,150 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:44:00,151 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,151 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getRecommendedProducts executed in 12 ms
2025-04-18 23:44:00,151 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,151 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:44:00,152 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:44:00,152 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,154 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:44:00,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,155 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,155 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,155 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,155 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,155 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:44:00,155 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,155 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,155 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-18 23:44:00,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,156 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:44:00,156 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,156 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [15]
2025-04-18 23:44:00,157 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,157 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,157 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,157 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,157 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:44:00,157 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,157 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:44:00,157 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,157 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,157 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4045fd5e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,158 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,158 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,158 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,158 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,158 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,158 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [17]
2025-04-18 23:44:00,158 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,159 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:44:00,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,160 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,160 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:44:00,160 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products
2025-04-18 23:44:00,160 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:44:00,160 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,160 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,161 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:44:00,161 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:44:00,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:44:00,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [5]
2025-04-18 23:44:00,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products, Method: GET
2025-04-18 23:44:00,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:44:00,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,162 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,162 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:44:00,163 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:44:00,162 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,163 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=52ms
2025-04-18 23:44:00,163 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,163 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:44:00,164 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,165 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:44:00,165 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,165 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,165 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=132ms
2025-04-18 23:44:00,166 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,166 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,166 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,166 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,167 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,167 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,167 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,167 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,167 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,168 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,168 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,169 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,169 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,169 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,169 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:44:00,169 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4e69f4f7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,170 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:00,170 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,170 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,171 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:44:00,171 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,171 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,172 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,172 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllProducts
2025-04-18 23:44:00,172 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,172 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,173 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 13 ms
2025-04-18 23:44:00,174 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,174 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_
2025-04-18 23:44:00,175 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,175 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,178 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,178 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,178 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:44:00,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,181 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,181 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,181 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=56ms
2025-04-18 23:44:00,181 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,182 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,182 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,184 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,184 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,184 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=37ms
2025-04-18 23:44:00,184 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:44:00,185 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/top
2025-04-18 23:44:00,186 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,186 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,186 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,186 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,186 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllProducts with result: [<200 OK OK,[Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=41, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:35:08), Product(id=27, name=iPhone 14, description=iPhone 14 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.999E7, stock=41, imageUrl=https://example.com/images/products/iphone14.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=80, soldCount=130, isFeatured=false, discountPercentage=2.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:39:44), Product(id=28, name=iPhone 13, description=iPhone 13 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.799E7, stock=40, imageUrl=https://example.com/images/products/iphone13.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=150, soldCount=300, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=31, name=Samsung Galaxy A54, description=Samsung Galaxy A54 128GB, màn hình 6.4 inch Super AMOLED, chip Exynos 1380, price=9990000.0, stock=69, imageUrl=https://example.com/images/products/a54.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=60, soldCount=200, isFeatured=false, discountPercentage=8.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=33, name=Xiaomi 13 Pro, description=Xiaomi 13 Pro 256GB, màn hình 6.73 inch AMOLED, chip Snapdragon 8 Gen 2, price=2.199E7, stock=25, imageUrl=https://example.com/images/products/xiaomi13pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=35, soldCount=60, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=34, name=Xiaomi 13, description=Xiaomi 13 128GB, màn hình 6.36 inch AMOLED, chip Snapdragon 8 Gen 2, price=1.799E7, stock=30, imageUrl=https://example.com/images/products/xiaomi13.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=30, soldCount=50, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=35, name=Xiaomi Redmi Note 12 Pro, description=Xiaomi Redmi Note 12 Pro 128GB, màn hình 6.67 inch AMOLED, chip MediaTek Dimensity 1080, price=7990000.0, stock=77, imageUrl=https://example.com/images/products/redminote12pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=90, soldCount=250, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:38:02), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=38, name=MacBook Pro 16 M2 Max, description=MacBook Pro 16 inch M2 Max 32GB RAM, 1TB SSD, price=6.999E7, stock=9, imageUrl=https://example.com/images/products/macbookpro16.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=3.5, reviewCount=2, soldCount=20, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T21:53:38), Product(id=39, name=Asus ROG Strix G15, description=Asus ROG Strix G15 AMD Ryzen 7-6800H, 16GB RAM, RTX 3060, 512GB SSD, price=3.299E7, stock=18, imageUrl=https://example.com/images/products/rogg15.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=55, soldCount=90, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=40, name=MSI Stealth 15M, description=MSI Stealth 15M Intel Core i7-11375H, 16GB RAM, RTX 3060, 512GB SSD, price=2.899E7, stock=15, imageUrl=https://example.com/images/products/stealth15m.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=45, soldCount=80, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=43, name=Galaxy Buds 2 Pro, description=Tai nghe không dây Samsung Galaxy Buds 2 Pro với công nghệ Hi-Fi 24bit, price=3990000.0, stock=45, imageUrl=https://example.com/images/products/buds2pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=150, soldCount=280, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=44, name=Xiaomi Redmi Buds 4 Pro, description=Tai nghe không dây Xiaomi Redmi Buds 4 Pro với tính năng chống ồn, price=1690000.0, stock=80, imageUrl=https://example.com/images/products/redmibuds4pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=100, soldCount=200, isFeatured=false, discountPercentage=15.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=45, name=Anker PowerCore Slim 10000, description=Pin dự phòng Anker PowerCore Slim 10000mAh với công nghệ PowerIQ, price=790000.0, stock=100, imageUrl=https://example.com/images/products/ankerpowercore.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=300, soldCount=500, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=46, name=Mi Power Bank 3 20000, description=Pin dự phòng Xiaomi Mi Power Bank 3 20000mAh với 2 cổng USB-A và 1 cổng USB-C, price=890000.0, stock=90, imageUrl=https://example.com/images/products/mipowerbank3.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=250, soldCount=450, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=47, name=Samsung Wireless Powerbank, description=Pin dự phòng Samsung Wireless 10000mAh với khả năng sạc không dây, price=1290000.0, stock=70, imageUrl=https://example.com/images/products/samsungpowerbank.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.4, reviewCount=180, soldCount=320, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:44:00,186 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,186 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:44:00,186 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllProducts executed in 14 ms
2025-04-18 23:44:00,186 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,187 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:44:00,187 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,187 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,187 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:44:00,188 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:44:00,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,189 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,190 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,190 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,191 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:44:00,191 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@41731484, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,191 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,191 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,191 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,191 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:00,192 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:44:00,193 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,193 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:44:00,193 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,194 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:44:00,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:44:00,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,196 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,196 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,196 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,196 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:44:00,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:44:00,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,198 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:44:00,198 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,198 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,198 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,199 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,199 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,199 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,199 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:44:00,199 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getTopProducts executed in 6 ms
2025-04-18 23:44:00,200 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,200 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,200 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,200 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:44:00,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,201 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,201 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:44:00,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:44:00,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:44:00,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:44:00,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:44:00,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,205 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,205 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,205 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,205 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,206 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,206 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,206 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,206 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=20ms
2025-04-18 23:44:00,206 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,206 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:44:00,207 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-18 23:44:00,208 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,208 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,208 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,208 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,209 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:44:00,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,209 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:44:00,210 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:44:00,210 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:44:00,210 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:44:00,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:00,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:44:00,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:44:00,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:44:00,213 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,213 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:44:00,213 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,213 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:44:00,213 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@12ccb73f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,213 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,213 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,213 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,214 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,214 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:44:00,214 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,215 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,216 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,216 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:44:00,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,217 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:44:00,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,217 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,217 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:44:00,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:44:00,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:44:00,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:44:00,219 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,219 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 5 ms
2025-04-18 23:44:00,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:44:00,220 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,220 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:44:00,220 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,220 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,221 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:44:00,221 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,221 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,222 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,222 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:44:00,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:44:00,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,225 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,225 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=65ms
2025-04-18 23:44:00,225 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,225 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,226 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,226 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,227 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,227 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,229 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,229 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=21ms
2025-04-18 23:44:00,230 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-18 23:44:00,230 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,230 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,231 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:44:00,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,232 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:44:00,232 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:44:00,232 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:44:00,234 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,234 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,234 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,235 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,237 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,237 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:44:00,237 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,237 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@e23e73, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,238 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,238 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,238 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,240 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,240 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,241 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,241 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,241 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,242 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,242 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,244 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,245 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,245 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,246 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,246 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 8 ms
2025-04-18 23:44:00,247 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,247 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,247 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,248 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,248 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,248 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,249 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,249 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,250 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,251 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,252 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,253 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,253 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,254 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,254 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,254 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,255 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,255 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=25ms
2025-04-18 23:44:00,257 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-18 23:44:00,258 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,258 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,258 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,258 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,258 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,259 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:44:00,259 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,259 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:44:00,259 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:44:00,259 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:44:00,261 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,262 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,263 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:44:00,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@31659458, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,266 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,266 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,266 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,268 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,269 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,271 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,272 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,274 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,274 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,275 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,277 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,278 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,280 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,280 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 14 ms
2025-04-18 23:44:00,281 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,281 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,282 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,282 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,282 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,284 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,285 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,286 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,287 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,287 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,287 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,288 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,288 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,288 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,288 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,289 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,289 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,289 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=31ms
2025-04-18 23:44:00,291 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:44:00,291 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:00,291 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,292 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:00,292 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:44:00,292 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,292 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:44:00,292 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:00,293 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:44:00,293 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:44:00,293 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:44:00,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:00,294 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:00,295 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:00,295 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:00,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:44:00,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:00,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2efce79a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:00,296 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:44:00,296 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:44:00,297 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [4]
2025-04-18 23:44:00,298 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:44:00,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,300 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:44:00,300 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,300 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:44:00,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:44:00,302 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,302 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:44:00,302 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:44:00,302 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:44:00,304 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:44:00,304 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 7 ms
2025-04-18 23:44:00,305 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,305 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,306 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:44:00,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,308 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:44:00,308 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:44:00,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:44:00,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:44:00,310 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:44:00,310 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:00,310 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=19ms
2025-04-18 23:44:04,264 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /coupons/my-coupons
2025-04-18 23:44:04,264 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:04,265 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:44:04,265 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:04,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:44:04,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:04,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:44:04,265 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:04,265 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:44:04,266 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:44:04,266 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:44:04,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:04,267 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:04,268 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:04,268 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:04,270 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:04,270 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:44:04,270 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:04,270 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@d0a39, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:04,271 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:04,271 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:44:04,272 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:04,272 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:04,272 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:44:04,274 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:44:04,274 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:04,274 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:44:04,274 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-6] Getting coupons for user: 3
2025-04-18 23:44:04,275 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:44:04,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:04,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:44:04,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:44:04.274240700]
2025-04-18 23:44:04,277 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:44:04,278 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getMyCoupons executed in 4 ms
2025-04-18 23:44:04,279 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:04,279 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=15ms
2025-04-18 23:44:04,280 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /coupons/my-coupons
2025-04-18 23:44:04,281 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:04,281 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:44:04,281 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:04,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:44:04,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:04,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:44:04,282 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:04,282 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:44:04,282 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:44:04,283 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:44:04,284 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:04,284 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:04,285 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:04,286 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:04,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:04,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:44:04,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:04,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7843f6ed, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:04,288 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:04,289 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:44:04,292 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:04,292 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:04,294 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:44:04,295 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:44:04,295 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:04,295 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:44:04,295 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-2] Getting coupons for user: 3
2025-04-18 23:44:04,296 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:44:04,296 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:04,296 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:44:04,296 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:44:04.295299400]
2025-04-18 23:44:04,300 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:44:04,301 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getMyCoupons executed in 6 ms
2025-04-18 23:44:04,302 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:04,302 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=21ms
2025-04-18 23:44:10,082 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: POST /coupons/verify
2025-04-18 23:44:10,082 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, content-length=35, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:10,084 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing POST /coupons/verify?currentUserId=3
2025-04-18 23:44:10,084 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:10,084 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /coupons/verify, Method: POST
2025-04-18 23:44:10,084 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:10,084 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:44:10,084 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:10,085 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:44:10,085 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:44:10,085 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:44:10,086 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:10,087 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:10,087 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:10,088 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:10,089 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:44:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@443622a0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:10,090 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [POST /coupons/verify?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:10,090 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured POST /coupons/verify?currentUserId=3
2025-04-18 23:44:10,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:10,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:10,093 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:44:10,094 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:44:10,094 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:10,094 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING verifyCoupon with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), CouponVerifyRequest(code=b, orderAmount=2.699E7)]
2025-04-18 23:44:10,094 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-7] Verifying coupon: b for user: 3
2025-04-18 23:44:10,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-18 23:44:10,096 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [b]
2025-04-18 23:44:10,098 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING verifyCoupon with result: [<200 OK OK,{valid=true, coupon=Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), message=Coupon is valid},[]>]
2025-04-18 23:44:10,099 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method verifyCoupon executed in 5 ms
2025-04-18 23:44:10,100 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:10,100 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=18ms
2025-04-18 23:44:10,381 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:44:10,381 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:44:10,381 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:44:11,312 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:44:11,312 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:11,312 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:44:11,313 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:11,313 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:44:11,313 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:11,313 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:44:11,313 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:11,313 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:44:11,314 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:44:11,314 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:44:11,315 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:11,315 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:11,315 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:11,316 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:11,317 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:11,317 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:44:11,317 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:11,317 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@17cc8846, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:11,317 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:11,318 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:44:11,319 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:11,319 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:11,320 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:44:11,320 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:44:11,320 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:11,320 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:44:11,321 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:44:11,321 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:11,322 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:44:11,322 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 2 ms
2025-04-18 23:44:11,323 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:11,324 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=12ms
2025-04-18 23:44:13,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: POST /orders/pay
2025-04-18 23:44:13,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, content-length=206, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:13,227 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing POST /orders/pay?currentUserId=3
2025-04-18 23:44:13,227 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:13,228 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /orders/pay, Method: POST
2025-04-18 23:44:13,228 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:13,228 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:44:13,228 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:13,228 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:44:13,229 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:44:13,229 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:44:13,230 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:13,230 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:13,231 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:13,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:13,232 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:13,232 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:44:13,234 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:13,234 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@59d0bc48, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:13,234 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [POST /orders/pay?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:13,234 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured POST /orders/pay?currentUserId=3
2025-04-18 23:44:13,235 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:44:13,235 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:44:13,235 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:13,236 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING createPay with args: [OrderRequest(items=[OrderItemRequest(productId=26, quantity=1)], shippingAddress=ádvb, ădawe, 12323, paymentMethod=account_balance, phoneNumber=3123123123, recipientName=sYn good72, couponCode=b, total=2.07823E7)]
2025-04-18 23:44:13,237 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:13,237 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:13,238 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:13,238 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:13,240 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:44:13,241 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:44:13,243 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-18 23:44:13,249 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [b]
2025-04-18 23:44:13,251 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    update
        products 
    set
        average_rating=?,
        category_id=?,
        created_at=?,
        description=?,
        discount_percentage=?,
        image_url=?,
        is_featured=?,
        name=?,
        price=?,
        review_count=?,
        sold_count=?,
        stock=?,
        updated_at=? 
    where
        id=?
2025-04-18 23:44:13,251 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [DOUBLE] - [4.7]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [2] as [BIGINT] - [6]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [3] as [TIMESTAMP] - [2025-04-17T02:31:26]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [4] as [VARCHAR] - [iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [5] as [DOUBLE] - [3.0]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [6] as [VARCHAR] - [https://example.com/images/products/iphone14pro.jpg]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [7] as [BOOLEAN] - [true]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [8] as [VARCHAR] - [iPhone 14 Pro]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [9] as [DOUBLE] - [2.699E7]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [10] as [INTEGER] - [95]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [11] as [INTEGER] - [150]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [12] as [INTEGER] - [40]
2025-04-18 23:44:13,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [13] as [TIMESTAMP] - [2025-04-18T23:44:13.251483200]
2025-04-18 23:44:13,253 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [14] as [BIGINT] - [26]
2025-04-18 23:44:13,257 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING createPay with result: [<200 OK OK,https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=2699000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250418234413&vnp_CurrCode=VND&vnp_ExpireDate=20250418235913&vnp_IpAddr=42.118.208.78&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+don+hang%3A10175368&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A3000%2FPaySuccess.tsx&vnp_TmnCode=I8QN1DFX&vnp_TxnRef=10175368&vnp_Version=2.1.0&vnp_SecureHash=49e6235911a755e398607f695973f3d8e2f8591cd9c17509f56417dd95bab0081d979d484b260d34bfe2808d92ad9c210aa6d307519bfaa6ad59be30818fe796,[]>]
2025-04-18 23:44:13,257 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method createPay executed in 21 ms
2025-04-18 23:44:13,258 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:13,258 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=31ms
2025-04-18 23:44:13,263 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /PaySuccess
2025-04-18 23:44:13,263 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:13,263 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /PaySuccess?currentUserId=3
2025-04-18 23:44:13,263 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:13,263 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /PaySuccess, Method: GET
2025-04-18 23:44:13,263 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:13,263 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:44:13,263 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:13,264 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:44:13,264 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:44:13,264 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:44:13,265 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:13,266 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:13,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:13,267 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:13,270 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:13,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:44:13,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:13,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@50a5a732, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:13,272 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /PaySuccess?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:13,272 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /PaySuccess?currentUserId=3
2025-04-18 23:44:13,272 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-1] Unhandled exception occurred
org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'vnp_ResponseCode' for method parameter type String is not present
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:218)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:193)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:114)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-04-18 23:44:13,274 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:13,274 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=500, Time=11ms
2025-04-18 23:44:32,300 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications
2025-04-18 23:44:32,300 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:44:32,301 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications?currentUserId=3
2025-04-18 23:44:32,301 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:44:32,301 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications, Method: GET
2025-04-18 23:44:32,301 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:32,301 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:44:32,301 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:44:32,302 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:44:32,302 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:44:32,302 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:44:32,304 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:44:32,304 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:44:32,305 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:44:32,305 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:32,307 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:32,307 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:44:32,307 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:44:32,307 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@342edf7e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:44:32,307 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:44:32,308 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications?currentUserId=3
2025-04-18 23:44:32,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:44:32,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:32,310 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:44:32,310 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:44:32,311 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:44:32,311 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:44:32,311 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:44:32,311 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:44:32,312 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:44:32,313 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllNotifications executed in 2 ms
2025-04-18 23:44:32,313 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:44:32,313 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=13ms
2025-04-18 23:44:40,396 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:44:40,396 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:44:40,396 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:45:02,764 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications
2025-04-18 23:45:02,764 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:45:02,765 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications?currentUserId=3
2025-04-18 23:45:02,765 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:45:02,765 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications, Method: GET
2025-04-18 23:45:02,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:45:02,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:45:02,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:45:02,766 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:45:02,766 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:45:02,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:45:02,767 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:45:02,768 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:45:02,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:45:02,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:02,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:45:02,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:45:02,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:45:02,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@d125965, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:45:02,770 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:45:02,770 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications?currentUserId=3
2025-04-18 23:45:02,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:45:02,771 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:02,772 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:45:02,772 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:45:02,772 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:45:02,773 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:45:02,773 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:45:02,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:02,774 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:45:02,774 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllNotifications executed in 2 ms
2025-04-18 23:45:02,774 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:45:02,774 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=10ms
2025-04-18 23:45:10,411 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:45:10,411 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:45:10,411 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:45:32,756 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-18 23:45:32,756 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:45:32,756 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications?currentUserId=3
2025-04-18 23:45:32,756 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:45:32,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-18 23:45:32,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:45:32,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:45:32,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:45:32,757 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:45:32,758 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:45:32,758 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:45:32,760 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:45:32,760 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:45:32,761 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:45:32,761 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:32,762 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:45:32,762 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:45:32,762 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:45:32,762 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@30e58c83, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:45:32,762 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:45:32,762 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications?currentUserId=3
2025-04-18 23:45:32,763 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:45:32,763 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:32,763 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:45:32,764 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:45:32,764 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:45:32,764 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:45:32,764 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:45:32,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:32,766 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:45:32,766 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 2 ms
2025-04-18 23:45:32,767 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:45:32,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=11ms
2025-04-18 23:45:40,423 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:45:40,423 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:45:40,423 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:45:56,352 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:45:56,353 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:45:56,353 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:45:56,353 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:45:56,354 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:45:56,355 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:45:56,355 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:45:56,355 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:45:56,356 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:45:56,358 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:45:56,358 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:45:56,362 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:45:56,363 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:45:56,364 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:45:56,365 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:56,369 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:45:56,369 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:45:56,369 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:45:56,369 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@30a3b70c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:45:56,370 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:45:56,370 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:45:56,371 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:45:56,371 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:56,373 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:45:56,375 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:45:56,375 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:45:56,375 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:45:56,376 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:45:56,376 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:45:56,378 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:45:56,378 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 3 ms
2025-04-18 23:45:56,381 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:45:56,381 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=28ms
2025-04-18 23:46:02,352 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-18 23:46:02,353 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:46:02,353 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications?currentUserId=3
2025-04-18 23:46:02,353 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:46:02,353 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-18 23:46:02,354 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:46:02,354 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:46:02,354 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:46:02,354 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:46:02,354 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:46:02,355 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:46:02,356 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:46:02,357 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:46:02,358 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:46:02,359 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:02,361 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:46:02,361 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:46:02,362 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:46:02,362 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@249b54c8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:46:02,362 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:46:02,362 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications?currentUserId=3
2025-04-18 23:46:02,364 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:46:02,365 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:02,367 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:46:02,368 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:46:02,368 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:46:02,368 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:46:02,369 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:46:02,369 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:02,371 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:46:02,372 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 4 ms
2025-04-18 23:46:02,374 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:46:02,376 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=23ms
2025-04-18 23:46:10,432 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:46:10,432 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:46:10,432 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:46:13,806 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:46:13,807 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:46:13,807 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:46:13,807 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:46:13,807 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:46:13,808 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:46:13,808 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:46:13,808 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:46:13,809 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:46:13,809 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:46:13,809 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:46:13,811 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:46:13,811 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:46:13,812 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:46:13,812 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:13,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:46:13,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:46:13,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:46:13,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@167da88b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:46:13,813 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:46:13,813 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:46:13,815 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:46:13,815 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:13,817 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:46:13,817 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:46:13,818 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:46:13,818 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:46:13,818 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:46:13,819 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:13,820 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:46:13,820 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 2 ms
2025-04-18 23:46:13,821 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:46:13,821 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=14ms
2025-04-18 23:46:40,439 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:46:40,439 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:46:40,439 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:46:44,796 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications
2025-04-18 23:46:44,796 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:46:44,796 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications?currentUserId=3
2025-04-18 23:46:44,797 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:46:44,797 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications, Method: GET
2025-04-18 23:46:44,797 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:46:44,798 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:46:44,798 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:46:44,798 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:46:44,799 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:46:44,799 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:46:44,801 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:46:44,801 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:46:44,802 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:46:44,803 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:44,805 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:46:44,805 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:46:44,805 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:46:44,805 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@52e8c758, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:46:44,806 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:46:44,806 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications?currentUserId=3
2025-04-18 23:46:44,808 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:46:44,808 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:44,810 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:46:44,811 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:46:44,812 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:46:44,812 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:46:44,813 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:46:44,813 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:46:44,815 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:46:44,815 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllNotifications executed in 3 ms
2025-04-18 23:46:44,816 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:46:44,817 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=21ms
2025-04-18 23:47:10,453 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:47:10,453 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:47:10,453 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:47:14,771 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:47:14,771 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:47:14,772 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:47:14,772 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:47:14,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:47:14,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:47:14,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:47:14,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:47:14,773 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:47:14,773 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:47:14,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:47:14,774 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:47:14,774 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:47:14,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:47:14,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:47:14,777 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:47:14,777 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:47:14,777 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:47:14,777 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4992712c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:47:14,778 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:47:14,778 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:47:14,778 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:47:14,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:47:14,780 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:47:14,780 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:47:14,780 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:47:14,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:47:14,780 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:47:14,781 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:47:14,781 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:47:14,781 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 1 ms
2025-04-18 23:47:14,782 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:47:14,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=11ms
2025-04-18 23:47:40,465 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:47:40,465 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:47:40,465 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:47:44,783 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-18 23:47:44,784 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:47:44,784 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications?currentUserId=3
2025-04-18 23:47:44,784 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:47:44,784 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-18 23:47:44,784 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:47:44,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:47:44,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:47:44,785 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:47:44,785 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:47:44,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:47:44,786 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:47:44,787 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:47:44,787 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:47:44,787 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:47:44,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:47:44,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:47:44,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:47:44,790 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6594ff57, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:47:44,790 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:47:44,790 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications?currentUserId=3
2025-04-18 23:47:44,791 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:47:44,791 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:47:44,793 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:47:44,793 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:47:44,793 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:47:44,793 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:47:44,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:47:44,793 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:47:44,794 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:47:44,794 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 1 ms
2025-04-18 23:47:44,796 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:47:44,796 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=12ms
2025-04-18 23:48:01,929 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /order-success
2025-04-18 23:48:01,929 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, sec-ch-ua-platform="Windows", upgrade-insecure-requests=1, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7, sec-fetch-site=none, sec-fetch-mode=navigate, sec-fetch-user=?1, sec-fetch-dest=document, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:48:01,930 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /order-success
2025-04-18 23:48:01,930 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:48:01,930 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /order-success, Method: GET
2025-04-18 23:48:01,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: null
2025-04-18 23:48:01,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] No Authorization header or token parameter found in request
2025-04-18 23:48:01,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] No JWT token found in request to: /order-success
2025-04-18 23:48:01,937 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to anonymous SecurityContext
2025-04-18 23:48:01,938 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Failed to authorize filter invocation [GET /order-success] with attributes [authenticated]
2025-04-18 23:48:01,943 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Unauthorized error: Full authentication is required to access this resource
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Request URL: http://localhost:8080/order-success
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Request URI: /order-success
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Request Method: GET
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Request Remote User: null
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Request User Principal: null
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Auth Header: null
2025-04-18 23:48:01,946 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-3] Unauthorized (401): Authentication failed or not provided
2025-04-18 23:48:01,948 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:48:01,948 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=401, Time=18ms
2025-04-18 23:48:01,990 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /favicon.ico
2025-04-18 23:48:01,991 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, accept=image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, sec-fetch-site=same-origin, sec-fetch-mode=no-cors, sec-fetch-dest=image, referer=http://localhost:8080/order-success, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:48:01,991 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /favicon.ico
2025-04-18 23:48:01,991 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:48:01,992 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /favicon.ico, Method: GET
2025-04-18 23:48:01,992 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: null
2025-04-18 23:48:01,992 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] No Authorization header or token parameter found in request
2025-04-18 23:48:01,992 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] No JWT token found in request to: /favicon.ico
2025-04-18 23:48:01,992 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2025-04-18 23:48:01,993 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Failed to authorize filter invocation [GET /favicon.ico] with attributes [authenticated]
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Unauthorized error: Full authentication is required to access this resource
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Request URL: http://localhost:8080/favicon.ico
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Request URI: /favicon.ico
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Request Method: GET
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Request Remote User: null
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Request User Principal: null
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Auth Header: null
2025-04-18 23:48:01,993 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Unauthorized (401): Authentication failed or not provided
2025-04-18 23:48:01,994 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:48:01,994 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=401, Time=3ms
2025-04-18 23:48:10,470 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:48:10,470 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:48:10,471 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:48:40,478 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:48:40,478 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:48:40,478 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:48:41,139 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@44225e8b: (connection has passed maxLifetime)
2025-04-18 23:48:41,157 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 connection closer] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:48:46,053 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-18 23:48:46,054 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:48:46,054 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications?currentUserId=3
2025-04-18 23:48:46,054 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:48:46,054 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-18 23:48:46,056 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:48:46,056 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:48:46,056 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:48:46,056 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:48:46,056 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:48:46,057 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:48:46,057 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:48:46,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:48:46,059 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:48:46,059 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:48:46,061 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:48:46,061 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:48:46,061 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:48:46,061 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6f39a14e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:48:46,061 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:48:46,062 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications?currentUserId=3
2025-04-18 23:48:46,063 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:48:46,063 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:48:46,065 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:48:46,065 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:48:46,066 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:48:46,066 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:48:46,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:48:46,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:48:46,068 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:48:46,069 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 3 ms
2025-04-18 23:48:46,070 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:48:46,070 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=16ms
2025-04-18 23:48:51,487 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@16919989: (connection has passed maxLifetime)
2025-04-18 23:48:51,488 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 connection closer] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:48:52,983 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b508371: (connection has passed maxLifetime)
2025-04-18 23:48:52,984 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 connection closer] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:48:59,253 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@d95f42a: (connection has passed maxLifetime)
2025-04-18 23:48:59,261 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@425a0f52
2025-04-18 23:49:00,609 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6d9f2c3a: (connection has passed maxLifetime)
2025-04-18 23:49:00,611 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24a780aa
2025-04-18 23:49:09,340 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:49:09,341 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:49:09,341 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:49:09,342 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:49:09,342 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:49:09,343 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:49:09,343 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:49:09,343 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:49:09,344 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:49:09,345 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:49:09,345 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:49:09,346 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:49:09,347 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:49:09,349 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:49:09,349 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:49:09,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:49:09,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:49:09,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:49:09,352 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6f8a07d8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:49:09,353 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:49:09,353 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:49:09,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:49:09,357 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:49:09,359 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:49:09,360 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:49:09,360 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:49:09,360 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:49:09,361 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:49:09,361 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:49:09,363 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:49:09,363 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 3 ms
2025-04-18 23:49:09,366 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:49:09,366 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=25ms
2025-04-18 23:49:10,486 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:49:10,487 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:49:10,487 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:49:39,780 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications
2025-04-18 23:49:39,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:49:39,781 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications?currentUserId=3
2025-04-18 23:49:39,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:49:39,782 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications, Method: GET
2025-04-18 23:49:39,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:49:39,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:49:39,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:49:39,784 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:49:39,784 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:49:39,784 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:49:39,786 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:49:39,786 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:49:39,787 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:49:39,787 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:49:39,788 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:49:39,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:49:39,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:49:39,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@55abef79, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:49:39,789 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:49:39,789 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications?currentUserId=3
2025-04-18 23:49:39,791 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:49:39,791 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:49:39,792 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:49:39,792 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:49:39,792 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:49:39,793 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:49:39,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:49:39,793 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:49:39,793 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:49:39,795 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllNotifications executed in 2 ms
2025-04-18 23:49:39,796 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:49:39,796 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=15ms
2025-04-18 23:49:40,498 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:49:40,498 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:49:40,498 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:50:09,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:50:09,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:09,783 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:09,783 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:09,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:09,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:09,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:50:09,783 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:09,784 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:50:09,785 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:50:09,785 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:50:09,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:09,788 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:09,790 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:09,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:09,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:09,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:50:09,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:09,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7ff420cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:09,793 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:09,793 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:09,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:09,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:09,797 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:09,799 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:09,799 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:09,800 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:09,800 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:09,801 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:09,802 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:09,803 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 4 ms
2025-04-18 23:50:09,805 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:09,806 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=24ms
2025-04-18 23:50:10,502 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:50:10,502 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:50:10,502 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:50:27,957 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications/unread-count
2025-04-18 23:50:27,957 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:27,958 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:27,958 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:27,958 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:50:27,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:50:27,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,959 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-18 23:50:27,959 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:50:27,959 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:27,959 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:27,959 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:50:27,959 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:50:27,959 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:27,959 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:27,959 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:50:27,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:50:27,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:27,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:27,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:27,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:27,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:27,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:27,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@743fd719, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:50:27,965 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:27,965 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3635e1b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,965 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:27,965 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:27,965 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42b904f2
2025-04-18 23:50:27,966 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:50:27,965 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:27,966 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:50:27,966 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:27,967 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,967 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:27,967 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [6]
2025-04-18 23:50:27,967 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,968 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,968 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:50:27,968 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:27,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:50:27,968 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@446cd3c2, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,968 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,968 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:27,968 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,968 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:27,968 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:27,968 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:27,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:27,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:27,969 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,970 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:50:27,970 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:50:27,970 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,971 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,971 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:50:27,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:27,971 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getUnreadCount executed in 3 ms
2025-04-18 23:50:27,971 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:50:27,972 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,972 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:27,972 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:27,972 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:27,972 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:27,973 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:50:27,973 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=16ms
2025-04-18 23:50:27,973 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:27,973 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,974 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:27,974 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications/unread-count
2025-04-18 23:50:27,974 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:27,974 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:50:27,974 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:27,974 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:27,974 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:50:27,974 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 3 ms
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,975 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:50:27,975 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:50:27,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=16ms
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:50:27,975 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:50:27,976 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 9 ms
2025-04-18 23:50:27,976 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:27,976 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-18 23:50:27,978 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:27,978 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:27,976 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:27,978 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:27,978 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:27,978 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:50:27,979 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:27,979 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,979 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:50:27,979 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:27,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:27,979 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:50:27,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:50:27,980 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:50:27,980 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:50:27,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:27,980 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:50:27,980 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,980 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:50:27,980 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:27,980 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@c6afef2, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:27,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:27,981 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:27,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:27,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:50:27,981 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:27,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:27,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:27,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:50:27,982 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:27,982 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:27,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:50:27,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:50:27,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:27,983 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:27,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@78e34975, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,983 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:50:27,983 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,983 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:27,983 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:27,983 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,984 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:27,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:27,984 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:27,985 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:50:27,985 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:50:27,985 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,985 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:27,985 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:27,986 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,986 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:50:27,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:50:27,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getUnreadCount executed in 2 ms
2025-04-18 23:50:27,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:27,986 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:50:27,987 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,987 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:27,987 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:27,987 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=13ms
2025-04-18 23:50:27,987 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:27,987 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:50:27,987 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:27,987 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:27,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:27,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:50:27,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:27,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,989 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:27,989 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=30ms
2025-04-18 23:50:27,989 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:27,990 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 3 ms
2025-04-18 23:50:27,990 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/top
2025-04-18 23:50:27,990 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:27,991 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:50:27,991 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:27,991 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:27,991 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=13ms
2025-04-18 23:50:27,992 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/top, Method: GET
2025-04-18 23:50:27,993 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,993 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:50:27,993 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:27,993 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:50:27,994 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:50:27,994 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:50:27,995 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:27,995 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:27,996 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:27,997 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:27,999 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:27,999 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:50:27,999 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:27,999 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5d6ff03a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:28,000 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:50:28,000 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:50:28,001 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getTopProducts with args: [6]
2025-04-18 23:50:28,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:50:28,003 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:28,003 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:50:28,005 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:28,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:50:28,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:28,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:50:28,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:28,009 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:50:28,010 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:50:28,011 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:50:28,014 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:50:28,014 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getTopProducts executed in 13 ms
2025-04-18 23:50:28,015 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:28,015 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:50:28,015 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:28,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:50:28,017 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:28,017 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:50:28,017 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:28,018 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:50:28,019 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:28,019 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:50:28,019 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:28,020 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:50:28,020 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:28,020 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:50:28,021 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:28,021 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:50:28,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:28,022 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:50:28,023 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:28,023 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:50:28,027 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:50:28,027 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:50:28,029 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:50:28,030 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:50:28,031 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:28,032 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=42ms
2025-04-18 23:50:38,120 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:50:38,120 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:38,121 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:38,121 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:38,122 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:38,122 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,122 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:50:38,122 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,122 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:50:38,123 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:50:38,123 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:50:38,124 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:38,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:38,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:38,126 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,128 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,128 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:50:38,128 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:38,128 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@26e8ea0a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,129 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:38,129 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:38,130 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:38,131 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,132 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,132 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,133 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:38,133 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:38,134 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:38,135 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,137 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:38,138 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 5 ms
2025-04-18 23:50:38,140 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:38,140 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=19ms
2025-04-18 23:50:38,141 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:50:38,141 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:38,142 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:38,142 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:38,142 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:38,143 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,143 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:50:38,143 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,143 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:50:38,145 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:50:38,145 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:50:38,146 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:38,147 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:38,148 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:38,148 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:50:38,151 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:38,151 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4ce0665c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,151 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:38,151 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:38,152 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:38,153 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,154 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,155 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,155 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:38,155 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:38,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:38,157 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,158 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:38,159 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 4 ms
2025-04-18 23:50:38,160 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:38,160 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=19ms
2025-04-18 23:50:38,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-18 23:50:38,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications/unread-count
2025-04-18 23:50:38,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /user-balance
2025-04-18 23:50:38,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:38,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:38,207 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:38,208 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /user-balance?currentUserId=3
2025-04-18 23:50:38,208 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:38,208 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:38,208 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:38,208 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:38,208 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:38,208 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /user-balance, Method: GET
2025-04-18 23:50:38,208 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:38,208 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,208 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:50:38,209 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:50:38,210 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:50:38,210 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:50:38,210 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:50:38,210 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:50:38,210 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:50:38,210 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:50:38,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:38,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:38,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:38,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:38,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:38,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:38,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:38,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:38,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:38,213 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,213 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,213 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6d8657a4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2c5d00ad, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,216 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1cc8816b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:38,217 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /user-balance?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:38,217 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:38,217 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:38,217 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /user-balance?currentUserId=3
2025-04-18 23:50:38,217 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:38,217 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:38,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:38,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:38,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,221 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,221 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,221 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,221 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:38,222 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:38,222 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:38,222 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:38,222 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:38,223 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:50:38,223 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:38,223 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,223 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:38,225 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:50:38,225 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getUnreadCount executed in 3 ms
2025-04-18 23:50:38,226 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:38,227 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:38,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=19ms
2025-04-18 23:50:38,227 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 5 ms
2025-04-18 23:50:38,229 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:38,229 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=21ms
2025-04-18 23:50:38,255 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:38,255 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=404, Time=47ms
2025-04-18 23:50:38,273 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /error?currentUserId=3
2025-04-18 23:50:38,273 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:38,274 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2025-04-18 23:50:38,274 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /error?currentUserId=3
2025-04-18 23:50:38,309 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:40,515 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:50:40,515 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:50:40,515 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:50:46,465 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-18 23:50:46,466 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:46,466 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:46,467 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:46,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:46,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:50:46,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,469 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:50:46,470 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:50:46,470 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:50:46,472 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:46,472 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:46,473 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:46,474 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,477 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,477 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:50:46,477 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:46,477 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@8df5331, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,478 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:46,478 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:46,479 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:46,480 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,482 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,482 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,483 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:46,483 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:46,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:46,483 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,486 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:46,486 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 3 ms
2025-04-18 23:50:46,488 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:46,488 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=22ms
2025-04-18 23:50:46,489 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications
2025-04-18 23:50:46,489 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:46,489 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:46,490 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:46,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:46,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:50:46,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,491 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:50:46,491 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:50:46,491 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:50:46,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:46,492 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:46,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:46,494 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,495 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,496 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:50:46,496 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:46,496 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7cfb1a50, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,496 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:46,496 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:46,497 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:46,498 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,499 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,499 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,500 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:46,500 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:46,500 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:46,501 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,502 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:46,503 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllNotifications executed in 3 ms
2025-04-18 23:50:46,504 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:46,505 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=16ms
2025-04-18 23:50:46,508 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-18 23:50:46,508 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications/unread-count
2025-04-18 23:50:46,508 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:46,508 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:50:46,508 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:46,508 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications?currentUserId=3
2025-04-18 23:50:46,508 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:46,508 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,509 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:50:46,510 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:50:46,510 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:50:46,510 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:50:46,510 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:50:46,510 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:50:46,510 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:50:46,511 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:46,511 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:50:46,511 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:46,511 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:50:46,512 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:46,513 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:50:46,513 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,515 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:50:46,515 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:50:46,515 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:46,515 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:50:46,515 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@a7cd90b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,515 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3c75371e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:50:46,515 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:46,515 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:50:46,515 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications?currentUserId=3
2025-04-18 23:50:46,515 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:50:46,517 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:46,517 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:50:46,518 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,518 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,519 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,519 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,519 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,519 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:50:46,519 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:46,519 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:50:46,519 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:46,519 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:50:46,520 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:50:46,520 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:50:46,520 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,520 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:50:46,521 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:50:46,521 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getUnreadCount executed in 2 ms
2025-04-18 23:50:46,521 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:50:46,521 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 2 ms
2025-04-18 23:50:46,522 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:46,522 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=14ms
2025-04-18 23:50:46,522 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:50:46,522 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=14ms
2025-04-18 23:51:10,522 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:51:10,522 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:51:10,522 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:51:16,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications/unread-count
2025-04-18 23:51:16,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:16,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:51:16,768 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:51:16,768 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:16,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:16,768 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:16,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:16,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:51:16,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:16,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:51:16,769 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:51:16,770 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:51:16,770 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:51:16,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:51:16,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:51:16,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:16,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:16,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:16,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:16,773 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:16,773 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:16,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:16,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:16,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4cd4ad9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:16,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4b8648d8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:16,775 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:16,775 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:16,775 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:51:16,775 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:16,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:16,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:16,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:16,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:16,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:16,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:16,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:16,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:16,778 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:16,778 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:16,778 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:16,778 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:16,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:51:16,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:16,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:16,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:16,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:51:16,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getUnreadCount executed in 2 ms
2025-04-18 23:51:16,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:16,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 2 ms
2025-04-18 23:51:16,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:16,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=14ms
2025-04-18 23:51:16,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:16,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=13ms
2025-04-18 23:51:40,535 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:51:40,535 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:51:40,535 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:51:41,667 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-18 23:51:41,667 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:41,668 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:41,668 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:41,669 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:41,669 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,669 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:51:41,669 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,670 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:51:41,670 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:51:41,670 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:51:41,672 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:41,672 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:41,674 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:41,674 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,676 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,676 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:51:41,676 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:41,676 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@e06ab21, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,677 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:41,677 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:41,678 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:41,679 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,680 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,681 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,681 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:41,682 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:41,683 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:41,683 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,686 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:41,687 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 5 ms
2025-04-18 23:51:41,689 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:41,689 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=21ms
2025-04-18 23:51:41,691 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:51:41,691 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:41,691 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:41,692 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:41,692 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:41,692 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,692 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:51:41,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,693 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:51:41,693 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:51:41,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:51:41,695 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:41,695 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:41,696 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:41,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,698 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,698 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:51:41,698 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:41,698 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4ba09b99, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,699 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:41,699 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:41,700 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:41,700 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,702 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,702 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,702 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:41,703 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:41,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:41,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,706 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:41,707 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 4 ms
2025-04-18 23:51:41,708 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:41,708 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=17ms
2025-04-18 23:51:41,723 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-18 23:51:41,723 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications/unread-count
2025-04-18 23:51:41,723 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:41,723 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:41,723 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:41,723 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:51:41,723 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:41,723 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-18 23:51:41,724 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,724 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,724 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,725 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:41,725 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,725 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:51:41,726 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:51:41,726 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:51:41,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:41,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:41,726 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:41,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:41,726 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:41,726 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:41,727 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:41,727 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:41,727 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:41,727 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,727 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,727 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1b34d94e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3b8c0f39, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1979dfda, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,730 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:51:41,730 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:41,730 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:41,730 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:51:41,730 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:41,730 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:41,731 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts with args: [6]
2025-04-18 23:51:41,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:41,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:41,732 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,732 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,732 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:51:41,735 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,735 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,733 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,735 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,735 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:41,735 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:51:41,735 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:41,735 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:41,736 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:41,736 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:41,737 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:41,736 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:51:41,737 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:51:41,738 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:51:41,738 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,739 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getUnreadCount executed in 3 ms
2025-04-18 23:51:41,739 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:51:41,739 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:41,739 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 3 ms
2025-04-18 23:51:41,740 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:41,742 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=19ms
2025-04-18 23:51:41,742 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,743 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:41,743 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:51:41,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=19ms
2025-04-18 23:51:41,744 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,744 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:51:41,747 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:51:41,747 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 16 ms
2025-04-18 23:51:41,748 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,748 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:41,749 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,750 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:41,750 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,751 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:41,752 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,752 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:41,753 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,753 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:41,754 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,754 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:41,755 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,756 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:41,756 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,757 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:41,758 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,759 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:41,761 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:41,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:41,763 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,763 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:41,764 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:41,764 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=41ms
2025-04-18 23:51:41,764 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-18 23:51:41,764 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:41,765 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:41,765 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:41,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-18 23:51:41,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:51:41,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:41,767 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:51:41,768 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:51:41,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:51:41,770 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:41,770 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:41,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:41,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:41,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:51:41,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:41,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4a59618c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:41,775 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:51:41,775 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:41,776 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts with args: [6]
2025-04-18 23:51:41,777 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:51:41,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,780 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:51:41,781 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,782 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:51:41,782 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:51:41,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:51:41,785 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:41,785 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:51:41,787 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:51:41,788 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 12 ms
2025-04-18 23:51:41,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,789 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:41,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:41,790 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,791 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:41,792 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,792 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:41,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,794 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:41,795 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,795 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:41,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,797 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:41,797 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,798 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:41,799 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,799 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:41,799 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,800 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:41,801 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:41,801 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:41,802 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:41,802 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:41,803 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:41,803 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=38ms
2025-04-18 23:51:48,873 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-18 23:51:48,873 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:48,875 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:48,875 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:48,876 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:48,876 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,876 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:51:48,876 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,877 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:51:48,877 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:51:48,878 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:51:48,879 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:48,880 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:48,881 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:48,881 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,884 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,884 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:51:48,884 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:48,884 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@475fcfe9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,885 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:48,885 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:48,886 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:48,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,889 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,889 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,889 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:48,890 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:48,890 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:48,891 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,893 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:48,893 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 3 ms
2025-04-18 23:51:48,896 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:48,896 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=23ms
2025-04-18 23:51:48,898 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:51:48,898 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:48,898 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:48,899 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:48,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:48,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:51:48,900 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,900 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:51:48,900 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:51:48,901 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:51:48,902 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:48,902 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:48,904 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:48,904 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:51:48,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:48,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@53fd2921, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,907 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:48,907 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:48,908 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:48,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,910 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,911 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,911 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:48,911 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:48,912 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:48,913 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,914 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:48,914 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 3 ms
2025-04-18 23:51:48,915 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:48,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=17ms
2025-04-18 23:51:48,935 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications/unread-count
2025-04-18 23:51:48,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-18 23:51:48,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:48,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:48,936 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:48,936 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:51:48,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-18 23:51:48,936 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:48,936 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:48,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:48,937 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications?currentUserId=3
2025-04-18 23:51:48,937 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:51:48,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:51:48,939 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:48,939 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:48,939 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:48,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:48,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:48,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:48,941 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:48,941 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:48,941 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:48,941 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,941 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,941 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:51:48,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:51:48,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3c25854b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5759c00b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7fcf92b9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,943 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:51:48,943 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:48,943 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:51:48,943 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:48,943 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications?currentUserId=3
2025-04-18 23:51:48,943 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:51:48,943 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts with args: [6]
2025-04-18 23:51:48,944 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:48,944 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:51:48,944 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:51:48,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,945 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,946 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:51:48,946 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,946 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,947 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:48,947 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:48,947 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,947 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:51:48,948 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:51:48,948 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:51:48,948 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:51:48,949 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:51:48,948 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,949 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,947 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:51:48,951 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:51:48,952 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getUnreadCount executed in 5 ms
2025-04-18 23:51:48,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:51:48,954 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:48,955 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=19ms
2025-04-18 23:51:48,956 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,956 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:51:48,957 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 9 ms
2025-04-18 23:51:48,957 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:51:48,959 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:48,959 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=22ms
2025-04-18 23:51:48,959 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,959 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:51:48,961 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:51:48,962 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 19 ms
2025-04-18 23:51:48,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:48,963 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:48,964 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:48,964 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,965 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:48,965 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:48,965 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:48,967 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,967 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:48,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:48,969 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:48,970 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,970 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:48,970 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:48,971 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:48,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,971 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:48,972 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:48,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:48,972 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:48,973 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:48,974 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:48,974 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:48,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=39ms
2025-04-18 23:51:48,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-18 23:51:48,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:51:48,976 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:48,976 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:51:48,976 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-18 23:51:48,976 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,976 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:51:48,976 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:51:48,977 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:51:48,977 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:51:48,978 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:51:48,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:51:48,980 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:51:48,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:51:48,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:51:48,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:51:48,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:51:48,983 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1afcc7d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:51:48,985 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:51:48,985 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:51:48,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts with args: [6]
2025-04-18 23:51:48,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:51:48,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,989 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:51:48,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,990 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:51:48,991 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:51:48,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,993 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:51:48,994 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:51:48,995 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:51:48,996 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:51:48,997 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 11 ms
2025-04-18 23:51:48,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:48,998 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:48,999 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:49,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:51:49,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:49,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:49,003 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:49,003 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:51:49,005 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:49,005 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:49,005 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:49,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:51:49,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:49,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:49,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:49,007 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:51:49,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:49,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:49,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:49,009 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:51:49,010 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:51:49,011 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:49,011 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:51:49,011 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:51:49,012 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:51:49,013 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=37ms
2025-04-18 23:52:10,549 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:52:10,549 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:52:10,549 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:52:18,940 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications/unread-count
2025-04-18 23:52:18,941 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:52:18,941 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:52:18,942 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:52:18,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:52:18,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:18,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:52:18,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:18,946 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:52:18,946 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-18 23:52:18,946 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:52:18,947 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications?currentUserId=3
2025-04-18 23:52:18,947 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:52:18,947 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:52:18,947 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:52:18,947 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-18 23:52:18,947 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:18,947 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:52:18,947 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:18,948 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:52:18,948 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:52:18,948 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:52:18,950 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:52:18,951 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:52:18,951 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:52:18,952 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:52:18,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:52:18,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:18,957 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:52:18,958 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:18,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:18,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:52:18,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:52:18,959 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@278ad11a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:18,960 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:52:18,960 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications?currentUserId=3
2025-04-18 23:52:18,960 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:18,961 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:52:18,961 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:52:18,961 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6f17d4b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:18,962 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:52:18,962 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:52:18,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:18,963 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:52:18,968 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:18,969 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:18,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:52:18,970 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:52:18,971 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:52:18,970 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:18,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:52:18,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:18,973 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:18,973 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:18,973 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:52:18,973 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:52:18,973 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:52:18,974 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 3 ms
2025-04-18 23:52:18,974 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:52:18,974 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:18,976 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:52:18,976 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=29ms
2025-04-18 23:52:18,976 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:52:18,978 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getUnreadCount executed in 5 ms
2025-04-18 23:52:18,980 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:52:18,981 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=40ms
2025-04-18 23:52:40,561 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:52:40,561 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:52:40,561 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:52:49,785 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-18 23:52:49,785 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications/unread-count
2025-04-18 23:52:49,785 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:52:49,785 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:52:49,785 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications?currentUserId=3
2025-04-18 23:52:49,785 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:52:49,785 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:52:49,785 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:49,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:52:49,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:52:49,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:52:49,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:52:49,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:52:49,787 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:52:49,787 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:52:49,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:52:49,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:52:49,789 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:52:49,789 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:52:49,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:52:49,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:52:49,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:49,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:49,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:49,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:49,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:52:49,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:52:49,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:52:49,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:52:49,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@19779608, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:49,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5a1c44ba, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:52:49,792 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:52:49,792 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:52:49,792 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:52:49,792 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications?currentUserId=3
2025-04-18 23:52:49,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:52:49,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:52:49,794 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:49,794 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:49,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:49,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:49,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:49,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:52:49,795 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:52:49,795 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:52:49,795 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:52:49,795 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:52:49,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:52:49,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:52:49,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:49,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:52:49,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:52:49,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getUnreadCount executed in 2 ms
2025-04-18 23:52:49,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:52:49,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 2 ms
2025-04-18 23:52:49,797 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:52:49,797 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=12ms
2025-04-18 23:52:49,797 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:52:49,797 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=12ms
2025-04-18 23:53:10,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /products
2025-04-18 23:53:10,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /wishlist
2025-04-18 23:53:10,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,038 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,038 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,043 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,043 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,043 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,043 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /categories
2025-04-18 23:53:10,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /products/max-price
2025-04-18 23:53:10,046 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,046 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,047 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,047 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,048 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: OPTIONS /products/recommended
2025-04-18 23:53:10,048 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,048 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,049 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /products
2025-04-18 23:53:10,049 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,049 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,050 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,050 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /wishlist
2025-04-18 23:53:10,050 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,050 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,050 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,050 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,052 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,052 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,052 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,052 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,053 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,053 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/top
2025-04-18 23:53:10,053 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,053 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,054 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,055 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /products/max-price
2025-04-18 23:53:10,055 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /categories
2025-04-18 23:53:10,056 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,056 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,056 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,056 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,057 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /products/recommended
2025-04-18 23:53:10,057 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,057 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:10,062 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /wishlist
2025-04-18 23:53:10,062 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,062 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /wishlist?currentUserId=3
2025-04-18 23:53:10,064 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,064 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /wishlist, Method: GET
2025-04-18 23:53:10,064 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,065 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:53:10,065 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,066 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-18 23:53:10,066 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/max-price
2025-04-18 23:53:10,066 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products
2025-04-18 23:53:10,066 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /categories
2025-04-18 23:53:10,066 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:53:10,066 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/recommended
2025-04-18 23:53:10,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,069 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /categories?currentUserId=3
2025-04-18 23:53:10,069 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:53:10,069 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,069 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/recommended?currentUserId=3
2025-04-18 23:53:10,069 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:53:10,069 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:53:10,070 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,070 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,070 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/max-price?currentUserId=3
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/recommended, Method: GET
2025-04-18 23:53:10,070 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,071 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,071 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /categories, Method: GET
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/max-price, Method: GET
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:53:10,071 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products, Method: GET
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:53:10,072 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:53:10,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,073 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,076 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:53:10,076 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,076 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:53:10,076 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:53:10,077 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,077 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,077 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,078 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:53:10,078 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,078 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:53:10,079 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,080 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@c499603, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,081 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3e5c5bde, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,081 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,082 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /products/recommended?currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,082 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /wishlist?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,082 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/recommended?currentUserId=3
2025-04-18 23:53:10,082 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /wishlist?currentUserId=3
2025-04-18 23:53:10,082 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,082 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,083 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,084 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getRecommendedProducts with args: [10]
2025-04-18 23:53:10,084 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,084 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,084 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,084 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,085 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,085 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,085 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:53:10,085 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,085 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65f3384f
2025-04-18 23:53:10,085 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@12955812, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,085 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,086 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,086 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,085 DEBUG com.zaxxer.hikari.pool.HikariPool [http-nio-8080-exec-2] HikariPool-1 - Add connection elided, waiting 2, queue 3
2025-04-18 23:53:10,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,086 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:10,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,086 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,088 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,089 DEBUG com.zaxxer.hikari.pool.HikariPool [http-nio-8080-exec-1] HikariPool-1 - Add connection elided, waiting 1, queue 2
2025-04-18 23:53:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:53:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:53:10,091 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,090 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,091 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5b8ed0e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,091 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /categories?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,091 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3cec9094, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,092 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /categories?currentUserId=3
2025-04-18 23:53:10,091 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:53:10,092 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d56ffe7
2025-04-18 23:53:10,092 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /products/max-price?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,093 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/max-price?currentUserId=3
2025-04-18 23:53:10,093 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:53:10,093 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:10,093 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,093 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllCategories
2025-04-18 23:53:10,093 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,093 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:10,093 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,093 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,093 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-7] Get wishlist request for user: 3
2025-04-18 23:53:10,093 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-18 23:53:10,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        wishlist0_.id as id1_20_,
        wishlist0_.created_at as created_2_20_,
        wishlist0_.product_id as product_3_20_,
        wishlist0_.user_id as user_id4_20_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-18 23:53:10,095 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,096 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,096 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:53:10,096 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,096 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,096 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@751d19d9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,097 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,097 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:53:10,097 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,097 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,097 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,097 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,097 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-10] Unhandled exception occurred
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "max-price"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.NumberFormatException: For input string: "max-price"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Long.parseLong(Long.java:711)
	at java.base/java.lang.Long.valueOf(Long.java:1163)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 102 common frames omitted
2025-04-18 23:53:10,097 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:53:10,097 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllProducts
2025-04-18 23:53:10,098 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,098 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Điện thoại, description=Các loại điện thoại di động, imageUrl=https://example.com/images/categories/phone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=2, name=Laptop, description=Máy tính xách tay các loại, imageUrl=https://example.com/images/categories/laptop.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=3, name=Máy tính bảng, description=Các loại máy tính bảng, imageUrl=https://example.com/images/categories/tablet.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=4, name=Phụ kiện, description=Phụ kiện công nghệ, imageUrl=https://example.com/images/categories/accessories.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=5, name=TV & Thiết bị điện tử, description=Tivi và các thiết bị điện tử, imageUrl=https://example.com/images/categories/tv.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=9, name=Điện thoại Oppo, description=Các dòng điện thoại Oppo, imageUrl=https://example.com/images/categories/oppo.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=11, name=Laptop Dell, description=Máy tính xách tay của Dell, imageUrl=https://example.com/images/categories/dell.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=12, name=Laptop HP, description=Máy tính xách tay của HP, imageUrl=https://example.com/images/categories/hp.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=13, name=Laptop Asus, description=Máy tính xách tay của Asus, imageUrl=https://example.com/images/categories/asus.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=15, name=Tai nghe, description=Các loại tai nghe, imageUrl=https://example.com/images/categories/headphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=17, name=Ốp lưng, description=Ốp lưng bảo vệ điện thoại, imageUrl=https://example.com/images/categories/case.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)],[]>]
2025-04-18 23:53:10,098 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,098 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,098 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllCategories executed in 5 ms
2025-04-18 23:53:10,098 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_
2025-04-18 23:53:10,098 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,098 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,100 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,100 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=500, Time=31ms
2025-04-18 23:53:10,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,100 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-18 23:53:10,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,101 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,101 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,101 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 15 ms
2025-04-18 23:53:10,103 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@1eaf3e8e],[]>]
2025-04-18 23:53:10,103 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,103 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/max-price
2025-04-18 23:53:10,101 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=40, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:44:13), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35)],[]>]
2025-04-18 23:53:10,103 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,103 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,104 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getWishlist executed in 11 ms
2025-04-18 23:53:10,104 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getRecommendedProducts executed in 20 ms
2025-04-18 23:53:10,104 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,104 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/max-price?currentUserId=3
2025-04-18 23:53:10,104 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,104 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,104 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,105 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=43ms
2025-04-18 23:53:10,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,105 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/max-price, Method: GET
2025-04-18 23:53:10,105 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,105 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,105 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:53:10,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,105 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,106 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,106 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:53:10,106 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:53:10,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,107 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:53:10,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,109 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:53:10,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [9]
2025-04-18 23:53:10,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,107 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,107 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /wishlist
2025-04-18 23:53:10,111 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,111 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /wishlist?currentUserId=3
2025-04-18 23:53:10,111 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,111 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,111 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-18 23:53:10,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,111 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,114 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,115 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,114 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:53:10,115 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,115 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,116 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,116 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /wishlist, Method: GET
2025-04-18 23:53:10,116 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:53:10,117 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3f91cd53, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,117 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [11]
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:53:10,117 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,117 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products/max-price?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,119 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/max-price?currentUserId=3
2025-04-18 23:53:10,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [12]
2025-04-18 23:53:10,117 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,119 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:53:10,119 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,120 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [13]
2025-04-18 23:53:10,119 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,121 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,124 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,122 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,122 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-8] Unhandled exception occurred
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "max-price"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.NumberFormatException: For input string: "max-price"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Long.parseLong(Long.java:711)
	at java.base/java.lang.Long.valueOf(Long.java:1163)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 102 common frames omitted
2025-04-18 23:53:10,121 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:53:10,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,125 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:53:10,126 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=58ms
2025-04-18 23:53:10,128 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,127 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,128 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=500, Time=24ms
2025-04-18 23:53:10,128 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,128 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,129 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,130 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,129 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,130 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-18 23:53:10,130 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,131 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:53:10,131 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,133 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,132 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,132 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,133 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,133 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,133 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [15]
2025-04-18 23:53:10,133 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,133 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,134 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,134 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:53:10,135 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,135 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,136 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,136 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,137 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,138 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,139 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:53:10,138 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllProducts with result: [<200 OK OK,[Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=40, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:44:13), Product(id=27, name=iPhone 14, description=iPhone 14 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.999E7, stock=41, imageUrl=https://example.com/images/products/iphone14.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=80, soldCount=130, isFeatured=false, discountPercentage=2.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:39:44), Product(id=28, name=iPhone 13, description=iPhone 13 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.799E7, stock=40, imageUrl=https://example.com/images/products/iphone13.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=150, soldCount=300, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=31, name=Samsung Galaxy A54, description=Samsung Galaxy A54 128GB, màn hình 6.4 inch Super AMOLED, chip Exynos 1380, price=9990000.0, stock=69, imageUrl=https://example.com/images/products/a54.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=60, soldCount=200, isFeatured=false, discountPercentage=8.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=33, name=Xiaomi 13 Pro, description=Xiaomi 13 Pro 256GB, màn hình 6.73 inch AMOLED, chip Snapdragon 8 Gen 2, price=2.199E7, stock=25, imageUrl=https://example.com/images/products/xiaomi13pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=35, soldCount=60, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=34, name=Xiaomi 13, description=Xiaomi 13 128GB, màn hình 6.36 inch AMOLED, chip Snapdragon 8 Gen 2, price=1.799E7, stock=30, imageUrl=https://example.com/images/products/xiaomi13.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=30, soldCount=50, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=35, name=Xiaomi Redmi Note 12 Pro, description=Xiaomi Redmi Note 12 Pro 128GB, màn hình 6.67 inch AMOLED, chip MediaTek Dimensity 1080, price=7990000.0, stock=77, imageUrl=https://example.com/images/products/redminote12pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=90, soldCount=250, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:38:02), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=38, name=MacBook Pro 16 M2 Max, description=MacBook Pro 16 inch M2 Max 32GB RAM, 1TB SSD, price=6.999E7, stock=9, imageUrl=https://example.com/images/products/macbookpro16.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=3.5, reviewCount=2, soldCount=20, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T21:53:38), Product(id=39, name=Asus ROG Strix G15, description=Asus ROG Strix G15 AMD Ryzen 7-6800H, 16GB RAM, RTX 3060, 512GB SSD, price=3.299E7, stock=18, imageUrl=https://example.com/images/products/rogg15.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=55, soldCount=90, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=40, name=MSI Stealth 15M, description=MSI Stealth 15M Intel Core i7-11375H, 16GB RAM, RTX 3060, 512GB SSD, price=2.899E7, stock=15, imageUrl=https://example.com/images/products/stealth15m.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=45, soldCount=80, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=43, name=Galaxy Buds 2 Pro, description=Tai nghe không dây Samsung Galaxy Buds 2 Pro với công nghệ Hi-Fi 24bit, price=3990000.0, stock=45, imageUrl=https://example.com/images/products/buds2pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=150, soldCount=280, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=44, name=Xiaomi Redmi Buds 4 Pro, description=Tai nghe không dây Xiaomi Redmi Buds 4 Pro với tính năng chống ồn, price=1690000.0, stock=80, imageUrl=https://example.com/images/products/redmibuds4pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=100, soldCount=200, isFeatured=false, discountPercentage=15.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=45, name=Anker PowerCore Slim 10000, description=Pin dự phòng Anker PowerCore Slim 10000mAh với công nghệ PowerIQ, price=790000.0, stock=100, imageUrl=https://example.com/images/products/ankerpowercore.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=300, soldCount=500, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=46, name=Mi Power Bank 3 20000, description=Pin dự phòng Xiaomi Mi Power Bank 3 20000mAh với 2 cổng USB-A và 1 cổng USB-C, price=890000.0, stock=90, imageUrl=https://example.com/images/products/mipowerbank3.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=250, soldCount=450, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=47, name=Samsung Wireless Powerbank, description=Pin dự phòng Samsung Wireless 10000mAh với khả năng sạc không dây, price=1290000.0, stock=70, imageUrl=https://example.com/images/products/samsungpowerbank.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.4, reviewCount=180, soldCount=320, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:53:10,139 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,139 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [17]
2025-04-18 23:53:10,139 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllProducts executed in 42 ms
2025-04-18 23:53:10,139 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,139 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,140 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:53:10,140 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,140 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,140 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:53:10,140 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,140 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2114e573, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,140 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:53:10,140 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:53:10,140 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,140 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:53:10,140 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /wishlist?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,140 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,140 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /wishlist?currentUserId=3
2025-04-18 23:53:10,140 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,142 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [5]
2025-04-18 23:53:10,143 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,146 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,146 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,146 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,146 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=78ms
2025-04-18 23:53:10,146 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,146 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:10,146 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,146 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,146 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,148 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,149 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /categories
2025-04-18 23:53:10,149 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:53:10,149 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,149 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,149 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:53:10,149 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /categories?currentUserId=3
2025-04-18 23:53:10,149 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,149 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:53:10,149 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /categories, Method: GET
2025-04-18 23:53:10,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:53:10,150 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,149 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@563ab3f9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,150 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,151 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:10,151 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,151 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:10,151 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,151 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,152 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:53:10,152 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,151 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-3] Get wishlist request for user: 3
2025-04-18 23:53:10,152 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:53:10,152 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:53:10,152 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,152 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        wishlist0_.id as id1_20_,
        wishlist0_.created_at as created_2_20_,
        wishlist0_.product_id as product_3_20_,
        wishlist0_.user_id as user_id4_20_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-18 23:53:10,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,155 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,155 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,156 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,157 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,156 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,157 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:53:10,157 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,158 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,159 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,159 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,160 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,160 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:53:10,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:53:10,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,161 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@413586cf, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,162 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /categories?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,162 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /categories?currentUserId=3
2025-04-18 23:53:10,162 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,162 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:53:10,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,162 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,163 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllCategories
2025-04-18 23:53:10,163 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,163 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,163 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,163 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,164 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,164 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-18 23:53:10,163 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:53:10,166 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,165 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,167 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=99ms
2025-04-18 23:53:10,167 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:53:10,169 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/recommended
2025-04-18 23:53:10,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,169 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,169 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/recommended?currentUserId=3
2025-04-18 23:53:10,169 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,169 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/recommended, Method: GET
2025-04-18 23:53:10,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:53:10,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,172 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:53:10,171 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Điện thoại, description=Các loại điện thoại di động, imageUrl=https://example.com/images/categories/phone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=2, name=Laptop, description=Máy tính xách tay các loại, imageUrl=https://example.com/images/categories/laptop.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=3, name=Máy tính bảng, description=Các loại máy tính bảng, imageUrl=https://example.com/images/categories/tablet.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=4, name=Phụ kiện, description=Phụ kiện công nghệ, imageUrl=https://example.com/images/categories/accessories.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=5, name=TV & Thiết bị điện tử, description=Tivi và các thiết bị điện tử, imageUrl=https://example.com/images/categories/tv.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=9, name=Điện thoại Oppo, description=Các dòng điện thoại Oppo, imageUrl=https://example.com/images/categories/oppo.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=11, name=Laptop Dell, description=Máy tính xách tay của Dell, imageUrl=https://example.com/images/categories/dell.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=12, name=Laptop HP, description=Máy tính xách tay của HP, imageUrl=https://example.com/images/categories/hp.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=13, name=Laptop Asus, description=Máy tính xách tay của Asus, imageUrl=https://example.com/images/categories/asus.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=15, name=Tai nghe, description=Các loại tai nghe, imageUrl=https://example.com/images/categories/headphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=17, name=Ốp lưng, description=Ốp lưng bảo vệ điện thoại, imageUrl=https://example.com/images/categories/case.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)],[]>]
2025-04-18 23:53:10,172 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllCategories executed in 9 ms
2025-04-18 23:53:10,172 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:53:10,172 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:53:10,173 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,173 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,173 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,173 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 21 ms
2025-04-18 23:53:10,173 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,174 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-18 23:53:10,174 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,174 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,174 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@40778837],[]>]
2025-04-18 23:53:10,174 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getWishlist executed in 23 ms
2025-04-18 23:53:10,174 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,174 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,176 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,176 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,176 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,177 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,178 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=67ms
2025-04-18 23:53:10,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:53:10,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,179 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,179 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:53:10,180 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,180 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1a9913f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,180 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /products/recommended?currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,180 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/recommended?currentUserId=3
2025-04-18 23:53:10,180 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [9]
2025-04-18 23:53:10,180 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,182 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,182 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getRecommendedProducts with args: [10]
2025-04-18 23:53:10,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,182 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,183 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-18 23:53:10,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,183 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:53:10,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,184 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,184 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,184 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,184 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,185 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:53:10,185 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,185 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,185 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,186 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,186 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [11]
2025-04-18 23:53:10,186 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,186 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,187 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,186 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,187 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,187 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,187 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [12]
2025-04-18 23:53:10,187 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=55ms
2025-04-18 23:53:10,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,189 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,190 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-18 23:53:10,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [13]
2025-04-18 23:53:10,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,190 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,190 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,191 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,191 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,192 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,192 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,192 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,192 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:53:10,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,192 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,192 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:53:10,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,194 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:53:10,194 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,194 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:53:10,194 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:53:10,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-18 23:53:10,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:53:10,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,198 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [15]
2025-04-18 23:53:10,198 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,198 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=40, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:44:13), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35)],[]>]
2025-04-18 23:53:10,198 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getRecommendedProducts executed in 16 ms
2025-04-18 23:53:10,198 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:53:10,199 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,199 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,200 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,201 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:53:10,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:53:10,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3e12f8dc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,203 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [17]
2025-04-18 23:53:10,203 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:53:10,203 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,203 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,203 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,203 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,203 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,203 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,203 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:53:10,203 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:53:10,204 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:53:10,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [5]
2025-04-18 23:53:10,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,205 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,205 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=56ms
2025-04-18 23:53:10,205 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,207 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,208 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,208 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,208 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,209 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,209 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,209 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,209 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:10,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,215 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,215 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,215 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,216 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,216 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,216 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:53:10,217 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 13 ms
2025-04-18 23:53:10,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,217 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,217 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:53:10,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:53:10,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:53:10,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,221 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,221 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,221 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,221 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,221 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,221 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,222 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,222 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,222 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,223 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,223 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,223 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,223 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,225 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,225 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,225 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,225 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,226 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:53:10,226 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,225 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,227 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,227 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,227 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=37ms
2025-04-18 23:53:10,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=58ms
2025-04-18 23:53:10,227 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:53:10,229 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,229 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-18 23:53:10,229 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:53:10,229 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,230 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,230 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,230 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,230 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:53:10,230 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:53:10,231 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:53:10,231 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:53:10,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:53:10,232 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,232 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,233 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:53:10,233 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,234 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,234 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,236 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:53:10,236 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,237 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:53:10,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,238 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:53:10,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@520d976e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,238 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products
2025-04-18 23:53:10,238 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,239 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,239 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,239 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:53:10,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,239 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:53:10,239 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products, Method: GET
2025-04-18 23:53:10,239 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,239 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,239 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:53:10,239 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,252 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:53:10,240 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:53:10,253 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:53:10,253 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:53:10,255 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,255 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,255 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,256 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,256 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:53:10,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,258 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,259 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,259 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=190ms
2025-04-18 23:53:10,259 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,260 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,260 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:53:10,260 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,260 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,260 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@35606805, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,260 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:10,260 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products?sort=newest&minPrice=0&maxPrice=10000000&currentUserId=3
2025-04-18 23:53:10,261 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,261 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllProducts
2025-04-18 23:53:10,262 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_
2025-04-18 23:53:10,262 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,263 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,263 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,263 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,264 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 25 ms
2025-04-18 23:53:10,264 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,264 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,265 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,265 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,265 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,266 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,266 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,266 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,266 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [8]
2025-04-18 23:53:10,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,267 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,267 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,269 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,269 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,269 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,270 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,270 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,270 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,270 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,272 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,272 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,273 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,273 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [18]
2025-04-18 23:53:10,273 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,274 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,275 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,276 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,276 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllProducts with result: [<200 OK OK,[Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=26, name=iPhone 14 Pro, description=iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic, price=2.699E7, stock=40, imageUrl=https://example.com/images/products/iphone14pro.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=95, soldCount=150, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:44:13), Product(id=27, name=iPhone 14, description=iPhone 14 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.999E7, stock=41, imageUrl=https://example.com/images/products/iphone14.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=80, soldCount=130, isFeatured=false, discountPercentage=2.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:39:44), Product(id=28, name=iPhone 13, description=iPhone 13 128GB, màn hình 6.1 inch Super Retina XDR, chip A15 Bionic, price=1.799E7, stock=40, imageUrl=https://example.com/images/products/iphone13.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=150, soldCount=300, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=30, name=Samsung Galaxy S23, description=Samsung Galaxy S23 128GB, màn hình 6.1 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=1.999E7, stock=34, imageUrl=https://example.com/images/products/s23.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=70, soldCount=100, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=31, name=Samsung Galaxy A54, description=Samsung Galaxy A54 128GB, màn hình 6.4 inch Super AMOLED, chip Exynos 1380, price=9990000.0, stock=69, imageUrl=https://example.com/images/products/a54.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=60, soldCount=200, isFeatured=false, discountPercentage=8.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T22:10:35), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=33, name=Xiaomi 13 Pro, description=Xiaomi 13 Pro 256GB, màn hình 6.73 inch AMOLED, chip Snapdragon 8 Gen 2, price=2.199E7, stock=25, imageUrl=https://example.com/images/products/xiaomi13pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=35, soldCount=60, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=34, name=Xiaomi 13, description=Xiaomi 13 128GB, màn hình 6.36 inch AMOLED, chip Snapdragon 8 Gen 2, price=1.799E7, stock=30, imageUrl=https://example.com/images/products/xiaomi13.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=30, soldCount=50, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=35, name=Xiaomi Redmi Note 12 Pro, description=Xiaomi Redmi Note 12 Pro 128GB, màn hình 6.67 inch AMOLED, chip MediaTek Dimensity 1080, price=7990000.0, stock=77, imageUrl=https://example.com/images/products/redminote12pro.jpg, category=Category(id=8, name=Điện thoại Xiaomi, description=Các dòng điện thoại Xiaomi, imageUrl=https://example.com/images/categories/xiaomi.jpg, isActive=true, displayOrder=3, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=90, soldCount=250, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:38:02), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=38, name=MacBook Pro 16 M2 Max, description=MacBook Pro 16 inch M2 Max 32GB RAM, 1TB SSD, price=6.999E7, stock=9, imageUrl=https://example.com/images/products/macbookpro16.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=3.5, reviewCount=2, soldCount=20, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-16T21:53:38), Product(id=39, name=Asus ROG Strix G15, description=Asus ROG Strix G15 AMD Ryzen 7-6800H, 16GB RAM, RTX 3060, 512GB SSD, price=3.299E7, stock=18, imageUrl=https://example.com/images/products/rogg15.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=55, soldCount=90, isFeatured=true, discountPercentage=3.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=40, name=MSI Stealth 15M, description=MSI Stealth 15M Intel Core i7-11375H, 16GB RAM, RTX 3060, 512GB SSD, price=2.899E7, stock=15, imageUrl=https://example.com/images/products/stealth15m.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=45, soldCount=80, isFeatured=false, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=41, name=Acer Predator Helios Neo, description=Acer Predator Helios Neo Intel Core i7-12700H, 16GB RAM, RTX 3070Ti, 1TB SSD, price=3.599E7, stock=12, imageUrl=https://example.com/images/products/heliosneo.jpg, category=Category(id=14, name=Laptop Gaming, description=Máy tính xách tay dành cho game thủ, imageUrl=https://example.com/images/categories/gaming.jpg, isActive=true, displayOrder=5, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=30, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=42, name=AirPods Pro 2, description=Tai nghe không dây Apple AirPods Pro 2 với công nghệ chống ồn chủ động, price=5990000.0, stock=50, imageUrl=https://example.com/images/products/airpodspro2.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=200, soldCount=350, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=43, name=Galaxy Buds 2 Pro, description=Tai nghe không dây Samsung Galaxy Buds 2 Pro với công nghệ Hi-Fi 24bit, price=3990000.0, stock=45, imageUrl=https://example.com/images/products/buds2pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.5, reviewCount=150, soldCount=280, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=44, name=Xiaomi Redmi Buds 4 Pro, description=Tai nghe không dây Xiaomi Redmi Buds 4 Pro với tính năng chống ồn, price=1690000.0, stock=80, imageUrl=https://example.com/images/products/redmibuds4pro.jpg, category=Category(id=16, name=Cáp sạc, description=Các loại cáp sạc cho thiết bị, imageUrl=https://example.com/images/categories/cable.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.3, reviewCount=100, soldCount=200, isFeatured=false, discountPercentage=15.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=45, name=Anker PowerCore Slim 10000, description=Pin dự phòng Anker PowerCore Slim 10000mAh với công nghệ PowerIQ, price=790000.0, stock=100, imageUrl=https://example.com/images/products/ankerpowercore.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.7, reviewCount=300, soldCount=500, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=46, name=Mi Power Bank 3 20000, description=Pin dự phòng Xiaomi Mi Power Bank 3 20000mAh với 2 cổng USB-A và 1 cổng USB-C, price=890000.0, stock=90, imageUrl=https://example.com/images/products/mipowerbank3.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.6, reviewCount=250, soldCount=450, isFeatured=false, discountPercentage=10.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=47, name=Samsung Wireless Powerbank, description=Pin dự phòng Samsung Wireless 10000mAh với khả năng sạc không dây, price=1290000.0, stock=70, imageUrl=https://example.com/images/products/samsungpowerbank.jpg, category=Category(id=18, name=Pin dự phòng, description=Pin sạc dự phòng, imageUrl=https://example.com/images/categories/powerbank.jpg, isActive=true, displayOrder=4, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.4, reviewCount=180, soldCount=320, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:53:10,276 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllProducts executed in 15 ms
2025-04-18 23:53:10,278 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,279 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=49ms
2025-04-18 23:53:10,279 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,279 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,279 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-18 23:53:10,280 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,280 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,280 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,280 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,281 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:53:10,281 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,282 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:53:10,282 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:53:10,282 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:53:10,282 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,283 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,284 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,284 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,286 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,286 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,286 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,286 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,287 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,287 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:10,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:53:10,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2879a121, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,288 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,289 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,289 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,289 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:53:10,290 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,290 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [27]
2025-04-18 23:53:10,291 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:53:10,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,294 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [28]
2025-04-18 23:53:10,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,295 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,295 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,295 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,295 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,295 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,296 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,297 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,297 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,298 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,298 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,300 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [30]
2025-04-18 23:53:10,300 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:53:10,301 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,301 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 11 ms
2025-04-18 23:53:10,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,302 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,303 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,303 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [31]
2025-04-18 23:53:10,304 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,304 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,304 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,304 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,305 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,305 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,305 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:53:10,305 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,306 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,306 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:53:10,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [33]
2025-04-18 23:53:10,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:53:10,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,310 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,310 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [34]
2025-04-18 23:53:10,312 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,312 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,313 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:53:10,313 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,314 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,315 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,315 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=35ms
2025-04-18 23:53:10,314 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [35]
2025-04-18 23:53:10,316 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,317 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,319 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-18 23:53:10,319 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,320 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,320 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,320 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,320 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,320 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:53:10,321 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,321 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,321 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:53:10,321 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,322 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:53:10,322 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:53:10,322 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,322 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:53:10,322 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,323 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,325 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,325 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,325 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,325 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,327 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,327 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [38]
2025-04-18 23:53:10,328 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:10,328 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,330 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:53:10,331 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,331 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,331 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:53:10,331 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,333 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [39]
2025-04-18 23:53:10,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@33b492bd, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,333 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,334 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,334 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,334 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:53:10,335 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,335 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,335 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [40]
2025-04-18 23:53:10,336 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,338 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,339 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,340 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,340 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,341 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [41]
2025-04-18 23:53:10,341 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,342 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,342 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,342 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,343 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,347 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,348 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,349 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [42]
2025-04-18 23:53:10,349 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,351 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,352 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:53:10,351 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,353 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,360 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [43]
2025-04-18 23:53:10,360 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,362 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,363 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:53:10,364 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,365 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 30 ms
2025-04-18 23:53:10,367 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,367 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,367 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,367 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [44]
2025-04-18 23:53:10,369 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,369 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,369 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:53:10,369 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,373 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,373 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,374 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [45]
2025-04-18 23:53:10,374 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,377 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,377 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,378 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,379 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:53:10,382 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,385 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,386 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [46]
2025-04-18 23:53:10,386 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,389 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,389 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:53:10,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [47]
2025-04-18 23:53:10,392 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,393 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,393 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,397 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=158ms
2025-04-18 23:53:10,399 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,402 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,412 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,412 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=92ms
2025-04-18 23:53:10,413 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-18 23:53:10,415 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,416 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,417 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,418 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,418 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,418 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:53:10,418 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,420 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:53:10,420 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:53:10,420 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:53:10,425 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,425 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,429 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,435 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:53:10,437 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,437 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@322bb351, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,438 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,438 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,440 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,444 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,450 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,452 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,453 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,453 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,454 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,458 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,459 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,460 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,461 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,466 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,466 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 26 ms
2025-04-18 23:53:10,469 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,469 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,473 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,474 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,476 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,477 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,480 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,481 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,486 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,488 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,489 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,493 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,495 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,498 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,499 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=84ms
2025-04-18 23:53:10,501 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:53:10,502 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:10,502 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,502 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:53:10,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:53:10,507 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:10,508 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:10,510 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:10,510 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:10,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:53:10,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:10,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@677a3307, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:10,514 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:53:10,514 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:53:10,515 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [4]
2025-04-18 23:53:10,516 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:53:10,517 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,518 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:53:10,520 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,521 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:53:10,522 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:53:10,523 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,524 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:53:10,527 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:53:10,529 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:53:10,531 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:53:10,531 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 16 ms
2025-04-18 23:53:10,534 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,535 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,536 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,536 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:53:10,537 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,537 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,537 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,539 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:53:10,541 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,542 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,543 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,543 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:53:10,545 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:53:10,545 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,546 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:53:10,547 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:53:10,549 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:10,550 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=48ms
2025-04-18 23:53:10,567 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:53:10,568 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:53:10,568 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:53:14,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /coupons/my-coupons
2025-04-18 23:53:14,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: OPTIONS /coupons/my-coupons
2025-04-18 23:53:14,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:14,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:14,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:14,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:14,101 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /coupons/my-coupons
2025-04-18 23:53:14,101 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:14,101 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:53:14,101 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:53:14,102 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:53:14,104 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:14,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:14,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:14,105 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:14,106 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:14,106 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:53:14,106 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:14,106 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1bef2f9b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:14,107 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:14,107 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:53:14,108 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:14,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:14,111 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:53:14,111 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:53:14,111 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:14,111 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:14,111 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-2] Getting coupons for user: 3
2025-04-18 23:53:14,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:53:14,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:14,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:53:14,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:53:14.111633100]
2025-04-18 23:53:14,115 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:53:14,115 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getMyCoupons executed in 4 ms
2025-04-18 23:53:14,142 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:14,143 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=42ms
2025-04-18 23:53:14,144 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /coupons/my-coupons
2025-04-18 23:53:14,144 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:14,144 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:53:14,144 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:53:14,145 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:53:14,146 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:14,146 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:14,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:14,147 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:14,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:14,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:53:14,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:14,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@287b92f1, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:14,148 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:14,148 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:53:14,150 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:14,150 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:14,152 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:53:14,152 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:53:14,152 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:14,152 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:14,152 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-2] Getting coupons for user: 3
2025-04-18 23:53:14,154 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:53:14,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:14,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:53:14,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:53:14.152884100]
2025-04-18 23:53:14,155 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:53:14,155 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getMyCoupons executed in 3 ms
2025-04-18 23:53:14,156 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:14,156 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=12ms
2025-04-18 23:53:18,935 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications/unread-count
2025-04-18 23:53:18,935 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:18,936 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:53:18,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-18 23:53:18,936 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:18,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:18,936 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications?currentUserId=3
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:53:18,936 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:53:18,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:18,937 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:53:18,937 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:53:18,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:53:18,937 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:53:18,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:53:18,937 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:18,937 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:18,938 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:18,938 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:18,938 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:18,938 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:18,939 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:18,939 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:18,940 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:18,940 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:18,940 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:53:18,940 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:53:18,941 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:18,941 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:18,941 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@35f3358, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:18,941 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6a80850, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:18,941 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:18,941 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:18,941 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:53:18,941 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications?currentUserId=3
2025-04-18 23:53:18,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:18,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:18,943 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:18,943 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:18,944 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:53:18,944 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:53:18,944 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:18,945 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:18,945 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:53:18,945 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:53:18,945 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:18,945 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:53:18,946 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:18,946 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:18,947 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:53:18,947 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:53:18,947 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:18,947 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 3 ms
2025-04-18 23:53:18,949 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:53:18,949 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getUnreadCount executed in 3 ms
2025-04-18 23:53:18,949 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:18,950 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=14ms
2025-04-18 23:53:18,950 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:18,950 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=15ms
2025-04-18 23:53:19,430 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: POST /coupons/verify
2025-04-18 23:53:19,431 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, content-length=35, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:19,431 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing POST /coupons/verify?currentUserId=3
2025-04-18 23:53:19,431 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:19,432 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /coupons/verify, Method: POST
2025-04-18 23:53:19,432 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:19,432 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:53:19,432 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:19,432 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:53:19,433 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:53:19,433 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:53:19,436 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:19,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:19,438 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:19,438 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:19,440 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:19,440 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:53:19,440 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:19,441 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@145b1681, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:19,441 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [POST /coupons/verify?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:19,442 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured POST /coupons/verify?currentUserId=3
2025-04-18 23:53:19,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:19,444 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:19,452 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:53:19,452 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:53:19,452 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:19,454 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING verifyCoupon with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), CouponVerifyRequest(code=c, orderAmount=2.699E7)]
2025-04-18 23:53:19,454 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-8] Verifying coupon: c for user: 3
2025-04-18 23:53:19,469 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-18 23:53:19,470 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [c]
2025-04-18 23:53:19,473 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING verifyCoupon with result: [<200 OK OK,{valid=true, coupon=Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25), message=Coupon is valid},[]>]
2025-04-18 23:53:19,473 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method verifyCoupon executed in 21 ms
2025-04-18 23:53:19,475 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:19,475 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=44ms
2025-04-18 23:53:21,494 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /orders/pay
2025-04-18 23:53:21,494 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=POST, access-control-request-headers=authorization,content-type, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:21,494 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:53:21,497 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: POST /orders/pay
2025-04-18 23:53:21,497 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, content-length=206, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:21,497 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing POST /orders/pay?currentUserId=3
2025-04-18 23:53:21,497 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /orders/pay, Method: POST
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:53:21,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:53:21,500 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:21,500 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:21,501 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:21,501 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:21,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:21,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:53:21,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:21,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5c6bf101, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:21,504 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [POST /orders/pay?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:21,504 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured POST /orders/pay?currentUserId=3
2025-04-18 23:53:21,505 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:53:21,506 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:53:21,506 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:21,506 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING createPay with args: [OrderRequest(items=[OrderItemRequest(productId=26, quantity=1)], shippingAddress=ádvb, ădawe, 12323, paymentMethod=account_balance, phoneNumber=3123123123, recipientName=sYn good72, couponCode=c, total=2.37512E7)]
2025-04-18 23:53:21,507 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:21,508 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:21,511 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:21,512 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:21,515 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:53:21,515 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [26]
2025-04-18 23:53:21,519 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-18 23:53:21,520 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [c]
2025-04-18 23:53:21,522 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    update
        products 
    set
        average_rating=?,
        category_id=?,
        created_at=?,
        description=?,
        discount_percentage=?,
        image_url=?,
        is_featured=?,
        name=?,
        price=?,
        review_count=?,
        sold_count=?,
        stock=?,
        updated_at=? 
    where
        id=?
2025-04-18 23:53:21,522 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [DOUBLE] - [4.7]
2025-04-18 23:53:21,522 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BIGINT] - [6]
2025-04-18 23:53:21,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [3] as [TIMESTAMP] - [2025-04-17T02:31:26]
2025-04-18 23:53:21,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [4] as [VARCHAR] - [iPhone 14 Pro 256GB, màn hình 6.1 inch Super Retina XDR, chip A16 Bionic]
2025-04-18 23:53:21,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [5] as [DOUBLE] - [3.0]
2025-04-18 23:53:21,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [6] as [VARCHAR] - [https://example.com/images/products/iphone14pro.jpg]
2025-04-18 23:53:21,524 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [7] as [BOOLEAN] - [true]
2025-04-18 23:53:21,525 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [8] as [VARCHAR] - [iPhone 14 Pro]
2025-04-18 23:53:21,525 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [9] as [DOUBLE] - [2.699E7]
2025-04-18 23:53:21,525 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [10] as [INTEGER] - [95]
2025-04-18 23:53:21,525 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [11] as [INTEGER] - [150]
2025-04-18 23:53:21,525 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [12] as [INTEGER] - [39]
2025-04-18 23:53:21,525 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [13] as [TIMESTAMP] - [2025-04-18T23:53:21.521839900]
2025-04-18 23:53:21,526 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [14] as [BIGINT] - [26]
2025-04-18 23:53:21,529 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING createPay with result: [<200 OK OK,https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=2699000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250418235321&vnp_CurrCode=VND&vnp_ExpireDate=20250419000821&vnp_IpAddr=42.118.208.78&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+don+hang%3A07851302&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A3000%2FPaySuccess.tsx&vnp_TmnCode=I8QN1DFX&vnp_TxnRef=07851302&vnp_Version=2.1.0&vnp_SecureHash=9328515fabc9aa942d375b8458ffc6a5028efd657f620c2f8d5d0b8032f5bc709dc13aaee2b71d9df3847d3f566ec57ca59f0fe1854aded8ce60185f812630b7,[]>]
2025-04-18 23:53:21,530 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method createPay executed in 24 ms
2025-04-18 23:53:21,531 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:21,531 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=34ms
2025-04-18 23:53:21,535 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /PaySuccess
2025-04-18 23:53:21,535 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:21,535 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /PaySuccess?currentUserId=3
2025-04-18 23:53:21,535 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /PaySuccess, Method: GET
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:53:21,536 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:53:21,540 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:21,540 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:21,542 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:21,543 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:21,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:21,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:53:21,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:21,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3571602a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:21,548 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /PaySuccess?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:21,548 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /PaySuccess?currentUserId=3
2025-04-18 23:53:21,550 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-9] Unhandled exception occurred
org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'vnp_ResponseCode' for method parameter type String is not present
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:218)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:193)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:114)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-04-18 23:53:21,552 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:21,553 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=500, Time=18ms
2025-04-18 23:53:38,005 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:53:38,005 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:53:38,006 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:53:38,006 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:53:38,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:53:38,008 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:53:38,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:53:38,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:53:38,009 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:38,010 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:38,011 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:53:38,011 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:53:38,011 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1395d7d5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:53:38,011 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:53:38,011 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:53:38,012 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:53:38,013 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:38,014 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:53:38,015 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:53:38,015 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:38,015 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:53:38,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:53:38,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:53:38,017 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:53:38,017 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 2 ms
2025-04-18 23:53:38,018 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:53:38,018 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=13ms
2025-04-18 23:53:40,583 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:53:40,583 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:53:40,583 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:53:44,697 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] Stopping...
2025-04-18 23:53:44,697 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73f506d7]]
2025-04-18 23:53:44,697 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] Stopped.
2025-04-18 23:53:44,743 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-18 23:53:44,747 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2025-04-18 23:53:44,747 DEBUG com.zaxxer.hikari.pool.HikariPool [SpringApplicationShutdownHook] HikariPool-1 - Before shutdown stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:53:44,748 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@425a0f52: (connection evicted)
2025-04-18 23:53:44,748 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@24a780aa: (connection evicted)
2025-04-18 23:53:44,749 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@42b904f2: (connection evicted)
2025-04-18 23:53:44,749 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65f3384f: (connection evicted)
2025-04-18 23:53:44,749 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6d56ffe7: (connection evicted)
2025-04-18 23:53:44,749 DEBUG com.zaxxer.hikari.pool.HikariPool [SpringApplicationShutdownHook] HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2025-04-18 23:53:44,749 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2025-04-18 23:53:47,482 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 17244 (E:\tmdt\TMDT\backend\target\classes started by leloi in E:\tmdt\TMDT\backend)
2025-04-18 23:53:47,484 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-18 23:53:48,178 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-18 23:53:48,265 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 74 ms. Found 17 JPA repository interfaces.
2025-04-18 23:53:49,029 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http) 8089 (http)
2025-04-18 23:53:49,036 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-18 23:53:49,036 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2025-04-18 23:53:49,039 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-18 23:53:49,039 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-18 23:53:49,136 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-18 23:53:49,136 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1609 ms
2025-04-18 23:53:49,276 DEBUG com.zaxxer.hikari.HikariConfig [main] Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader TomcatEmbeddedWebappClassLoader
  context: ROOT
  delegate: true
----------> Parent Classloader:
jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa

2025-04-18 23:53:49,321 DEBUG com.zaxxer.hikari.HikariConfig [main] HikariPool-1 - configuration:
2025-04-18 23:53:49,323 DEBUG com.zaxxer.hikari.HikariConfig [main] allowPoolSuspension................................false
2025-04-18 23:53:49,323 DEBUG com.zaxxer.hikari.HikariConfig [main] autoCommit................................true
2025-04-18 23:53:49,323 DEBUG com.zaxxer.hikari.HikariConfig [main] catalog................................none
2025-04-18 23:53:49,323 DEBUG com.zaxxer.hikari.HikariConfig [main] connectionInitSql................................none
2025-04-18 23:53:49,324 DEBUG com.zaxxer.hikari.HikariConfig [main] connectionTestQuery................................"SELECT 1"
2025-04-18 23:53:49,324 DEBUG com.zaxxer.hikari.HikariConfig [main] connectionTimeout................................10000
2025-04-18 23:53:49,324 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSource................................none
2025-04-18 23:53:49,324 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSourceClassName................................none
2025-04-18 23:53:49,325 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSourceJNDI................................none
2025-04-18 23:53:49,325 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSourceProperties................................{password=<masked>}
2025-04-18 23:53:49,325 DEBUG com.zaxxer.hikari.HikariConfig [main] driverClassName................................"com.mysql.cj.jdbc.Driver"
2025-04-18 23:53:49,325 DEBUG com.zaxxer.hikari.HikariConfig [main] exceptionOverrideClassName................................none
2025-04-18 23:53:49,325 DEBUG com.zaxxer.hikari.HikariConfig [main] healthCheckProperties................................{}
2025-04-18 23:53:49,325 DEBUG com.zaxxer.hikari.HikariConfig [main] healthCheckRegistry................................none
2025-04-18 23:53:49,326 DEBUG com.zaxxer.hikari.HikariConfig [main] idleTimeout................................300000
2025-04-18 23:53:49,326 DEBUG com.zaxxer.hikari.HikariConfig [main] initializationFailTimeout................................1
2025-04-18 23:53:49,326 DEBUG com.zaxxer.hikari.HikariConfig [main] isolateInternalQueries................................false
2025-04-18 23:53:49,326 DEBUG com.zaxxer.hikari.HikariConfig [main] jdbcUrl................................jdbc:mysql://localhost:3306/tmdt?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&connectTimeout=30000&socketTimeout=60000&autoReconnect=true
2025-04-18 23:53:49,327 DEBUG com.zaxxer.hikari.HikariConfig [main] keepaliveTime................................0
2025-04-18 23:53:49,327 DEBUG com.zaxxer.hikari.HikariConfig [main] leakDetectionThreshold................................0
2025-04-18 23:53:49,327 DEBUG com.zaxxer.hikari.HikariConfig [main] maxLifetime................................600000
2025-04-18 23:53:49,327 DEBUG com.zaxxer.hikari.HikariConfig [main] maximumPoolSize................................5
2025-04-18 23:53:49,327 DEBUG com.zaxxer.hikari.HikariConfig [main] metricRegistry................................none
2025-04-18 23:53:49,327 DEBUG com.zaxxer.hikari.HikariConfig [main] metricsTrackerFactory................................none
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] minimumIdle................................2
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] password................................<masked>
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] poolName................................"HikariPool-1"
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] readOnly................................false
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] registerMbeans................................false
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] scheduledExecutor................................none
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] schema................................none
2025-04-18 23:53:49,328 DEBUG com.zaxxer.hikari.HikariConfig [main] threadFactory................................internal
2025-04-18 23:53:49,329 DEBUG com.zaxxer.hikari.HikariConfig [main] transactionIsolation................................default
2025-04-18 23:53:49,329 DEBUG com.zaxxer.hikari.HikariConfig [main] username................................"root"
2025-04-18 23:53:49,329 DEBUG com.zaxxer.hikari.HikariConfig [main] validationTimeout................................5000
2025-04-18 23:53:49,329 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-18 23:53:49,470 DEBUG com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@8bc0696
2025-04-18 23:53:49,472 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-18 23:53:49,581 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2025-04-18 23:53:49,582 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2025-04-18 23:53:49,586 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2edbdf17
2025-04-18 23:53:49,586 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 connection adder] HikariPool-1 - After adding stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:53:50,622 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-18 23:53:51,061 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-18 23:53:51,757 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,771 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; private static double com.example.tmdt.controller.AdminController.lambda$getDashboardSummary$1(com.example.tmdt.model.Order)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,780 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,780 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getDashboardSummary()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,781 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,781 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.updateOrderStatus(java.lang.Long,com.example.tmdt.model.Order$OrderStatus)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,781 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,781 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.deleteUser(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,782 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,782 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getAllOrders()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,782 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,782 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getAllUsers()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,782 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,782 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getUserById(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,783 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,783 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.deleteProduct(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,783 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,783 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.assignCouponToUser(java.lang.Long,java.util.Map)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,783 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:53:51,783 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getAllProducts()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,895 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.updateCategory(java.lang.Long,com.example.tmdt.model.Category)
2025-04-18 23:53:51,895 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CategoryController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.updateCategory(java.lang.Long,com.example.tmdt.model.Category)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,896 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.createCategory(com.example.tmdt.model.Category)
2025-04-18 23:53:51,896 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CategoryController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.createCategory(com.example.tmdt.model.Category)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,896 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.deleteCategory(java.lang.Long)
2025-04-18 23:53:51,897 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CategoryController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.deleteCategory(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,904 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getActiveChatSessions()
2025-04-18 23:53:51,904 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getActiveChatSessions()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,905 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\') or #userId == authentication.principal.id") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getUserChatHistory(java.lang.String)
2025-04-18 23:53:51,906 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getUserChatHistory(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN') or #userId == authentication.principal.id', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,907 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.endChatSession(java.lang.String)
2025-04-18 23:53:51,907 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.endChatSession(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,907 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getAllChatSessions()
2025-04-18 23:53:51,908 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getAllChatSessions()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,912 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.assignCouponToUser(java.lang.Long,java.lang.Double,java.lang.Double,java.time.LocalDateTime,java.lang.String,java.lang.String)
2025-04-18 23:53:51,913 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.assignCouponToUser(java.lang.Long,java.lang.Double,java.lang.Double,java.time.LocalDateTime,java.lang.String,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,913 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllCoupons()
2025-04-18 23:53:51,913 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllCoupons()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,914 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.createCoupon(com.example.tmdt.payload.request.CouponCreateRequest)
2025-04-18 23:53:51,914 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.createCoupon(com.example.tmdt.payload.request.CouponCreateRequest)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,914 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User)
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest)
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getActiveCoupons()
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getActiveCoupons()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.updateCoupon(java.lang.Long,com.example.tmdt.payload.request.CouponCreateRequest)
2025-04-18 23:53:51,915 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.updateCoupon(java.lang.Long,com.example.tmdt.payload.request.CouponCreateRequest)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,916 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllValidCoupons()
2025-04-18 23:53:51,916 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllValidCoupons()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,916 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.deleteCoupon(java.lang.Long)
2025-04-18 23:53:51,916 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.deleteCoupon(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,923 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadMultipleFiles(org.springframework.web.multipart.MultipartFile[],java.lang.String)
2025-04-18 23:53:51,923 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.FileController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadMultipleFiles(org.springframework.web.multipart.MultipartFile[],java.lang.String)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,924 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.deleteFile(java.lang.String)
2025-04-18 23:53:51,924 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.FileController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.deleteFile(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,924 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadFile(org.springframework.web.multipart.MultipartFile,java.lang.String)
2025-04-18 23:53:51,924 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.FileController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadFile(org.springframework.web.multipart.MultipartFile,java.lang.String)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,991 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createSystemNotification(java.lang.String,java.lang.String)
2025-04-18 23:53:51,992 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createSystemNotification(java.lang.String,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,993 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.broadcastCouponNotification(java.util.Map)
2025-04-18 23:53:51,993 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.broadcastCouponNotification(java.util.Map)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,993 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getRecentNotifications(com.example.tmdt.model.User,int)
2025-04-18 23:53:51,994 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getRecentNotifications(com.example.tmdt.model.User,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,994 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadNotifications(com.example.tmdt.model.User)
2025-04-18 23:53:51,994 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadNotifications(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,995 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User)
2025-04-18 23:53:51,995 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,995 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderCancelledNotification(java.util.Map,com.example.tmdt.model.User)
2025-04-18 23:53:51,995 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderCancelledNotification(java.util.Map,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,995 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderSuccessNotification(java.util.Map,com.example.tmdt.model.User)
2025-04-18 23:53:51,996 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderSuccessNotification(java.util.Map,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,996 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteAllNotifications(com.example.tmdt.model.User)
2025-04-18 23:53:51,996 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteAllNotifications(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,996 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createCouponReceivedNotification(java.util.Map)
2025-04-18 23:53:51,997 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createCouponReceivedNotification(java.util.Map)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,997 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteNotification(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:53:51,997 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteNotification(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,997 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAllAsRead(com.example.tmdt.model.User)
2025-04-18 23:53:51,997 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAllAsRead(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,997 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User)
2025-04-18 23:53:51,998 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:51,998 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAsRead(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:53:51,998 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAsRead(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,585 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders()
2025-04-18 23:53:52,586 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders()]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updatePaymentStatus(java.lang.Long,java.lang.String)
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updatePaymentStatus(java.lang.Long,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByDateRange(java.lang.String,java.lang.String)
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByDateRange(java.lang.String,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.createOrder(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.createOrder(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,587 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long)
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updateOrderStatus(java.lang.Long,java.lang.String)
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updateOrderStatus(java.lang.Long,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getAllOrders()
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getAllOrders()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.cancelOrder(java.lang.Long)
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.cancelOrder(java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,588 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.refundOrder(java.lang.Long)
2025-04-18 23:53:52,589 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.refundOrder(java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,589 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderSummary()
2025-04-18 23:53:52,589 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderSummary()]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,589 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByStatus(java.lang.String)
2025-04-18 23:53:52,589 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByStatus(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,609 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException
2025-04-18 23:53:52,610 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.PaymentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,766 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.deleteProduct(java.lang.Long)
2025-04-18 23:53:52,766 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.deleteProduct(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,767 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.updateProduct(java.lang.Long,com.example.tmdt.model.Product)
2025-04-18 23:53:52,767 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.updateProduct(java.lang.Long,com.example.tmdt.model.Product)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,767 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.addReview(java.lang.Long,com.example.tmdt.payload.request.ReviewRequest,boolean,boolean)
2025-04-18 23:53:52,767 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.addReview(java.lang.Long,com.example.tmdt.payload.request.ReviewRequest,boolean,boolean)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,768 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.createProduct(com.example.tmdt.model.Product)
2025-04-18 23:53:52,768 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.createProduct(com.example.tmdt.model.Product)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,786 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)
2025-04-18 23:53:52,787 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,788 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.markReviewHelpful(java.lang.Long,com.example.tmdt.model.User,boolean)
2025-04-18 23:53:52,788 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.markReviewHelpful(java.lang.Long,com.example.tmdt.model.User,boolean)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,788 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.deleteReview(java.lang.Long,com.example.tmdt.model.User)
2025-04-18 23:53:52,788 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.deleteReview(java.lang.Long,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.getUserReviews(com.example.tmdt.model.User)
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.getUserReviews(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.updateReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.updateReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.checkUserReviewed(java.lang.Long,com.example.tmdt.model.User)
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.checkUserReviewed(java.lang.Long,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,789 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createSimpleReview(java.lang.Long,com.example.tmdt.model.User,int,java.lang.String,boolean)
2025-04-18 23:53:52,790 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createSimpleReview(java.lang.Long,com.example.tmdt.model.User,int,java.lang.String,boolean)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,878 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getOrdersReadyForShipment()
2025-04-18 23:53:52,879 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getOrdersReadyForShipment()]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,880 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateShipmentStatus(java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)
2025-04-18 23:53:52,880 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateShipmentStatus(java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,880 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrdersByStatus(com.example.tmdt.model.User,com.example.tmdt.model.Order$OrderStatus)
2025-04-18 23:53:52,880 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrdersByStatus(com.example.tmdt.model.User,com.example.tmdt.model.Order$OrderStatus)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,881 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateOrderStatus(com.example.tmdt.model.User,java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)
2025-04-18 23:53:52,881 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateOrderStatus(com.example.tmdt.model.User,java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,882 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrders(com.example.tmdt.model.User)
2025-04-18 23:53:52,882 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrders(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,882 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.acceptOrder(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:53:52,882 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.acceptOrder(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,896 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:53:52,897 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.getOrderTrackingHistory(java.lang.Long)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,897 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:53:52,897 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.updateOrderStatus(java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,897 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:53:52,898 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.getShipperOrders(int,int,java.lang.String)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,898 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:53:52,898 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.acceptOrder(java.lang.Long)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:52,898 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:53:52,898 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.getAvailableOrders(int,int)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,133 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getUserPoints(com.example.tmdt.model.User)
2025-04-18 23:53:53,133 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getUserPoints(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,135 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsHistory(com.example.tmdt.model.User)
2025-04-18 23:53:53,135 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsHistory(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,135 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsSummary(com.example.tmdt.model.User)
2025-04-18 23:53:53,135 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsSummary(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,136 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.redeemPoints(com.example.tmdt.model.User,int)
2025-04-18 23:53:53,136 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.redeemPoints(com.example.tmdt.model.User,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,220 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.clearWishlist(com.example.tmdt.model.User)
2025-04-18 23:53:53,220 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.clearWishlist(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,221 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User)
2025-04-18 23:53:53,221 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,222 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.removeFromWishlist(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:53:53,222 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.removeFromWishlist(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,222 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:53:53,222 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,222 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:53:53,222 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:53:53,473 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/auth/**']
2025-04-18 23:53:53,475 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/auth/**']
2025-04-18 23:53:53,476 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/test/**']
2025-04-18 23:53:53,476 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/products/**']
2025-04-18 23:53:53,476 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/products/top']
2025-04-18 23:53:53,476 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/products/recommended']
2025-04-18 23:53:53,476 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/categories/**']
2025-04-18 23:53:53,477 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [hasRole('ROLE_SHIPPER')] for Ant [pattern='/api/shipper/**']
2025-04-18 23:53:53,477 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-04-18 23:53:53,477 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [authenticated] for any request
2025-04-18 23:53:53,489 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33c6c4f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4e502162, org.springframework.security.web.context.SecurityContextPersistenceFilter@35738a92, org.springframework.security.web.header.HeaderWriterFilter@5c902a83, org.springframework.web.filter.CorsFilter@1dade178, org.springframework.security.web.authentication.logout.LogoutFilter@55a46bf3, com.example.tmdt.security.jwt.AuthTokenFilter@7212d3df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10374cae, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6298dafb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@561494af, org.springframework.security.web.session.SessionManagementFilter@71ea9a0d, org.springframework.security.web.access.ExceptionTranslationFilter@61cf142f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6fc44cb6]
2025-04-18 23:53:53,788 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-18 23:53:54,074 INFO com.example.tmdt.config.WebMvcConfig [main] Added CurrentUserArgumentResolver to Spring MVC
2025-04-18 23:53:54,714 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2025-04-18 23:53:54,743 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2025-04-18 23:53:54,750 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) 8089 (http) with context path ''
2025-04-18 23:53:54,753 INFO org.springframework.core.log.CompositeLog [main] Starting...
2025-04-18 23:53:54,753 INFO org.springframework.core.log.CompositeLog [main] BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1030ce34]]
2025-04-18 23:53:54,754 INFO org.springframework.core.log.CompositeLog [main] Started.
2025-04-18 23:53:54,767 INFO org.springframework.boot.StartupInfoLogger [main] Started TmdtApplication in 7.8 seconds (JVM running for 8.645)
2025-04-18 23:53:54,811 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [main] 
    select
        count(*) as col_0_0_ 
    from
        roles role0_
2025-04-18 23:54:04,731 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-18 23:54:04,731 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2025-04-18 23:54:04,733 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2025-04-18 23:54:04,741 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-18 23:54:04,741 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:54:04,741 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications/unread-count
2025-04-18 23:54:04,745 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:04,745 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:04,745 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:04,761 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:04,760 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:54:04,761 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:04,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:04,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:04,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:04,799 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:04,799 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:54:04,799 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:04,800 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:04,907 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:54:04,907 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:54:04,907 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:54:04,908 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:54:04,908 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:54:04,908 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:54:04,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:54:04,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:54:04,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:54:04,913 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@457656b9
2025-04-18 23:54:04,916 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@460a98c6
2025-04-18 23:54:04,918 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5d0e558c
2025-04-18 23:54:04,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:04,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:04,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:04,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:04,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:04,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:04,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:04,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:04,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:04,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:04,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:04,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,045 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,045 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,045 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:54:05,045 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:54:05,045 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,046 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:54:05,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:05,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:05,048 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:05,049 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2ec12e56, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,049 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1a86eebf, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,049 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4bf98a2, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,065 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:05,065 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:54:05,065 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:05,066 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:54:05,067 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:05,067 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:05,109 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:05,109 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:05,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,113 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,113 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts with args: [6]
2025-04-18 23:54:05,113 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,119 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:54:05,127 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,128 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,128 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:05,128 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:05,129 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,130 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:54:05,144 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,145 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:54:05,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,148 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:05,148 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:05,148 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:05,150 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,151 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:54:05,152 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,154 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:54:05,162 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:05,164 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,170 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:54:05,170 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,175 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:54:05,175 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getUnreadCount executed in 47 ms
2025-04-18 23:54:05,198 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:05,199 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 71 ms
2025-04-18 23:54:05,227 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:54:05,228 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications/unread-count
2025-04-18 23:54:05,228 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 118 ms
2025-04-18 23:54:05,228 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:05,229 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:54:05,229 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:05,229 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:05,229 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=483ms
2025-04-18 23:54:05,230 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:54:05,230 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:05,230 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:54:05,230 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:05,232 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:54:05,232 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:54:05,233 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:54:05,236 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:05,237 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:05,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:05,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,243 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,243 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:54:05,243 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:05,244 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5a1d77bc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,244 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:05,244 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:54:05,246 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:05,246 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,253 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,253 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,253 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:05,254 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:05,255 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:54:05,256 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,259 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:54:05,259 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getUnreadCount executed in 5 ms
2025-04-18 23:54:05,263 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:05,263 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=35ms
2025-04-18 23:54:05,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:05,316 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,317 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:05,319 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,319 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:05,321 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,322 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:05,323 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:05,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,323 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=578ms
2025-04-18 23:54:05,324 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:05,324 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:54:05,325 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:05,325 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:05,325 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,326 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:05,326 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:05,327 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:05,327 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:05,327 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:54:05,327 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:05,328 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:54:05,328 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,329 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:05,329 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:54:05,329 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:54:05,330 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:05,330 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,332 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:05,332 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:05,334 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:05,334 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,334 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:05,334 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,336 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,336 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:05,336 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,337 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:54:05,337 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:05,337 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5ad20780, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,338 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:05,338 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:05,338 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,339 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:05,340 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:05,341 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,341 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,341 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:05,347 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-18 23:54:05,347 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:05,348 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:05,348 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:05,348 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-18 23:54:05,349 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,349 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:05,349 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:54:05,349 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:05,349 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:05,349 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:05,349 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:05,350 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:54:05,350 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:05,351 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:54:05,351 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:54:05,351 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,353 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:05,354 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:05,359 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:05,360 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:05,360 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:05,360 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=615ms
2025-04-18 23:54:05,360 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:05,361 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 12 ms
2025-04-18 23:54:05,363 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,363 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:54:05,363 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:05,364 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@57aa6e7e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:05,364 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:05,364 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:54:05,364 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=39ms
2025-04-18 23:54:05,364 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:05,366 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts with args: [6]
2025-04-18 23:54:05,367 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:54:05,371 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,372 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:54:05,375 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,376 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:54:05,378 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,379 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:05,382 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,383 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:54:05,384 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:05,384 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:54:05,387 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:54:05,387 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 21 ms
2025-04-18 23:54:05,388 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,389 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:05,391 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:05,392 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:05,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:05,398 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,398 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:05,400 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,401 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:05,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,405 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:05,407 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,408 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:05,411 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:05,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,415 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:05,416 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:05,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:05,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:05,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:05,424 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:05,424 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=77ms
2025-04-18 23:54:08,010 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-18 23:54:08,010 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,011 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:08,011 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,012 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:08,012 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,012 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:54:08,012 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,013 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:54:08,013 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:54:08,014 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:54:08,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,017 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,020 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,021 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,026 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,026 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:54:08,026 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,026 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6e35c895, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,027 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,027 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:08,030 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:08,031 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,035 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:08,036 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:08,036 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:08,046 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:08,055 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:08,056 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,060 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:08,061 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 15 ms
2025-04-18 23:54:08,063 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,064 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=53ms
2025-04-18 23:54:08,083 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /products/24/user-reviews
2025-04-18 23:54:08,083 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /products/24
2025-04-18 23:54:08,083 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,083 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /products/24/user-reviews
2025-04-18 23:54:08,083 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/24
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,084 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:54:08,090 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/24/user-reviews
2025-04-18 23:54:08,090 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/24
2025-04-18 23:54:08,090 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,090 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,091 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/24/user-reviews?userId=3&currentUserId=3
2025-04-18 23:54:08,091 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/24?currentUserId=3
2025-04-18 23:54:08,091 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,091 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/24/user-reviews, Method: GET
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/24, Method: GET
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,092 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,093 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:54:08,093 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:54:08,095 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:54:08,095 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:54:08,097 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:54:08,097 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:54:08,097 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,099 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,101 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,101 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,102 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,104 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,105 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,106 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,107 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:54:08,107 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,107 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5fc64017, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,107 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /products/24?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,108 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/24?currentUserId=3
2025-04-18 23:54:08,110 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,111 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:54:08,111 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,111 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@29942d8f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,111 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /products/24/user-reviews?userId=3&currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,112 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/24/user-reviews?userId=3&currentUserId=3
2025-04-18 23:54:08,116 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getUserReviewsForProduct with args: [24, 3]
2025-04-18 23:54:08,116 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getProduct with args: [24]
2025-04-18 23:54:08,118 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:08,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,124 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,125 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:08,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,125 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,127 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,127 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getProduct with result: [<200 OK OK,{images=[], reviews=[], reviewCount=120, price=2.899E7, averageRating=4.8, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, id=24, stock=49, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)},[]>]
2025-04-18 23:54:08,128 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getProduct executed in 12 ms
2025-04-18 23:54:08,130 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:08,131 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:54:08,139 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:08,141 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,141 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=50ms
2025-04-18 23:54:08,141 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        review0_.id as id1_12_,
        review0_.anonymous as anonymou2_12_,
        review0_.comment as comment3_12_,
        review0_.created_at as created_4_12_,
        review0_.product_id as product_8_12_,
        review0_.rating as rating5_12_,
        review0_.title as title6_12_,
        review0_.updated_at as updated_7_12_,
        review0_.user_id as user_id9_12_ 
    from
        reviews review0_ 
    where
        review0_.user_id=? 
        and review0_.product_id=? 
    order by
        review0_.created_at desc
2025-04-18 23:54:08,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [2] as [BIGINT] - [24]
2025-04-18 23:54:08,143 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/24
2025-04-18 23:54:08,143 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,143 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/24?currentUserId=3
2025-04-18 23:54:08,144 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,144 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/24, Method: GET
2025-04-18 23:54:08,144 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,144 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:54:08,144 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,146 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:54:08,146 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getUserReviewsForProduct with result: [<200 OK OK,[],[]>]
2025-04-18 23:54:08,147 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getUserReviewsForProduct executed in 31 ms
2025-04-18 23:54:08,147 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /wishlist/check/24
2025-04-18 23:54:08,147 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,147 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:54:08,147 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:54:08,148 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:54:08,150 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,150 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,151 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=60ms
2025-04-18 23:54:08,151 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,151 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /wishlist/check/24
2025-04-18 23:54:08,151 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/24/user-reviews
2025-04-18 23:54:08,151 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,151 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,152 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /wishlist/check/24?currentUserId=3
2025-04-18 23:54:08,152 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/24/user-reviews?userId=3&currentUserId=3
2025-04-18 23:54:08,152 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,152 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/24/user-reviews, Method: GET
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /wishlist/check/24, Method: GET
2025-04-18 23:54:08,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,153 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,153 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,154 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:54:08,154 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:54:08,154 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:54:08,154 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:54:08,154 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:54:08,154 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:54:08,157 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,158 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,158 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,158 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,159 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,159 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:54:08,159 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,159 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6542616c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,159 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /products/24?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,159 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/24?currentUserId=3
2025-04-18 23:54:08,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,160 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,160 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getProduct with args: [24]
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@8d4bf55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2361ef92, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,162 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /wishlist/check/24?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,162 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /wishlist/check/24?currentUserId=3
2025-04-18 23:54:08,162 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /products/24/user-reviews?userId=3&currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,162 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/24/user-reviews?userId=3&currentUserId=3
2025-04-18 23:54:08,164 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getUserReviewsForProduct with args: [24, 3]
2025-04-18 23:54:08,164 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:08,164 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:08,165 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,165 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:08,166 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,166 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,167 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,167 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:54:08,168 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,168 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:54:08,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:08,168 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:08,168 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), 24]
2025-04-18 23:54:08,168 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,169 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,169 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,170 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getProduct with result: [<200 OK OK,{images=[], reviews=[], reviewCount=120, price=2.899E7, averageRating=4.8, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, id=24, stock=49, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)},[]>]
2025-04-18 23:54:08,170 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getProduct executed in 8 ms
2025-04-18 23:54:08,170 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        review0_.id as id1_12_,
        review0_.anonymous as anonymou2_12_,
        review0_.comment as comment3_12_,
        review0_.created_at as created_4_12_,
        review0_.product_id as product_8_12_,
        review0_.rating as rating5_12_,
        review0_.title as title6_12_,
        review0_.updated_at as updated_7_12_,
        review0_.user_id as user_id9_12_ 
    from
        reviews review0_ 
    where
        review0_.user_id=? 
        and review0_.product_id=? 
    order by
        review0_.created_at desc
2025-04-18 23:54:08,171 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,171 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [2] as [BIGINT] - [24]
2025-04-18 23:54:08,171 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:54:08,172 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:08,172 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getUserReviewsForProduct with result: [<200 OK OK,[],[]>]
2025-04-18 23:54:08,172 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getUserReviewsForProduct executed in 8 ms
2025-04-18 23:54:08,173 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-7] Check in wishlist request: user=3, productId=24
2025-04-18 23:54:08,173 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,173 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=30ms
2025-04-18 23:54:08,173 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,173 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=21ms
2025-04-18 23:54:08,178 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-7] Checking if product 24 is in wishlist for user 3
2025-04-18 23:54:08,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:08,180 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-18 23:54:08,188 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,188 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [24]
2025-04-18 23:54:08,189 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-18 23:54:08,190 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method checkInWishlist executed in 21 ms
2025-04-18 23:54:08,191 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,192 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=41ms
2025-04-18 23:54:08,192 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /wishlist/check/24
2025-04-18 23:54:08,193 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,193 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /wishlist/check/24?currentUserId=3
2025-04-18 23:54:08,193 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,193 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /wishlist/check/24, Method: GET
2025-04-18 23:54:08,193 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,194 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:54:08,194 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,195 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:54:08,196 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:54:08,197 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:54:08,199 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,200 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,206 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,206 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:54:08,206 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,206 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3da304d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,207 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /wishlist/check/24?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:08,207 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /wishlist/check/24?currentUserId=3
2025-04-18 23:54:08,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:08,211 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,215 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:54:08,216 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:54:08,217 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:08,217 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), 24]
2025-04-18 23:54:08,217 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-7] Check in wishlist request: user=3, productId=24
2025-04-18 23:54:08,218 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-7] Checking if product 24 is in wishlist for user 3
2025-04-18 23:54:08,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:08,220 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,226 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-18 23:54:08,227 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,228 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [24]
2025-04-18 23:54:08,230 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-18 23:54:08,230 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method checkInWishlist executed in 13 ms
2025-04-18 23:54:08,233 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,233 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=40ms
2025-04-18 23:54:08,314 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-18 23:54:08,314 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,315 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:54:08,317 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-18 23:54:08,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:54:08,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,319 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:54:08,322 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:54:08,322 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:54:08,326 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,327 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,333 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,334 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,342 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,342 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:54:08,342 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,342 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4f318115, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,342 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:54:08,343 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:54:08,343 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts with args: [4]
2025-04-18 23:54:08,345 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:54:08,350 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,352 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:54:08,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,357 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:54:08,359 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,361 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:08,363 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,364 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:54:08,368 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,370 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:54:08,373 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:54:08,374 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 31 ms
2025-04-18 23:54:08,376 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,376 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:08,377 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,378 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:08,379 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,380 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:08,388 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,388 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:08,389 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,389 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,390 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,395 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:08,400 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,401 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:08,405 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,405 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=90ms
2025-04-18 23:54:08,406 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-18 23:54:08,407 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:08,407 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:54:08,407 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:08,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-18 23:54:08,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:54:08,408 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:08,409 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:54:08,410 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:54:08,410 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:54:08,411 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:08,411 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:08,413 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:08,413 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:08,415 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,416 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:54:08,416 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:08,416 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1e167e9a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:08,416 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:54:08,416 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:54:08,417 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts with args: [4]
2025-04-18 23:54:08,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:54:08,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,420 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:54:08,423 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,425 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:54:08,426 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,427 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:08,429 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,430 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:54:08,432 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:08,432 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:54:08,434 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=49, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-16T22:38:49), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:54:08,435 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 18 ms
2025-04-18 23:54:08,436 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:08,438 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,439 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:08,440 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,440 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:08,441 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:08,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,444 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,444 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:08,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:08,446 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:08,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:08,447 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:08,449 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:08,449 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=42ms
2025-04-18 23:54:10,435 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /coupons/my-coupons
2025-04-18 23:54:10,435 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:10,435 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:54:10,436 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:10,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:54:10,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:10,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:54:10,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:10,437 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:54:10,437 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:54:10,438 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:54:10,440 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:10,441 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:10,442 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:10,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:10,445 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:10,446 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:54:10,446 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:10,446 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@799b2d4a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:10,446 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:10,446 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:54:10,450 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:10,450 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:10,452 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:54:10,453 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:54:10,453 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:10,453 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:10,460 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-2] Getting coupons for user: 3
2025-04-18 23:54:10,470 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:54:10,471 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:10,473 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:54:10,474 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:54:10.467558500]
2025-04-18 23:54:10,509 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:54:10,509 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getMyCoupons executed in 56 ms
2025-04-18 23:54:10,519 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:10,519 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=84ms
2025-04-18 23:54:10,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /coupons/my-coupons
2025-04-18 23:54:10,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:10,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:54:10,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:10,520 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:54:10,521 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:10,521 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:54:10,521 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:10,521 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:54:10,522 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:54:10,522 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:54:10,524 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:10,524 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:10,526 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:10,527 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:10,529 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:10,529 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:54:10,529 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:10,529 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@e2c1510, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:10,529 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:10,530 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:54:10,533 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:10,534 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:10,536 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:54:10,539 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:54:10,540 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:10,540 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:10,540 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-5] Getting coupons for user: 3
2025-04-18 23:54:10,541 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:54:10,541 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:10,542 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:54:10,542 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:54:10.540730500]
2025-04-18 23:54:10,544 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:54:10,544 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getMyCoupons executed in 4 ms
2025-04-18 23:54:10,547 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:10,547 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=27ms
2025-04-18 23:54:14,673 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: POST /orders/pay
2025-04-18 23:54:14,673 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, content-length=189, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:14,673 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing POST /orders/pay?currentUserId=3
2025-04-18 23:54:14,673 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:14,674 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /orders/pay, Method: POST
2025-04-18 23:54:14,674 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:14,674 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:54:14,674 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:14,675 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:54:14,675 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:54:14,675 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:54:14,677 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:14,678 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:14,679 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:14,679 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:14,681 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:14,681 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:54:14,682 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:14,682 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@22936910, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:14,682 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [POST /orders/pay?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:14,683 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured POST /orders/pay?currentUserId=3
2025-04-18 23:54:14,741 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:54:14,741 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:54:14,742 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:14,742 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING createPay with args: [OrderRequest(items=[OrderItemRequest(productId=24, quantity=1)], shippingAddress=ádvb, ădawe, 12323, paymentMethod=account_balance, phoneNumber=3123123123, recipientName=sYn good72, couponCode=null, total=2.899E7)]
2025-04-18 23:54:14,748 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:14,748 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:14,749 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:14,749 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:14,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:54:14,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:14,834 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    update
        products 
    set
        average_rating=?,
        category_id=?,
        created_at=?,
        description=?,
        discount_percentage=?,
        image_url=?,
        is_featured=?,
        name=?,
        price=?,
        review_count=?,
        sold_count=?,
        stock=?,
        updated_at=? 
    where
        id=?
2025-04-18 23:54:14,836 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [DOUBLE] - [4.8]
2025-04-18 23:54:14,837 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [2] as [BIGINT] - [6]
2025-04-18 23:54:14,837 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [3] as [TIMESTAMP] - [2025-04-17T02:28:22]
2025-04-18 23:54:14,837 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [4] as [VARCHAR] - [iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic]
2025-04-18 23:54:14,837 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [5] as [DOUBLE] - [5.0]
2025-04-18 23:54:14,837 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [6] as [VARCHAR] - [https://example.com/images/products/iphone14promax.jpg]
2025-04-18 23:54:14,837 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [7] as [BOOLEAN] - [true]
2025-04-18 23:54:14,838 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [8] as [VARCHAR] - [iPhone 14 Pro Max]
2025-04-18 23:54:14,838 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [9] as [DOUBLE] - [2.899E7]
2025-04-18 23:54:14,839 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [10] as [INTEGER] - [120]
2025-04-18 23:54:14,839 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [11] as [INTEGER] - [200]
2025-04-18 23:54:14,840 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [12] as [INTEGER] - [48]
2025-04-18 23:54:14,840 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [13] as [TIMESTAMP] - [2025-04-18T23:54:14.782661100]
2025-04-18 23:54:14,840 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [14] as [BIGINT] - [24]
2025-04-18 23:54:14,853 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING createPay with result: [<200 OK OK,https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=2899000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250418235414&vnp_CurrCode=VND&vnp_ExpireDate=20250419000914&vnp_IpAddr=42.118.208.78&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+don+hang%3A57809888&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A3000%2Forder-success.tsx&vnp_TmnCode=I8QN1DFX&vnp_TxnRef=57809888&vnp_Version=2.1.0&vnp_SecureHash=94215f3f6c4bdda0e51fa0c4197bd7147a0bd3abd182a7891ed8259a4f9dbd2b270c3467407a5462f7c41096411dd61653bfe8838b9937698df087dd5cab142c,[]>]
2025-04-18 23:54:14,853 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method createPay executed in 111 ms
2025-04-18 23:54:14,854 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:14,854 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=181ms
2025-04-18 23:54:14,858 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /PaySuccess
2025-04-18 23:54:14,858 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:14,858 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /PaySuccess?currentUserId=3
2025-04-18 23:54:14,859 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:14,859 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /PaySuccess, Method: GET
2025-04-18 23:54:14,859 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:14,859 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:54:14,859 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:14,860 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:54:14,860 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:54:14,860 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:54:14,862 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:14,862 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:14,864 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:14,865 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:14,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:14,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:54:14,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:14,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@19d289f7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:14,869 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /PaySuccess?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:14,869 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /PaySuccess?currentUserId=3
2025-04-18 23:54:14,883 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-4] Unhandled exception occurred
org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'vnp_ResponseCode' for method parameter type String is not present
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:218)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:193)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:114)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-04-18 23:54:14,895 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:14,895 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=500, Time=37ms
2025-04-18 23:54:19,592 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:54:19,592 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:54:19,592 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:54:33,294 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-18 23:54:33,294 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:33,294 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:33,294 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:54:33,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:54:33,297 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:33,297 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:33,297 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:33,298 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:33,300 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:33,300 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:54:33,300 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:33,300 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@253453e5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:33,302 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:33,302 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:33,303 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:33,304 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:33,306 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:33,307 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:33,307 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:33,307 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:33,308 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:33,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:33,311 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:33,311 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 4 ms
2025-04-18 23:54:33,313 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:33,314 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=20ms
2025-04-18 23:54:39,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-18 23:54:39,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:39,924 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:39,924 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:39,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:39,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:54:39,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,927 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:54:39,927 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:54:39,927 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:54:39,929 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:39,929 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:39,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:39,931 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:39,933 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:39,933 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:54:39,933 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:39,933 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@597b20d4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:39,933 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:39,933 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:39,934 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:39,934 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:39,936 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:39,937 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:39,937 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:39,937 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:39,937 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:39,938 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:39,940 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:39,940 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 3 ms
2025-04-18 23:54:39,942 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:39,942 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=18ms
2025-04-18 23:54:39,943 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-18 23:54:39,943 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:39,943 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:39,943 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:39,944 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:39,944 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,944 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:54:39,944 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,945 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:54:39,945 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:54:39,946 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:54:39,947 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:39,948 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:39,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:39,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:39,957 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:39,957 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:54:39,957 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:39,957 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@75b5f20d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:39,958 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:39,958 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:39,959 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:39,960 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:39,962 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:39,962 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:39,963 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:39,963 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:39,963 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:39,964 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:39,966 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:39,967 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 4 ms
2025-04-18 23:54:39,969 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:39,969 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=26ms
2025-04-18 23:54:39,994 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications/unread-count
2025-04-18 23:54:39,995 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-18 23:54:39,995 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:39,995 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:39,995 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:54:39,995 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:39,995 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-18 23:54:39,995 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:39,995 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:39,995 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:39,995 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications?currentUserId=3
2025-04-18 23:54:39,995 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:39,995 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-18 23:54:39,995 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:54:39,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:54:39,997 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:54:39,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:39,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:39,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:39,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:39,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:39,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:40,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:40,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:40,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:40,001 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,001 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,001 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7b702477, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3fbee93b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@77bef442, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,003 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:40,003 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:54:40,003 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:54:40,003 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:54:40,003 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:40,003 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications?currentUserId=3
2025-04-18 23:54:40,003 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts with args: [6]
2025-04-18 23:54:40,004 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:40,004 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:54:40,004 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:54:40,004 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,004 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,005 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:40,005 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:40,007 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:40,007 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:54:40,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,007 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:40,007 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:54:40,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:54:40,008 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:40,008 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:54:40,008 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:54:40,008 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:54:40,009 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,009 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,009 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:54:40,010 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:54:40,010 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getUnreadCount executed in 2 ms
2025-04-18 23:54:40,010 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:40,010 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:54:40,010 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,011 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=16ms
2025-04-18 23:54:40,011 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 3 ms
2025-04-18 23:54:40,011 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:40,012 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:40,012 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=17ms
2025-04-18 23:54:40,012 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,012 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:54:40,013 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:54:40,015 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=48, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-18T23:54:14), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:54:40,016 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 13 ms
2025-04-18 23:54:40,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,017 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:40,018 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,018 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:40,019 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,019 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:40,020 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,020 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:40,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,023 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:40,024 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,024 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:40,025 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,026 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:40,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,028 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:40,030 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,031 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:40,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,033 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:40,034 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,035 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:40,036 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:40,039 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:40,039 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=44ms
2025-04-18 23:54:40,039 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-18 23:54:40,039 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:54:40,040 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:40,040 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:54:40,040 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-18 23:54:40,040 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:40,040 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:54:40,040 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:54:40,041 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:54:40,042 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:54:40,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:54:40,043 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:54:40,043 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:54:40,044 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:54:40,044 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:54:40,046 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:54:40,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:54:40,047 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2638628e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:54:40,047 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:54:40,047 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:54:40,048 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts with args: [6]
2025-04-18 23:54:40,049 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:54:40,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,051 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:54:40,052 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,053 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:54:40,053 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,054 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:54:40,056 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,056 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:54:40,057 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:54:40,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:54:40,059 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=48, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-18T23:54:14), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:54:40,059 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 11 ms
2025-04-18 23:54:40,060 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,060 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:40,063 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,063 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:54:40,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,064 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:40,065 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,066 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:54:40,066 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:40,068 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,068 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:54:40,069 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,070 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:40,070 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:54:40,071 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:40,072 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,072 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:54:40,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:54:40,073 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:40,074 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:54:40,074 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:54:40,077 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:54:40,077 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=37ms
2025-04-18 23:54:49,608 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:54:49,608 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:54:49,609 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:54:53,733 INFO org.springframework.web.socket.config.WebSocketMessageBrokerStats [MessageBroker-1] WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-04-18 23:55:04,266 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] Stopping...
2025-04-18 23:55:04,267 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1030ce34]]
2025-04-18 23:55:04,267 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] Stopped.
2025-04-18 23:55:04,296 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-18 23:55:04,297 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2025-04-18 23:55:04,298 DEBUG com.zaxxer.hikari.pool.HikariPool [SpringApplicationShutdownHook] HikariPool-1 - Before shutdown stats (total=5, active=0, idle=5, waiting=0)
2025-04-18 23:55:04,299 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@8bc0696: (connection evicted)
2025-04-18 23:55:04,303 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2edbdf17: (connection evicted)
2025-04-18 23:55:04,303 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@457656b9: (connection evicted)
2025-04-18 23:55:04,303 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@460a98c6: (connection evicted)
2025-04-18 23:55:04,303 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5d0e558c: (connection evicted)
2025-04-18 23:55:04,304 DEBUG com.zaxxer.hikari.pool.HikariPool [SpringApplicationShutdownHook] HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2025-04-18 23:55:04,304 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2025-04-18 23:55:06,368 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 3480 (E:\tmdt\TMDT\backend\target\classes started by leloi in E:\tmdt\TMDT\backend)
2025-04-18 23:55:06,371 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-18 23:55:06,996 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-18 23:55:07,097 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 95 ms. Found 17 JPA repository interfaces.
2025-04-18 23:55:07,867 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http) 8089 (http)
2025-04-18 23:55:07,875 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-18 23:55:07,876 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2025-04-18 23:55:07,879 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-18 23:55:07,880 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-18 23:55:07,973 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-18 23:55:07,973 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1558 ms
2025-04-18 23:55:08,111 DEBUG com.zaxxer.hikari.HikariConfig [main] Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader TomcatEmbeddedWebappClassLoader
  context: ROOT
  delegate: true
----------> Parent Classloader:
jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa

2025-04-18 23:55:08,157 DEBUG com.zaxxer.hikari.HikariConfig [main] HikariPool-1 - configuration:
2025-04-18 23:55:08,159 DEBUG com.zaxxer.hikari.HikariConfig [main] allowPoolSuspension................................false
2025-04-18 23:55:08,159 DEBUG com.zaxxer.hikari.HikariConfig [main] autoCommit................................true
2025-04-18 23:55:08,159 DEBUG com.zaxxer.hikari.HikariConfig [main] catalog................................none
2025-04-18 23:55:08,160 DEBUG com.zaxxer.hikari.HikariConfig [main] connectionInitSql................................none
2025-04-18 23:55:08,160 DEBUG com.zaxxer.hikari.HikariConfig [main] connectionTestQuery................................"SELECT 1"
2025-04-18 23:55:08,161 DEBUG com.zaxxer.hikari.HikariConfig [main] connectionTimeout................................10000
2025-04-18 23:55:08,161 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSource................................none
2025-04-18 23:55:08,161 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSourceClassName................................none
2025-04-18 23:55:08,162 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSourceJNDI................................none
2025-04-18 23:55:08,162 DEBUG com.zaxxer.hikari.HikariConfig [main] dataSourceProperties................................{password=<masked>}
2025-04-18 23:55:08,162 DEBUG com.zaxxer.hikari.HikariConfig [main] driverClassName................................"com.mysql.cj.jdbc.Driver"
2025-04-18 23:55:08,163 DEBUG com.zaxxer.hikari.HikariConfig [main] exceptionOverrideClassName................................none
2025-04-18 23:55:08,163 DEBUG com.zaxxer.hikari.HikariConfig [main] healthCheckProperties................................{}
2025-04-18 23:55:08,163 DEBUG com.zaxxer.hikari.HikariConfig [main] healthCheckRegistry................................none
2025-04-18 23:55:08,163 DEBUG com.zaxxer.hikari.HikariConfig [main] idleTimeout................................300000
2025-04-18 23:55:08,163 DEBUG com.zaxxer.hikari.HikariConfig [main] initializationFailTimeout................................1
2025-04-18 23:55:08,163 DEBUG com.zaxxer.hikari.HikariConfig [main] isolateInternalQueries................................false
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] jdbcUrl................................jdbc:mysql://localhost:3306/tmdt?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&connectTimeout=30000&socketTimeout=60000&autoReconnect=true
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] keepaliveTime................................0
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] leakDetectionThreshold................................0
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] maxLifetime................................600000
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] maximumPoolSize................................5
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] metricRegistry................................none
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] metricsTrackerFactory................................none
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] minimumIdle................................2
2025-04-18 23:55:08,164 DEBUG com.zaxxer.hikari.HikariConfig [main] password................................<masked>
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] poolName................................"HikariPool-1"
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] readOnly................................false
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] registerMbeans................................false
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] scheduledExecutor................................none
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] schema................................none
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] threadFactory................................internal
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] transactionIsolation................................default
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] username................................"root"
2025-04-18 23:55:08,166 DEBUG com.zaxxer.hikari.HikariConfig [main] validationTimeout................................5000
2025-04-18 23:55:08,167 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-18 23:55:08,314 DEBUG com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57bdceaa
2025-04-18 23:55:08,315 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-18 23:55:08,430 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2025-04-18 23:55:08,431 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2025-04-18 23:55:08,433 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c7a838
2025-04-18 23:55:08,434 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 connection adder] HikariPool-1 - After adding stats (total=2, active=0, idle=2, waiting=0)
2025-04-18 23:55:09,322 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-18 23:55:09,865 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-18 23:55:10,703 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,720 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; private static java.util.Map com.example.tmdt.controller.AdminController.lambda$getDashboardSummary$5(com.example.tmdt.model.Product)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,730 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,730 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getDashboardSummary()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,731 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,731 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.updateOrderStatus(java.lang.Long,com.example.tmdt.model.Order$OrderStatus)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,731 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,732 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.deleteUser(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,732 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,732 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getAllOrders()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,733 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,733 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getUserById(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,733 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,733 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getAllUsers()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,733 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,734 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.deleteProduct(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,734 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,734 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.getAllProducts()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,734 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on: com.example.tmdt.controller.AdminController
2025-04-18 23:55:10,734 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.AdminController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.AdminController.assignCouponToUser(java.lang.Long,java.util.Map)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,861 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.deleteCategory(java.lang.Long)
2025-04-18 23:55:10,861 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CategoryController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.deleteCategory(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,862 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.createCategory(com.example.tmdt.model.Category)
2025-04-18 23:55:10,862 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CategoryController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.createCategory(com.example.tmdt.model.Category)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,862 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.updateCategory(java.lang.Long,com.example.tmdt.model.Category)
2025-04-18 23:55:10,862 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CategoryController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CategoryController.updateCategory(java.lang.Long,com.example.tmdt.model.Category)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,872 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\') or #userId == authentication.principal.id") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getUserChatHistory(java.lang.String)
2025-04-18 23:55:10,873 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getUserChatHistory(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN') or #userId == authentication.principal.id', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,874 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.endChatSession(java.lang.String)
2025-04-18 23:55:10,874 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.endChatSession(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,874 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getAllChatSessions()
2025-04-18 23:55:10,874 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getAllChatSessions()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,875 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getActiveChatSessions()
2025-04-18 23:55:10,875 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ChatController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ChatController.getActiveChatSessions()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,880 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.deleteCoupon(java.lang.Long)
2025-04-18 23:55:10,880 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.deleteCoupon(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,881 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.assignCouponToUser(java.lang.Long,java.lang.Double,java.lang.Double,java.time.LocalDateTime,java.lang.String,java.lang.String)
2025-04-18 23:55:10,881 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.assignCouponToUser(java.lang.Long,java.lang.Double,java.lang.Double,java.time.LocalDateTime,java.lang.String,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,881 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllCoupons()
2025-04-18 23:55:10,881 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllCoupons()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,881 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.createCoupon(com.example.tmdt.payload.request.CouponCreateRequest)
2025-04-18 23:55:10,881 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.createCoupon(com.example.tmdt.payload.request.CouponCreateRequest)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,882 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllValidCoupons()
2025-04-18 23:55:10,882 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getAllValidCoupons()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,882 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User)
2025-04-18 23:55:10,882 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,882 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.updateCoupon(java.lang.Long,com.example.tmdt.payload.request.CouponCreateRequest)
2025-04-18 23:55:10,882 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.updateCoupon(java.lang.Long,com.example.tmdt.payload.request.CouponCreateRequest)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,883 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getActiveCoupons()
2025-04-18 23:55:10,883 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getActiveCoupons()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,883 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest)
2025-04-18 23:55:10,883 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.CouponController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,892 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadFile(org.springframework.web.multipart.MultipartFile,java.lang.String)
2025-04-18 23:55:10,893 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.FileController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadFile(org.springframework.web.multipart.MultipartFile,java.lang.String)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,893 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.deleteFile(java.lang.String)
2025-04-18 23:55:10,893 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.FileController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.deleteFile(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,893 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadMultipleFiles(org.springframework.web.multipart.MultipartFile[],java.lang.String)
2025-04-18 23:55:10,893 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.FileController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.FileController.uploadMultipleFiles(org.springframework.web.multipart.MultipartFile[],java.lang.String)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,990 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createSystemNotification(java.lang.String,java.lang.String)
2025-04-18 23:55:10,991 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createSystemNotification(java.lang.String,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,992 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteAllNotifications(com.example.tmdt.model.User)
2025-04-18 23:55:10,992 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteAllNotifications(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,993 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User)
2025-04-18 23:55:10,993 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,993 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getRecentNotifications(com.example.tmdt.model.User,int)
2025-04-18 23:55:10,993 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getRecentNotifications(com.example.tmdt.model.User,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,994 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createCouponReceivedNotification(java.util.Map)
2025-04-18 23:55:10,994 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createCouponReceivedNotification(java.util.Map)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,994 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderSuccessNotification(java.util.Map,com.example.tmdt.model.User)
2025-04-18 23:55:10,995 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderSuccessNotification(java.util.Map,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,995 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.broadcastCouponNotification(java.util.Map)
2025-04-18 23:55:10,996 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.broadcastCouponNotification(java.util.Map)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,997 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderCancelledNotification(java.util.Map,com.example.tmdt.model.User)
2025-04-18 23:55:10,997 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.createOrderCancelledNotification(java.util.Map,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,998 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadNotifications(com.example.tmdt.model.User)
2025-04-18 23:55:10,998 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadNotifications(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,998 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAllAsRead(com.example.tmdt.model.User)
2025-04-18 23:55:10,998 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAllAsRead(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,998 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User)
2025-04-18 23:55:10,998 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,999 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteNotification(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:55:10,999 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.deleteNotification(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:10,999 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAsRead(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:55:10,999 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.NotificationController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAsRead(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,669 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updateOrderStatus(java.lang.Long,java.lang.String)
2025-04-18 23:55:11,669 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updateOrderStatus(java.lang.Long,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,670 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getAllOrders()
2025-04-18 23:55:11,670 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getAllOrders()]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,670 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updatePaymentStatus(java.lang.Long,java.lang.String)
2025-04-18 23:55:11,670 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.updatePaymentStatus(java.lang.Long,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,670 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders()
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders()]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByDateRange(java.lang.String,java.lang.String)
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByDateRange(java.lang.String,java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long)
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.createOrder(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.createOrder(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,671 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.refundOrder(java.lang.Long)
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.refundOrder(java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByStatus(java.lang.String)
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrdersByStatus(java.lang.String)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.cancelOrder(java.lang.Long)
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.cancelOrder(java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderSummary()
2025-04-18 23:55:11,672 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.OrderController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderSummary()]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,711 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException
2025-04-18 23:55:11,711 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.PaymentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,891 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.deleteProduct(java.lang.Long)
2025-04-18 23:55:11,892 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.deleteProduct(java.lang.Long)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,894 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.updateProduct(java.lang.Long,com.example.tmdt.model.Product)
2025-04-18 23:55:11,895 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.updateProduct(java.lang.Long,com.example.tmdt.model.Product)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,895 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.addReview(java.lang.Long,com.example.tmdt.payload.request.ReviewRequest,boolean,boolean)
2025-04-18 23:55:11,895 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.addReview(java.lang.Long,com.example.tmdt.payload.request.ReviewRequest,boolean,boolean)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,896 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.createProduct(com.example.tmdt.model.Product)
2025-04-18 23:55:11,896 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ProductController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ProductController.createProduct(com.example.tmdt.model.Product)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,938 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)
2025-04-18 23:55:11,938 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,940 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.getUserReviews(com.example.tmdt.model.User)
2025-04-18 23:55:11,941 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.getUserReviews(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,942 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.updateReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)
2025-04-18 23:55:11,942 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.updateReview(java.lang.Long,com.example.tmdt.model.User,java.lang.String,java.lang.String,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,942 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.checkUserReviewed(java.lang.Long,com.example.tmdt.model.User)
2025-04-18 23:55:11,943 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.checkUserReviewed(java.lang.Long,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,943 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createSimpleReview(java.lang.Long,com.example.tmdt.model.User,int,java.lang.String,boolean)
2025-04-18 23:55:11,943 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.createSimpleReview(java.lang.Long,com.example.tmdt.model.User,int,java.lang.String,boolean)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,943 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.deleteReview(java.lang.Long,com.example.tmdt.model.User)
2025-04-18 23:55:11,943 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.deleteReview(java.lang.Long,com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:11,944 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.markReviewHelpful(java.lang.Long,com.example.tmdt.model.User,boolean)
2025-04-18 23:55:11,944 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ReviewController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ReviewController.markReviewHelpful(java.lang.Long,com.example.tmdt.model.User,boolean)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,053 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateOrderStatus(com.example.tmdt.model.User,java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)
2025-04-18 23:55:12,053 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateOrderStatus(com.example.tmdt.model.User,java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,054 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getOrdersReadyForShipment()
2025-04-18 23:55:12,054 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getOrdersReadyForShipment()]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,054 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrdersByStatus(com.example.tmdt.model.User,com.example.tmdt.model.Order$OrderStatus)
2025-04-18 23:55:12,055 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrdersByStatus(com.example.tmdt.model.User,com.example.tmdt.model.Order$OrderStatus)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,055 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateShipmentStatus(java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)
2025-04-18 23:55:12,055 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.updateShipmentStatus(java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)]] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,056 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrders(com.example.tmdt.model.User)
2025-04-18 23:55:12,056 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.getShipperOrders(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,056 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.acceptOrder(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:55:12,056 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipmentController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipmentController.acceptOrder(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,073 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:55:12,073 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.updateOrderStatus(java.lang.Long,com.example.tmdt.payload.request.StatusUpdateRequest)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,074 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:55:12,074 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.getOrderTrackingHistory(java.lang.Long)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,075 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:55:12,075 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.getShipperOrders(int,int,java.lang.String)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,075 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:55:12,075 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.acceptOrder(java.lang.Long)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,076 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'SHIPPER\')") found on: com.example.tmdt.controller.ShipperController
2025-04-18 23:55:12,076 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.ShipperController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.ShipperController.getAvailableOrders(int,int)]] with attributes [[authorize: 'hasRole('SHIPPER')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,343 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getUserPoints(com.example.tmdt.model.User)
2025-04-18 23:55:12,343 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getUserPoints(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,344 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsHistory(com.example.tmdt.model.User)
2025-04-18 23:55:12,344 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsHistory(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,345 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.redeemPoints(com.example.tmdt.model.User,int)
2025-04-18 23:55:12,345 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.redeemPoints(com.example.tmdt.model.User,int)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,345 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsSummary(com.example.tmdt.model.User)
2025-04-18 23:55:12,345 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.UserPointsController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.UserPointsController.getPointsSummary(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,462 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.removeFromWishlist(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:55:12,463 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.removeFromWishlist(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,463 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User)
2025-04-18 23:55:12,464 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,464 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:55:12,464 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,464 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long)
2025-04-18 23:55:12,464 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,464 DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource [main] @org.springframework.security.access.prepost.PreAuthorize("hasRole(\'USER\') or hasRole(\'ADMIN\')") found on specific method: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.clearWishlist(com.example.tmdt.model.User)
2025-04-18 23:55:12,465 DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource [main] Caching method [CacheKey[com.example.tmdt.controller.WishlistController; public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.clearWishlist(com.example.tmdt.model.User)]] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:12,739 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/auth/**']
2025-04-18 23:55:12,741 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/auth/**']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/test/**']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/products/**']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/products/top']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/products/recommended']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [permitAll] for Ant [pattern='/api/categories/**']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [hasRole('ROLE_SHIPPER')] for Ant [pattern='/api/shipper/**']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-04-18 23:55:12,742 DEBUG org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource [main] Adding web access control expression [authenticated] for any request
2025-04-18 23:55:12,752 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4ba04fb4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11a8735d, org.springframework.security.web.context.SecurityContextPersistenceFilter@3287cf03, org.springframework.security.web.header.HeaderWriterFilter@7b91e3d4, org.springframework.web.filter.CorsFilter@59294f29, org.springframework.security.web.authentication.logout.LogoutFilter@67d6b0a6, com.example.tmdt.security.jwt.AuthTokenFilter@42ceb67f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1009a9b4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3796ca50, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@795d43d9, org.springframework.security.web.session.SessionManagementFilter@4d08fee2, org.springframework.security.web.access.ExceptionTranslationFilter@2116e9cf, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@37edb7fa]
2025-04-18 23:55:12,970 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-18 23:55:13,287 INFO com.example.tmdt.config.WebMvcConfig [main] Added CurrentUserArgumentResolver to Spring MVC
2025-04-18 23:55:13,938 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2025-04-18 23:55:13,970 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2025-04-18 23:55:13,978 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) 8089 (http) with context path ''
2025-04-18 23:55:13,980 INFO org.springframework.core.log.CompositeLog [main] Starting...
2025-04-18 23:55:13,981 INFO org.springframework.core.log.CompositeLog [main] BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26e74d50]]
2025-04-18 23:55:13,981 INFO org.springframework.core.log.CompositeLog [main] Started.
2025-04-18 23:55:13,994 INFO org.springframework.boot.StartupInfoLogger [main] Started TmdtApplication in 8.09 seconds (JVM running for 8.798)
2025-04-18 23:55:14,040 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [main] 
    select
        count(*) as col_0_0_ 
    from
        roles role0_
2025-04-18 23:55:17,721 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-18 23:55:17,721 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2025-04-18 23:55:17,723 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2025-04-18 23:55:17,730 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /products/29/user-reviews
2025-04-18 23:55:17,730 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products/29
2025-04-18 23:55:17,730 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /products/29
2025-04-18 23:55:17,730 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/29/user-reviews
2025-04-18 23:55:17,733 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:17,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:55:17,738 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/29/user-reviews
2025-04-18 23:55:17,738 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/29
2025-04-18 23:55:17,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:17,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:17,753 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/29/user-reviews?userId=3&currentUserId=3
2025-04-18 23:55:17,753 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/29?currentUserId=3
2025-04-18 23:55:17,759 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:17,759 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:17,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/29, Method: GET
2025-04-18 23:55:17,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/29/user-reviews, Method: GET
2025-04-18 23:55:17,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:17,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:17,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:55:17,789 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:55:17,790 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:17,790 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:17,894 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:55:17,894 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:55:17,895 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:55:17,895 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:55:17,895 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:55:17,895 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:55:17,901 DEBUG com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator [HikariPool-1 connection adder] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@abec7ce
2025-04-18 23:55:17,932 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:17,932 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:17,935 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:17,935 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:17,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:17,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:17,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:17,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,024 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,025 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,025 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:55:18,025 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:55:18,027 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,027 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,028 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@11397506, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,028 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6ecd65c5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,045 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /products/29?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:18,045 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /products/29/user-reviews?userId=3&currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:18,047 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/29/user-reviews?userId=3&currentUserId=3
2025-04-18 23:55:18,047 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/29?currentUserId=3
2025-04-18 23:55:18,090 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getUserReviewsForProduct with args: [29, 3]
2025-04-18 23:55:18,090 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getProduct with args: [29]
2025-04-18 23:55:18,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:18,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:18,103 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,103 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:18,108 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,121 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,122 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,128 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,128 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        review0_.id as id1_12_,
        review0_.anonymous as anonymou2_12_,
        review0_.comment as comment3_12_,
        review0_.created_at as created_4_12_,
        review0_.product_id as product_8_12_,
        review0_.rating as rating5_12_,
        review0_.title as title6_12_,
        review0_.updated_at as updated_7_12_,
        review0_.user_id as user_id9_12_ 
    from
        reviews review0_ 
    where
        review0_.user_id=? 
        and review0_.product_id=? 
    order by
        review0_.created_at desc
2025-04-18 23:55:18,129 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,130 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,131 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [2] as [BIGINT] - [29]
2025-04-18 23:55:18,133 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getUserReviewsForProduct with result: [<200 OK OK,[],[]>]
2025-04-18 23:55:18,133 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getUserReviewsForProduct executed in 45 ms
2025-04-18 23:55:18,154 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getProduct with result: [<200 OK OK,{images=[], reviews=[], reviewCount=85, price=2.599E7, averageRating=4.9, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, id=29, stock=28, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)},[]>]
2025-04-18 23:55:18,154 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getProduct executed in 66 ms
2025-04-18 23:55:18,171 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/29/user-reviews
2025-04-18 23:55:18,171 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,172 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/29/user-reviews?userId=3&currentUserId=3
2025-04-18 23:55:18,172 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:18,172 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/29/user-reviews, Method: GET
2025-04-18 23:55:18,172 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,172 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:55:18,172 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,173 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:55:18,174 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:55:18,174 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:55:18,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:18,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:18,178 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:18,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,179 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,179 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=440ms
2025-04-18 23:55:18,181 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,182 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:55:18,182 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,182 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1718d371, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,183 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [GET /products/29/user-reviews?userId=3&currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:18,183 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/29/user-reviews?userId=3&currentUserId=3
2025-04-18 23:55:18,184 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getUserReviewsForProduct with args: [29, 3]
2025-04-18 23:55:18,186 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:18,186 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,192 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:18,193 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,198 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        review0_.id as id1_12_,
        review0_.anonymous as anonymou2_12_,
        review0_.comment as comment3_12_,
        review0_.created_at as created_4_12_,
        review0_.product_id as product_8_12_,
        review0_.rating as rating5_12_,
        review0_.title as title6_12_,
        review0_.updated_at as updated_7_12_,
        review0_.user_id as user_id9_12_ 
    from
        reviews review0_ 
    where
        review0_.user_id=? 
        and review0_.product_id=? 
    order by
        review0_.created_at desc
2025-04-18 23:55:18,198 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,199 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [29]
2025-04-18 23:55:18,200 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getUserReviewsForProduct with result: [<200 OK OK,[],[]>]
2025-04-18 23:55:18,201 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getUserReviewsForProduct executed in 17 ms
2025-04-18 23:55:18,205 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,205 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=34ms
2025-04-18 23:55:18,251 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:55:18,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:55:18,258 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,259 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=520ms
2025-04-18 23:55:18,260 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/29
2025-04-18 23:55:18,260 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,261 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/29?currentUserId=3
2025-04-18 23:55:18,261 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:18,261 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/29, Method: GET
2025-04-18 23:55:18,261 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,261 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-18 23:55:18,261 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,263 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-18 23:55:18,265 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-18 23:55:18,266 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-18 23:55:18,267 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /wishlist/check/29
2025-04-18 23:55:18,268 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,268 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200 (OK - CORS Preflight)
2025-04-18 23:55:18,269 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:18,270 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:18,271 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /wishlist/check/29
2025-04-18 23:55:18,271 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,272 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /wishlist/check/29?currentUserId=3
2025-04-18 23:55:18,272 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:18,272 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:18,273 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,273 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /wishlist/check/29, Method: GET
2025-04-18 23:55:18,274 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,274 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:55:18,274 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,276 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:55:18,277 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,277 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-18 23:55:18,277 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,277 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4be7e1e1, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,278 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-8] Authorized filter invocation [GET /products/29?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:18,278 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:55:18,278 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:55:18,278 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/29?currentUserId=3
2025-04-18 23:55:18,280 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:18,281 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:18,281 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getProduct with args: [29]
2025-04-18 23:55:18,283 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:18,283 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:18,284 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,289 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:55:18,289 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,289 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4ffa9b2f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,290 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /wishlist/check/29?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:18,290 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /wishlist/check/29?currentUserId=3
2025-04-18 23:55:18,290 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,294 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,296 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getProduct with result: [<200 OK OK,{images=[], reviews=[], reviewCount=85, price=2.599E7, averageRating=4.9, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, id=29, stock=28, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29)},[]>]
2025-04-18 23:55:18,296 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getProduct executed in 15 ms
2025-04-18 23:55:18,298 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-18 23:55:18,299 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:55:18,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:18,299 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,301 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,301 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=41ms
2025-04-18 23:55:18,303 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:55:18,321 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:55:18,322 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:18,339 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), 29]
2025-04-18 23:55:18,344 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-10] Check in wishlist request: user=3, productId=29
2025-04-18 23:55:18,350 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-10] Checking if product 29 is in wishlist for user 3
2025-04-18 23:55:18,352 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:18,353 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,363 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-18 23:55:18,364 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,365 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [2] as [BIGINT] - [29]
2025-04-18 23:55:18,366 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-18 23:55:18,366 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method checkInWishlist executed in 43 ms
2025-04-18 23:55:18,369 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,371 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=100ms
2025-04-18 23:55:18,372 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /wishlist/check/29
2025-04-18 23:55:18,372 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,373 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /wishlist/check/29?currentUserId=3
2025-04-18 23:55:18,382 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:18,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /wishlist/check/29, Method: GET
2025-04-18 23:55:18,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:55:18,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,385 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:55:18,388 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:55:18,388 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:55:18,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:18,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:18,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:18,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,398 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,398 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:55:18,398 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,399 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@939f190, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,399 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /wishlist/check/29?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:18,399 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /wishlist/check/29?currentUserId=3
2025-04-18 23:55:18,401 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:18,402 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,405 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:55:18,406 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-18 23:55:18,407 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:18,407 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), 29]
2025-04-18 23:55:18,407 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-2] Check in wishlist request: user=3, productId=29
2025-04-18 23:55:18,407 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-2] Checking if product 29 is in wishlist for user 3
2025-04-18 23:55:18,408 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:18,409 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,415 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-18 23:55:18,415 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,416 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [2] as [BIGINT] - [29]
2025-04-18 23:55:18,417 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-18 23:55:18,417 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method checkInWishlist executed in 10 ms
2025-04-18 23:55:18,419 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,420 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=48ms
2025-04-18 23:55:18,458 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-18 23:55:18,458 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,459 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:55:18,459 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:18,459 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-18 23:55:18,459 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,459 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:55:18,460 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,461 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:55:18,462 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:55:18,462 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:55:18,463 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:18,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:18,466 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:18,466 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,470 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,471 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:55:18,471 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,471 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2a92e0ce, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,471 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:55:18,472 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:55:18,473 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts with args: [4]
2025-04-18 23:55:18,478 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:55:18,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,484 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:55:18,485 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,486 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:55:18,488 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,489 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:55:18,490 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,491 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:55:18,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,492 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:55:18,518 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=48, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-18T23:54:14), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:55:18,518 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 45 ms
2025-04-18 23:55:18,521 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,521 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,523 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,525 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,526 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:18,527 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,527 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:18,528 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,528 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:18,529 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,529 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:18,530 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,530 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:18,531 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,532 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:18,533 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,533 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=75ms
2025-04-18 23:55:18,535 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-18 23:55:18,535 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:18,535 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4&currentUserId=3
2025-04-18 23:55:18,535 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:18,535 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-18 23:55:18,535 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,535 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:55:18,535 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:18,536 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:55:18,537 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:55:18,537 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:55:18,539 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:18,539 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:18,540 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:18,540 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:18,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:55:18,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:18,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4e586af8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:18,543 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /products/top?limit=4&currentUserId=3] with attributes [permitAll]
2025-04-18 23:55:18,543 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4&currentUserId=3
2025-04-18 23:55:18,543 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts with args: [4]
2025-04-18 23:55:18,544 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:55:18,548 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,548 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:55:18,550 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,550 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:55:18,553 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,553 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:55:18,556 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,556 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:55:18,559 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:18,560 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:55:18,562 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=28, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T21:23), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=48, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-18T23:54:14), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14)],[]>]
2025-04-18 23:55:18,562 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 19 ms
2025-04-18 23:55:18,563 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,563 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,564 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,565 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:18,566 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,566 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:18,567 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,568 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:18,569 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,569 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:18,570 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,570 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:18,571 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:18,572 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:18,573 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:18,574 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:18,576 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:18,576 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=41ms
2025-04-18 23:55:21,255 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /coupons/my-coupons
2025-04-18 23:55:21,255 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:21,256 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:55:21,256 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:21,256 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:55:21,256 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:21,257 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-18 23:55:21,257 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:21,260 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-18 23:55:21,261 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-18 23:55:21,261 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-18 23:55:21,263 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:21,263 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:21,266 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:21,266 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:21,269 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:21,269 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-18 23:55:21,269 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:21,269 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@47e06417, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:21,270 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:21,270 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:55:21,273 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:21,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:21,278 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:55:21,279 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:55:21,279 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-5] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:21,279 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:55:21,286 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-5] Getting coupons for user: 3
2025-04-18 23:55:21,295 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:55:21,296 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:21,300 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:55:21,303 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:55:21.291542500]
2025-04-18 23:55:21,349 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:55:21,349 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getMyCoupons executed in 70 ms
2025-04-18 23:55:21,367 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:21,367 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=112ms
2025-04-18 23:55:21,368 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /coupons/my-coupons
2025-04-18 23:55:21,368 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:21,368 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:55:21,368 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:21,369 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-18 23:55:21,369 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:21,370 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-18 23:55:21,370 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:21,370 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-18 23:55:21,371 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-18 23:55:21,371 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-18 23:55:21,373 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:21,374 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:21,375 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:21,375 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:21,378 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:21,378 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-18 23:55:21,379 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:21,379 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@11febcbc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:21,379 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized filter invocation [GET /coupons/my-coupons?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:21,379 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /coupons/my-coupons?currentUserId=3
2025-04-18 23:55:21,380 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:21,381 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:21,387 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:55:21,387 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-18 23:55:21,387 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-4] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:21,389 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:55:21,389 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-4] Getting coupons for user: 3
2025-04-18 23:55:21,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        coupon0_.id as id1_3_,
        coupon0_.code as code2_3_,
        coupon0_.created_at as created_3_3_,
        coupon0_.description as descript4_3_,
        coupon0_.discount_type as discount5_3_,
        coupon0_.discount_value as discount6_3_,
        coupon0_.end_date as end_date7_3_,
        coupon0_.expiry_date as expiry_d8_3_,
        coupon0_.is_active as is_activ9_3_,
        coupon0_.min_purchase_amount as min_pur10_3_,
        coupon0_.start_date as start_d11_3_,
        coupon0_.type as type12_3_,
        coupon0_.updated_at as updated13_3_,
        coupon0_.used_count as used_co14_3_,
        coupon0_.user_id as user_id15_3_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-18 23:55:21,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:21,392 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [2] as [BOOLEAN] - [true]
2025-04-18 23:55:21,392 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [3] as [TIMESTAMP] - [2025-04-18T23:55:21.389187100]
2025-04-18 23:55:21,393 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=1, code=a, description=abc, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-16T13:19:50, endDate=2025-05-16T13:19:50, isActive=true, createdAt=2025-04-16T20:20:15, updatedAt=2025-04-16T23:20:23, expiryDate=2025-05-16T13:19:50), Coupon(id=2, code=b, description=ab, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=GENERAL, discountType=PERCENTAGE, discountValue=23.00, minPurchaseAmount=0.00, usedCount=0, startDate=2025-04-16T13:20:22, endDate=2025-05-16T13:20:22, isActive=true, createdAt=2025-04-16T20:20:29, updatedAt=2025-04-16T23:20:24, expiryDate=2025-05-16T13:20:22), Coupon(id=3, code=c, description=sad, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), type=ONE_TIME, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=111.00, usedCount=0, startDate=2025-04-16T16:14:25, endDate=2025-05-16T16:14:25, isActive=true, createdAt=2025-04-16T23:14:35, updatedAt=2025-04-16T23:14:39, expiryDate=2025-05-16T16:14:25)],[]>]
2025-04-18 23:55:21,394 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getMyCoupons executed in 6 ms
2025-04-18 23:55:21,395 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:21,395 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=27ms
2025-04-18 23:55:27,558 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: POST /orders/pay
2025-04-18 23:55:27,558 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, content-length=189, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:27,559 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing POST /orders/pay?currentUserId=3
2025-04-18 23:55:27,559 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:27,560 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /orders/pay, Method: POST
2025-04-18 23:55:27,560 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:27,560 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-18 23:55:27,560 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:27,561 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-18 23:55:27,562 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-18 23:55:27,562 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-18 23:55:27,565 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:27,565 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:27,567 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:27,567 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:27,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:27,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-18 23:55:27,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:27,570 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@122b8a6b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:27,570 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized filter invocation [POST /orders/pay?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:27,571 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured POST /orders/pay?currentUserId=3
2025-04-18 23:55:27,628 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:55:27,629 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController]
2025-04-18 23:55:27,629 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-7] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.PaymentController.createPay(com.example.tmdt.payload.request.OrderRequest) throws java.io.UnsupportedEncodingException; target is of class [com.example.tmdt.controller.PaymentController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:27,630 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING createPay with args: [OrderRequest(items=[OrderItemRequest(productId=29, quantity=1)], shippingAddress=ádvb, ădawe, 12323, paymentMethod=account_balance, phoneNumber=3123123123, recipientName=sYn good72, couponCode=null, total=2.599E7)]
2025-04-18 23:55:27,634 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:27,635 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:27,636 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:27,637 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:27,647 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_10_0_,
        product0_.average_rating as average_2_10_0_,
        product0_.category_id as categor14_10_0_,
        product0_.created_at as created_3_10_0_,
        product0_.description as descript4_10_0_,
        product0_.discount_percentage as discount5_10_0_,
        product0_.image_url as image_ur6_10_0_,
        product0_.is_featured as is_featu7_10_0_,
        product0_.name as name8_10_0_,
        product0_.price as price9_10_0_,
        product0_.review_count as review_10_10_0_,
        product0_.sold_count as sold_co11_10_0_,
        product0_.stock as stock12_10_0_,
        product0_.updated_at as updated13_10_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-18 23:55:27,648 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:27,714 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    update
        products 
    set
        average_rating=?,
        category_id=?,
        created_at=?,
        description=?,
        discount_percentage=?,
        image_url=?,
        is_featured=?,
        name=?,
        price=?,
        review_count=?,
        sold_count=?,
        stock=?,
        updated_at=? 
    where
        id=?
2025-04-18 23:55:27,715 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [DOUBLE] - [4.9]
2025-04-18 23:55:27,716 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [7]
2025-04-18 23:55:27,716 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [3] as [TIMESTAMP] - [2025-04-17T02:31:26]
2025-04-18 23:55:27,716 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [4] as [VARCHAR] - [Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2]
2025-04-18 23:55:27,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [5] as [DOUBLE] - [0.0]
2025-04-18 23:55:27,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [6] as [VARCHAR] - [https://example.com/images/products/s23ultra.jpg]
2025-04-18 23:55:27,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [7] as [BOOLEAN] - [true]
2025-04-18 23:55:27,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [8] as [VARCHAR] - [Samsung Galaxy S23 Ultra]
2025-04-18 23:55:27,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [9] as [DOUBLE] - [2.599E7]
2025-04-18 23:55:27,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [10] as [INTEGER] - [85]
2025-04-18 23:55:27,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [11] as [INTEGER] - [120]
2025-04-18 23:55:27,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [12] as [INTEGER] - [27]
2025-04-18 23:55:27,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [13] as [TIMESTAMP] - [2025-04-18T23:55:27.667405700]
2025-04-18 23:55:27,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [14] as [BIGINT] - [29]
2025-04-18 23:55:27,732 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING createPay with result: [<200 OK OK,https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=2599000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250418235527&vnp_CurrCode=VND&vnp_ExpireDate=20250419001027&vnp_IpAddr=42.118.208.78&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+don+hang%3A88931843&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A3000%2Forder-success&vnp_TmnCode=I8QN1DFX&vnp_TxnRef=88931843&vnp_Version=2.1.0&vnp_SecureHash=9b192fe4524fa0302f0013b0ed11ff4db3b4ddd10787d5e7c8d378826b8233ad5ce6099257ef559625f81105895515d22b7c22d7051f7de5f218b5ef06022db1,[]>]
2025-04-18 23:55:27,734 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method createPay executed in 105 ms
2025-04-18 23:55:27,734 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:27,734 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=176ms
2025-04-18 23:55:27,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /PaySuccess
2025-04-18 23:55:27,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:27,739 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /PaySuccess?currentUserId=3
2025-04-18 23:55:27,739 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:27,740 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /PaySuccess, Method: GET
2025-04-18 23:55:27,740 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:27,740 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-18 23:55:27,740 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:27,741 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-18 23:55:27,741 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-18 23:55:27,741 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-18 23:55:27,743 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:27,744 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:27,747 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:27,747 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:27,750 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:27,750 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-18 23:55:27,750 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:27,751 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@22111b3b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:27,751 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-6] Authorized filter invocation [GET /PaySuccess?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:27,751 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /PaySuccess?currentUserId=3
2025-04-18 23:55:27,763 ERROR com.example.tmdt.exception.GlobalExceptionHandler [http-nio-8080-exec-6] Unhandled exception occurred
org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'vnp_ResponseCode' for method parameter type String is not present
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:218)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:193)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:114)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.example.tmdt.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.example.tmdt.filter.RequestLoggingFilter.doFilterInternal(RequestLoggingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-04-18 23:55:27,773 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:27,774 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=500, Time=35ms
2025-04-18 23:55:38,447 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Before cleanup stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:55:38,447 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - After cleanup  stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:55:38,447 DEBUG com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Fill pool skipped, pool is at sufficient level.
2025-04-18 23:55:40,489 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-18 23:55:40,489 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:40,489 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications?currentUserId=3
2025-04-18 23:55:40,489 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:40,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-18 23:55:40,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:55:40,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,490 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:55:40,491 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:55:40,491 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:55:40,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:40,493 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:40,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:40,495 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,496 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,496 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:55:40,497 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:40,497 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@15863cf0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,497 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:40,497 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications?currentUserId=3
2025-04-18 23:55:40,498 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:40,499 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,501 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,502 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,502 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:40,502 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:55:40,517 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:55:40,517 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,538 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:55:40,539 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 37 ms
2025-04-18 23:55:40,550 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:40,550 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=61ms
2025-04-18 23:55:40,550 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-18 23:55:40,551 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:40,551 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications?currentUserId=3
2025-04-18 23:55:40,551 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:40,551 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-18 23:55:40,551 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,551 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-18 23:55:40,551 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,552 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-18 23:55:40,553 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-18 23:55:40,553 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-18 23:55:40,553 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:40,554 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:40,555 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:40,556 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,558 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,558 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-18 23:55:40,558 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:40,558 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@74fcc977, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,559 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:40,559 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications?currentUserId=3
2025-04-18 23:55:40,562 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications/unread-count
2025-04-18 23:55:40,562 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:40,563 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-18 23:55:40,563 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications/unread-count?currentUserId=3
2025-04-18 23:55:40,563 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:40,563 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:40,563 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:55:40,563 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-18 23:55:40,564 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-18 23:55:40,564 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:40,566 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,566 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:40,567 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:40,567 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:40,567 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:40,567 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,567 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,568 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-9] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:40,568 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:40,568 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:40,568 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:55:40,568 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,568 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,568 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:55:40,568 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-18 23:55:40,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:40,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-18 23:55:40,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5f83decb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,570 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:40,570 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@75b8c2c8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,570 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized filter invocation [GET /notifications/unread-count?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:40,570 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications/unread-count?currentUserId=3
2025-04-18 23:55:40,570 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-2] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:55:40,570 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:55:40,570 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts with args: [6]
2025-04-18 23:55:40,571 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:55:40,571 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:40,571 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:55:40,571 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 3 ms
2025-04-18 23:55:40,572 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,573 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,574 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:40,573 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,574 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=23ms
2025-04-18 23:55:40,574 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,574 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:55:40,576 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-10] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:40,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,577 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:55:40,577 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:55:40,578 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-18 23:55:40,579 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:40,579 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,579 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications?currentUserId=3
2025-04-18 23:55:40,579 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:40,579 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:55:40,579 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-18 23:55:40,580 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,580 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-18 23:55:40,580 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,580 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-18 23:55:40,581 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-18 23:55:40,581 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-18 23:55:40,581 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,581 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:55:40,582 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:40,583 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:40,583 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,583 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:55:40,584 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:40,584 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,585 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-18 23:55:40,585 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=27, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:55:27), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=48, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-18T23:54:14), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:55:40,585 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,586 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 16 ms
2025-04-18 23:55:40,586 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,586 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-18 23:55:40,586 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:40,586 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@104612eb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,586 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized filter invocation [GET /notifications?currentUserId=3] with attributes [authenticated]
2025-04-18 23:55:40,586 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications?currentUserId=3
2025-04-18 23:55:40,586 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getUnreadCount with result: [<200 OK OK,16,[]>]
2025-04-18 23:55:40,586 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,587 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getUnreadCount executed in 10 ms
2025-04-18 23:55:40,587 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:40,588 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:40,588 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=26ms
2025-04-18 23:55:40,588 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,588 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_18_0_,
        user0_.address as address2_18_0_,
        user0_.email as email3_18_0_,
        user0_.full_name as full_nam4_18_0_,
        user0_.password as password5_18_0_,
        user0_.phone_number as phone_nu6_18_0_,
        user0_.username as username7_18_0_,
        roles1_.user_id as user_id1_17_1_,
        role2_.id as role_id2_17_1_,
        role2_.id as id1_13_2_,
        role2_.name as name2_13_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-18 23:55:40,590 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,590 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:40,592 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,593 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,593 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:40,593 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-18 23:55:40,593 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-1] Authorized ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController] with attributes [[authorize: 'hasRole('USER') or hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]
2025-04-18 23:55:40,593 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a)]
2025-04-18 23:55:40,594 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,594 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:40,594 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_5_,
        notificati0_.created_at as created_2_5_,
        notificati0_.is_read as is_read3_5_,
        notificati0_.message as message4_5_,
        notificati0_.reference_id as referenc5_5_,
        notificati0_.title as title6_5_,
        notificati0_.type as type7_5_,
        notificati0_.user_id as user_id8_5_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-18 23:55:40,595 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,597 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,597 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:40,599 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,599 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:40,599 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #9 của bạn đã được xác nhận. Tổng tiền: 104960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=9, isRead=false, createdAt=2025-04-16T22:38:49), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:12), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:14), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #9 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:16), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #10 của bạn đã được xác nhận. Tổng tiền: 79960000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=10, isRead=false, createdAt=2025-04-16T22:39:39), Notification(id=28, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:50), Notification(id=29, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:39:53), Notification(id=30, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #10 đã được giao thành công. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:07), Notification(id=31, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #11 của bạn đã được xác nhận. Tổng tiền: 19990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=11, isRead=false, createdAt=2025-04-16T22:40:22), Notification(id=32, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn đang được vận chuyển., type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:40:28), Notification(id=33, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #11 của bạn hiện Đang giao hàng, type=ORDER_STATUS_CHANGE, referenceId=null, isRead=false, createdAt=2025-04-16T22:44:43), Notification(id=34, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #12 của bạn đã được xác nhận. Tổng tiền: 66853600.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:24:52), Notification(id=35, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Cập nhật trạng thái đơn hàng, message=Đơn hàng #12 của bạn đã được cập nhật trạng thái thành: CANCELLED, type=ORDER_STATUS_CHANGE, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=36, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Hoàn tiền thành công, message=Đơn hàng #12 đã được hoàn tiền thành công. Số tiền 66853600.00 đã được hoàn vào tài khoản của bạn., type=SYSTEM_ANNOUNCEMENT, referenceId=12, isRead=false, createdAt=2025-04-16T23:34:27), Notification(id=37, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #13 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=13, isRead=false, createdAt=2025-04-18T21:22:50), Notification(id=38, user=User(id=3, username=a1234, email=leloilonglon9929@gmail.com, password=$2a$10$IypX/2Nbx/IBYACH0y0g9eu8Kk2rFpLKr/va4tzslF72wpOKDEkTG, fullName=sYn good72, phoneNumber=123, address=a), title=Đặt hàng thành công, message=Đơn hàng #14 của bạn đã được xác nhận. Tổng tiền: 25990000.00 VND. Cảm ơn bạn đã mua sắm!, type=ORDER_STATUS_CHANGE, referenceId=14, isRead=false, createdAt=2025-04-18T21:23)],[]>]
2025-04-18 23:55:40,600 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 7 ms
2025-04-18 23:55:40,601 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,601 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:40,602 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:40,603 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=24ms
2025-04-18 23:55:40,604 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,604 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:40,606 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,606 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:55:40,608 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,609 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:55:40,611 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,612 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:55:40,618 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,619 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:55:40,621 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:40,622 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=59ms
2025-04-18 23:55:40,622 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-18 23:55:40,622 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", authorization=Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8
2025-04-18 23:55:40,623 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=6&currentUserId=3
2025-04-18 23:55:40,623 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-18 23:55:40,624 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-18 23:55:40,624 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,624 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-18 23:55:40,624 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDk4NjAwOCwiZXhwIjoxNzQ1MDcyNDA4fQ.gwF5iUBBvModHOrb9hYeRIaAfcaAVyVqzJTOSmOAM6XQZYZm-3_KsGstX5BIaN_oBEQ_cv9fj_Q-5qvbD6QbGg
2025-04-18 23:55:40,626 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-18 23:55:40,627 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-18 23:55:40,627 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-18 23:55:40,628 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_18_,
        user0_.address as address2_18_,
        user0_.email as email3_18_,
        user0_.full_name as full_nam4_18_,
        user0_.password as password5_18_,
        user0_.phone_number as phone_nu6_18_,
        user0_.username as username7_18_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-18 23:55:40,628 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-18 23:55:40,629 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_17_0_,
        roles0_.role_id as role_id2_17_0_,
        role1_.id as id1_13_1_,
        role1_.name as name2_13_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-18 23:55:40,630 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-18 23:55:40,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-18 23:55:40,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-18 23:55:40,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@e5e70fa, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-18 23:55:40,633 DEBUG org.springframework.security.access.intercept.AbstractSecurityInterceptor [http-nio-8080-exec-3] Authorized filter invocation [GET /products/top?limit=6&currentUserId=3] with attributes [permitAll]
2025-04-18 23:55:40,634 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=6&currentUserId=3
2025-04-18 23:55:40,634 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts with args: [6]
2025-04-18 23:55:40,635 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_10_,
        product0_.average_rating as average_2_10_,
        product0_.category_id as categor14_10_,
        product0_.created_at as created_3_10_,
        product0_.description as descript4_10_,
        product0_.discount_percentage as discount5_10_,
        product0_.image_url as image_ur6_10_,
        product0_.is_featured as is_featu7_10_,
        product0_.name as name8_10_,
        product0_.price as price9_10_,
        product0_.review_count as review_10_10_,
        product0_.sold_count as sold_co11_10_,
        product0_.stock as stock12_10_,
        product0_.updated_at as updated13_10_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-18 23:55:40,638 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,639 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [7]
2025-04-18 23:55:40,645 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,646 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [10]
2025-04-18 23:55:40,648 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,649 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [6]
2025-04-18 23:55:40,651 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,653 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [14]
2025-04-18 23:55:40,656 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-18 23:55:40,656 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [16]
2025-04-18 23:55:40,659 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=29, name=Samsung Galaxy S23 Ultra, description=Samsung Galaxy S23 Ultra 256GB, màn hình 6.8 inch Dynamic AMOLED 2X, chip Snapdragon 8 Gen 2, price=2.599E7, stock=27, imageUrl=https://example.com/images/products/s23ultra.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=85, soldCount=120, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:55:27), Product(id=36, name=MacBook Pro 14 M2 Pro, description=MacBook Pro 14 inch M2 Pro 16GB RAM, 512GB SSD, price=4.599E7, stock=15, imageUrl=https://example.com/images/products/macbookpro14.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.9, reviewCount=25, soldCount=30, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=24, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=48, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:28:22, updatedAt=2025-04-18T23:54:14), Product(id=25, name=iPhone 14 Pro Max, description=iPhone 14 Pro Max 128GB, màn hình 6.7 inch Super Retina XDR, chip A16 Bionic, price=2.899E7, stock=40, imageUrl=https://example.com/images/products/iphone14promax.jpg, category=Category(id=6, name=Điện thoại iPhone, description=Các dòng điện thoại iPhone, imageUrl=https://example.com/images/categories/iphone.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=120, soldCount=200, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-18T23:30:14), Product(id=32, name=Samsung Galaxy Z Fold4, description=Samsung Galaxy Z Fold4 256GB, màn hình 7.6 inch Dynamic AMOLED 2X, chip Snapdragon 8+ Gen 1, price=3.299E7, stock=20, imageUrl=https://example.com/images/products/zfold4.jpg, category=Category(id=7, name=Điện thoại Samsung, description=Các dòng điện thoại Samsung, imageUrl=https://example.com/images/categories/samsung.jpg, isActive=true, displayOrder=2, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=50, isFeatured=true, discountPercentage=0.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26), Product(id=37, name=MacBook Air M2, description=MacBook Air M2 8GB RAM, 256GB SSD, price=2.699E7, stock=20, imageUrl=https://example.com/images/products/macbookairm2.jpg, category=Category(id=10, name=Laptop Apple, description=Máy tính xách tay của Apple, imageUrl=https://example.com/images/categories/mac.jpg, isActive=true, displayOrder=1, createdAt=2025-04-17T02:21:29, updatedAt=2025-04-17T02:21:29), averageRating=4.8, reviewCount=40, soldCount=70, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-17T02:31:26, updatedAt=2025-04-17T02:31:26)],[]>]
2025-04-18 23:55:40,660 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 26 ms
2025-04-18 23:55:40,660 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,661 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:40,662 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,663 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [29]
2025-04-18 23:55:40,670 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,670 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:40,680 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,681 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [36]
2025-04-18 23:55:40,688 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,688 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:40,690 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,690 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [24]
2025-04-18 23:55:40,691 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,692 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:40,693 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,693 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [25]
2025-04-18 23:55:40,695 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,695 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:55:40,696 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,696 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [32]
2025-04-18 23:55:40,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_8_0_,
        images0_.id as id1_8_0_,
        images0_.id as id1_8_1_,
        images0_.created_at as created_2_8_1_,
        images0_.display_order as display_3_8_1_,
        images0_.image_url as image_ur4_8_1_,
        images0_.product_id as product_5_8_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-18 23:55:40,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:55:40,698 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_8_12_0_,
        reviews0_.id as id1_12_0_,
        reviews0_.id as id1_12_1_,
        reviews0_.anonymous as anonymou2_12_1_,
        reviews0_.comment as comment3_12_1_,
        reviews0_.created_at as created_4_12_1_,
        reviews0_.product_id as product_8_12_1_,
        reviews0_.rating as rating5_12_1_,
        reviews0_.title as title6_12_1_,
        reviews0_.updated_at as updated_7_12_1_,
        reviews0_.user_id as user_id9_12_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-18 23:55:40,699 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [37]
2025-04-18 23:55:40,701 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-18 23:55:40,702 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=79ms
2025-04-18 23:56:05,082 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] Stopping...
2025-04-18 23:56:05,083 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26e74d50]]
2025-04-18 23:56:05,083 INFO org.springframework.core.log.CompositeLog [SpringApplicationShutdownHook] Stopped.
2025-04-18 23:56:05,109 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-18 23:56:05,110 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2025-04-18 23:56:05,111 DEBUG com.zaxxer.hikari.pool.HikariPool [SpringApplicationShutdownHook] HikariPool-1 - Before shutdown stats (total=3, active=0, idle=3, waiting=0)
2025-04-18 23:56:05,112 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@57bdceaa: (connection evicted)
2025-04-18 23:56:05,116 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c7a838: (connection evicted)
2025-04-18 23:56:05,116 DEBUG com.zaxxer.hikari.pool.PoolBase [HikariPool-1 connection closer] HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@abec7ce: (connection evicted)
2025-04-18 23:56:05,116 DEBUG com.zaxxer.hikari.pool.HikariPool [SpringApplicationShutdownHook] HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2025-04-18 23:56:05,117 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
