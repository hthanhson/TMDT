2025-04-12 23:53:47,931 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 12252 (E:\tmdt\TMDT\backend\target\classes started by leloi in E:\tmdt\TMDT\backend)
2025-04-12 23:53:47,934 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-12 23:53:48,613 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-12 23:53:48,724 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 104 ms. Found 15 JPA repository interfaces.
2025-04-12 23:53:49,459 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-12 23:53:49,466 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-12 23:53:49,466 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-12 23:53:49,466 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-12 23:53:49,544 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-12 23:53:49,544 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1541 ms
2025-04-12 23:53:49,997 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-12 23:53:50,118 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-12 23:53:50,773 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-12 23:53:51,208 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-12 23:53:52,800 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@77b0ff24, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3958e148, org.springframework.security.web.context.SecurityContextPersistenceFilter@7d5ddfac, org.springframework.security.web.header.HeaderWriterFilter@2943e61c, org.springframework.web.filter.CorsFilter@45117dd, org.springframework.security.web.authentication.logout.LogoutFilter@3ade99bb, com.example.tmdt.security.jwt.AuthTokenFilter@231c521e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@773ad729, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20e8286a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6391d34f, org.springframework.security.web.session.SessionManagementFilter@7d0e46dd, org.springframework.security.web.access.ExceptionTranslationFilter@421c057a, org.springframework.security.web.access.intercept.AuthorizationFilter@6527f68a]
2025-04-12 23:53:52,903 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-12 23:53:53,010 INFO com.example.tmdt.config.WebMvcConfig [main] Added CurrentUserArgumentResolver to Spring MVC
2025-04-12 23:53:53,385 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2025-04-12 23:53:53,416 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2025-04-12 23:53:53,425 INFO org.springframework.boot.StartupInfoLogger [main] Started TmdtApplication in 6.046 seconds (JVM running for 6.344)
2025-04-12 23:53:53,440 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [main] 
    select
        count(*) as col_0_0_ 
    from
        roles role0_
2025-04-12 23:55:26,661 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-12 23:55:26,662 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2025-04-12 23:55:26,663 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2025-04-12 23:55:26,670 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/top
2025-04-12 23:55:26,670 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /notifications
2025-04-12 23:55:26,670 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /products/top
2025-04-12 23:55:26,670 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /notifications
2025-04-12 23:55:26,671 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,671 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,671 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,671 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,678 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /notifications
2025-04-12 23:55:26,678 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing OPTIONS /products/top?limit=6
2025-04-12 23:55:26,678 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /notifications
2025-04-12 23:55:26,678 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing OPTIONS /products/top?limit=6
2025-04-12 23:55:26,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,697 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,697 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,697 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,697 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,698 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=32ms
2025-04-12 23:55:26,698 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=32ms
2025-04-12 23:55:26,698 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=32ms
2025-04-12 23:55:26,698 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=32ms
2025-04-12 23:55:26,702 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-12 23:55:26,702 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-12 23:55:26,703 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,703 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,704 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications
2025-04-12 23:55:26,704 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=6
2025-04-12 23:55:26,705 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,705 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,706 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:26,706 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:26,707 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,707 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,707 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:55:26,707 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:55:26,707 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,707 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,720 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /notifications/unread-count
2025-04-12 23:55:26,721 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,721 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing OPTIONS /notifications/unread-count
2025-04-12 23:55:26,722 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,723 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,723 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:26,727 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications/unread-count
2025-04-12 23:55:26,727 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,728 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications/unread-count
2025-04-12 23:55:26,728 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:55:26,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,729 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:55:26,730 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,761 ERROR com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token is expired at line 385 in io.jsonwebtoken.impl.DefaultJwtParser: JWT expired at 2025-04-11T15:31:52Z. Current time: 2025-04-12T23:55:26Z, a difference of 116614760 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-04-12 23:55:26,761 ERROR com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token is expired at line 385 in io.jsonwebtoken.impl.DefaultJwtParser: JWT expired at 2025-04-11T15:31:52Z. Current time: 2025-04-12T23:55:26Z, a difference of 116614760 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-04-12 23:55:26,761 ERROR com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token is expired at line 385 in io.jsonwebtoken.impl.DefaultJwtParser: JWT expired at 2025-04-11T15:31:52Z. Current time: 2025-04-12T23:55:26Z, a difference of 116614760 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-04-12 23:55:26,761 ERROR com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Invalid JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,761 ERROR com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Invalid JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,762 ERROR com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Invalid JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,763 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,763 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,763 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,764 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=6
2025-04-12 23:55:26,764 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-7] Unauthorized error at line 195 in org.springframework.security.web.access.ExceptionTranslationFilter: Full authentication is required to access this resource
2025-04-12 23:55:26,764 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-10] Unauthorized error at line 195 in org.springframework.security.web.access.ExceptionTranslationFilter: Full authentication is required to access this resource
2025-04-12 23:55:26,765 DEBUG com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-7] Request details - URI: /notifications, Method: GET, IP: 0:0:0:0:0:0:0:1, Headers: org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest$2@3cc84790
2025-04-12 23:55:26,765 DEBUG com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-10] Request details - URI: /notifications/unread-count, Method: GET, IP: 0:0:0:0:0:0:0:1, Headers: org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest$2@7b7faf69
2025-04-12 23:55:26,765 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,765 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,765 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=401, Time=40ms
2025-04-12 23:55:26,765 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=401, Time=63ms
2025-04-12 23:55:26,768 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /error
2025-04-12 23:55:26,768 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /error
2025-04-12 23:55:26,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,768 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,768 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,769 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,769 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /error
2025-04-12 23:55:26,769 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /error
2025-04-12 23:55:26,773 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,773 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,778 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-12 23:55:26,778 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,779 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications
2025-04-12 23:55:26,779 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:26,781 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,781 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:55:26,781 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,782 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-12 23:55:26,782 ERROR com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token is expired at line 385 in io.jsonwebtoken.impl.DefaultJwtParser: JWT expired at 2025-04-11T15:31:52Z. Current time: 2025-04-12T23:55:26Z, a difference of 116614782 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-04-12 23:55:26,783 ERROR com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Invalid JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,783 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,783 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-5] Unauthorized error at line 195 in org.springframework.security.web.access.ExceptionTranslationFilter: Full authentication is required to access this resource
2025-04-12 23:55:26,783 DEBUG com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-5] Request details - URI: /notifications, Method: GET, IP: 0:0:0:0:0:0:0:1, Headers: org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest$2@5de5cead
2025-04-12 23:55:26,784 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,784 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=401, Time=7ms
2025-04-12 23:55:26,784 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /error
2025-04-12 23:55:26,785 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,785 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,786 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /error
2025-04-12 23:55:26,786 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,789 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-12 23:55:26,790 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,791 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications
2025-04-12 23:55:26,791 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:26,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:55:26,793 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,795 ERROR com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token is expired at line 385 in io.jsonwebtoken.impl.DefaultJwtParser: JWT expired at 2025-04-11T15:31:52Z. Current time: 2025-04-12T23:55:26Z, a difference of 116614794 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-04-12 23:55:26,795 ERROR com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Invalid JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,796 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,796 ERROR com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Unauthorized error at line 195 in org.springframework.security.web.access.ExceptionTranslationFilter: Full authentication is required to access this resource
2025-04-12 23:55:26,797 DEBUG com.example.tmdt.security.jwt.AuthEntryPointJwt [http-nio-8080-exec-9] Request details - URI: /notifications, Method: GET, IP: 0:0:0:0:0:0:0:1, Headers: org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest$2@385fffb
2025-04-12 23:55:26,797 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,797 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=401, Time=8ms
2025-04-12 23:55:26,798 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /error
2025-04-12 23:55:26,798 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,799 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,799 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /error
2025-04-12 23:55:26,799 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,801 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:26,822 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:26,824 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:26,843 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:26,844 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,846 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:26,847 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:26,861 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:26,861 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 80 ms
2025-04-12 23:55:26,895 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,896 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,905 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,906 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,915 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:26,916 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:26,926 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,928 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:26,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,930 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:26,933 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:26,933 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,935 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,936 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:26,937 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,938 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:26,940 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,941 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:26,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:26,950 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:26,950 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=248ms
2025-04-12 23:55:26,953 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-12 23:55:26,953 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:26,954 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=6
2025-04-12 23:55:26,954 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:26,954 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:26,955 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,955 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:55:26,955 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,956 ERROR com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token is expired at line 385 in io.jsonwebtoken.impl.DefaultJwtParser: JWT expired at 2025-04-11T15:31:52Z. Current time: 2025-04-12T23:55:26Z, a difference of 116614956 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-04-12 23:55:26,957 ERROR com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Invalid JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDI3MzkxMiwiZXhwIjoxNzQ0MzYwMzEyfQ.rX3MnmWeXNE29mq1DsvTzFQdjQjAwlqtfU88lte49_RiM1cPSOjzsGn62m2wBGCYUlvW1biP6BQn7XmS5GmSsg
2025-04-12 23:55:26,957 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:26,957 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=6
2025-04-12 23:55:26,958 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-12 23:55:26,958 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:26,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:26,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:26,965 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:26,966 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:26,969 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:26,972 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:26,972 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 14 ms
2025-04-12 23:55:26,973 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,974 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,977 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,978 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:26,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:26,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,985 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:26,987 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:26,991 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:26,992 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:26,993 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:26,995 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:26,997 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:26,998 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:26,999 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:27,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:27,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:27,003 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:27,006 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:27,006 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=54ms
2025-04-12 23:55:34,535 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /auth/signin
2025-04-12 23:55:34,536 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=POST, access-control-request-headers=content-type, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,537 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /auth/signin
2025-04-12 23:55:34,537 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,538 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,538 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:34,540 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing POST /auth/signin
2025-04-12 23:55:34,541 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /auth/signin, Method: POST
2025-04-12 23:55:34,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: null
2025-04-12 23:55:34,543 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] No Authorization header found in request
2025-04-12 23:55:34,543 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] No JWT token found in request to: /auth/signin
2025-04-12 23:55:34,543 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2025-04-12 23:55:34,543 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured POST /auth/signin
2025-04-12 23:55:34,590 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING authenticateUser with args: [LoginRequest(username=a1234, password=1234567)]
2025-04-12 23:55:34,593 INFO com.example.tmdt.controller.AuthController [http-nio-8080-exec-4] Attempting to authenticate user: a1234
2025-04-12 23:55:34,680 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:34,681 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:34,683 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:34,684 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,773 DEBUG org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2025-04-12 23:55:34,774 DEBUG com.example.tmdt.controller.AuthController [http-nio-8080-exec-4] Authentication successful for user: a1234
2025-04-12 23:55:34,774 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Generating JWT token for user: a1234
2025-04-12 23:55:34,783 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Generated JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,783 DEBUG com.example.tmdt.controller.AuthController [http-nio-8080-exec-4] JWT token generated successfully
2025-04-12 23:55:34,784 INFO com.example.tmdt.controller.AuthController [http-nio-8080-exec-4] User a1234 successfully authenticated with roles: [ROLE_USER]
2025-04-12 23:55:34,789 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING authenticateUser with result: [<200 OK OK,JwtResponse(token=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA, type=Bearer, id=3, username=a1234, email=leloilonglon@gmail.com, fullName=sYn good72a, roles=[ROLE_USER]),[]>]
2025-04-12 23:55:34,790 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method authenticateUser executed in 201 ms
2025-04-12 23:55:34,794 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,795 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: POST /auth/signin
2025-04-12 23:55:34,795 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, content-length=41, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,796 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=0ms
2025-04-12 23:55:34,832 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications
2025-04-12 23:55:34,832 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications/unread-count
2025-04-12 23:55:34,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-12 23:55:34,834 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications
2025-04-12 23:55:34,834 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications/unread-count
2025-04-12 23:55:34,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,835 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,835 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=6
2025-04-12 23:55:34,835 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,835 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,835 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:34,835 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:55:34,836 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,838 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:55:34,838 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:55:34,838 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:55:34,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:55:34,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:55:34,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:55:34,840 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:55:34,840 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:55:34,840 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:55:34,841 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:34,841 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:34,841 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:34,842 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:34,844 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:34,844 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:34,844 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:34,844 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:34,844 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:34,847 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,847 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,847 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,851 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,851 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,851 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,852 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:55:34,852 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5e13e7f5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@dbd8390, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,853 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications
2025-04-12 23:55:34,853 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@366cf89, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,853 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications/unread-count
2025-04-12 23:55:34,853 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=6
2025-04-12 23:55:34,854 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-12 23:55:34,855 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:34,859 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:34,860 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,862 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,862 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,863 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:34,864 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,864 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,864 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:34,868 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:34,868 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:34,868 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:34,871 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:34,871 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 17 ms
2025-04-12 23:55:34,872 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,874 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,876 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,877 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,879 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,880 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:34,882 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,883 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:34,886 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:34,889 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,890 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,892 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,893 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:34,895 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:34,894 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:34,894 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,895 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:34,895 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:34,895 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:34,897 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,898 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,900 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,901 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,903 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,903 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=69ms
2025-04-12 23:55:34,904 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:34,905 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:55:34,905 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-12 23:55:34,906 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,906 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,906 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,906 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=6
2025-04-12 23:55:34,907 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:34,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:55:34,908 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,909 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:55:34,910 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:55:34,910 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:55:34,911 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:55:34,911 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getUnreadCount executed in 16 ms
2025-04-12 23:55:34,912 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,912 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:34,913 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=81ms
2025-04-12 23:55:34,913 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:34,914 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:34,915 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,916 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41)],[]>]
2025-04-12 23:55:34,917 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllNotifications executed in 22 ms
2025-04-12 23:55:34,918 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,918 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:55:34,920 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:34,920 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@25239513, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,920 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=6
2025-04-12 23:55:34,921 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-12 23:55:34,922 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,922 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:34,922 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=90ms
2025-04-12 23:55:34,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-12 23:55:34,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:34,925 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications
2025-04-12 23:55:34,925 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:34,925 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:34,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:34,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,926 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:55:34,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:34,927 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:55:34,928 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:34,929 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:55:34,929 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,929 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:55:34,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:34,931 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:34,931 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:34,931 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:34,933 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:34,933 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:34,933 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 12 ms
2025-04-12 23:55:34,934 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,934 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,935 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:55:34,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:34,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@f72f2f3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:34,937 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications
2025-04-12 23:55:34,937 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,938 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,939 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,940 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,942 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:34,943 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:34,943 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,943 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:34,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:34,944 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:34,944 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:34,946 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,947 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,947 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:34,948 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41)],[]>]
2025-04-12 23:55:34,949 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 5 ms
2025-04-12 23:55:34,950 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:34,951 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=27ms
2025-04-12 23:55:34,952 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:34,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:34,955 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,956 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:34,959 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:34,960 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,963 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:34,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:34,967 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:34,967 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=62ms
2025-04-12 23:55:35,911 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /products
2025-04-12 23:55:35,911 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /wishlist
2025-04-12 23:55:35,911 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,912 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,912 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,912 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,912 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing OPTIONS /wishlist
2025-04-12 23:55:35,912 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /products?sort=newest
2025-04-12 23:55:35,912 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,913 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,914 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,914 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,914 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,914 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=4ms
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=4ms
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=4ms
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=4ms
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,916 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,916 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,916 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,917 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,917 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,917 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,917 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,918 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:35,918 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /categories
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /products/recommended
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: OPTIONS /wishlist
2025-04-12 23:55:35,919 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing OPTIONS /categories
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,919 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing OPTIONS /products?sort=newest
2025-04-12 23:55:35,919 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,919 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing OPTIONS /products/recommended?limit=4
2025-04-12 23:55:35,919 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,919 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing OPTIONS /wishlist
2025-04-12 23:55:35,919 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,920 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,920 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,920 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,920 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,920 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,920 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,920 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,920 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,920 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,921 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,920 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,921 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:35,921 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:35,921 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,921 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:35,921 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:35,922 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,922 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,922 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,922 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,923 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:35,923 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:35,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /products/top
2025-04-12 23:55:35,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /categories
2025-04-12 23:55:35,924 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,924 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /products/top?limit=4
2025-04-12 23:55:35,924 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /products/recommended
2025-04-12 23:55:35,926 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,926 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,926 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,926 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,926 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /categories
2025-04-12 23:55:35,926 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing OPTIONS /products/recommended?limit=4
2025-04-12 23:55:35,926 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /wishlist
2025-04-12 23:55:35,926 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products
2025-04-12 23:55:35,926 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,926 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,927 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,927 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,926 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,927 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,926 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,927 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /wishlist
2025-04-12 23:55:35,927 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products?sort=newest
2025-04-12 23:55:35,928 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,928 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,928 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,927 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:35,928 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=4ms
2025-04-12 23:55:35,928 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=4ms
2025-04-12 23:55:35,929 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products, Method: GET
2025-04-12 23:55:35,930 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=6ms
2025-04-12 23:55:35,930 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /wishlist, Method: GET
2025-04-12 23:55:35,930 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,930 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:55:35,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:55:35,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,931 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,932 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:55:35,932 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:55:35,933 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-12 23:55:35,933 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /categories
2025-04-12 23:55:35,933 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:55:35,933 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,933 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/recommended
2025-04-12 23:55:35,933 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:55:35,934 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /categories
2025-04-12 23:55:35,933 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,934 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:55:35,934 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,934 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4
2025-04-12 23:55:35,934 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:55:35,934 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/recommended?limit=4
2025-04-12 23:55:35,934 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,934 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,935 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,935 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:35,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /categories, Method: GET
2025-04-12 23:55:35,936 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:35,936 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:35,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:35,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/recommended, Method: GET
2025-04-12 23:55:35,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,936 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,937 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:35,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:55:35,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:55:35,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:55:35,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,938 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,939 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:35,939 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:35,939 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:55:35,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,939 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:55:35,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,939 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:55:35,940 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:55:35,940 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:55:35,940 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:55:35,940 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:55:35,941 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:55:35,941 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:55:35,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:35,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:35,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:35,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:35,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:35,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,943 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:55:35,945 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:35,944 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:55:35,945 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:35,946 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:35,946 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@667a8c60, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,946 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2f997600, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,946 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products?sort=newest
2025-04-12 23:55:35,946 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /wishlist
2025-04-12 23:55:35,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:35,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:35,948 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:35,948 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,947 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllProducts
2025-04-12 23:55:35,949 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,948 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:35,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,952 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,952 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,952 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2d1fc081, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-12 23:55:35,954 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /categories
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:35,954 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:55:35,953 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:35,954 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1d9d1322, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,956 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/recommended?limit=4
2025-04-12 23:55:35,954 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7b7df3fd, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:35,956 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4
2025-04-12 23:55:35,956 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:55:35,957 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:35,957 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-12 23:55:35,957 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllCategories
2025-04-12 23:55:35,957 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,958 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,958 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:35,960 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getRecommendedProducts with args: [4]
2025-04-12 23:55:35,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:35,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,961 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-1] Get wishlist request for user: 3
2025-04-12 23:55:35,963 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,964 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,964 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,964 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,966 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,966 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,966 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-12 23:55:35,967 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:35,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,968 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,970 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:35,969 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41)],[]>]
2025-04-12 23:55:35,970 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-12 23:55:35,971 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,971 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllProducts executed in 24 ms
2025-04-12 23:55:35,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,972 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-12 23:55:35,972 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllCategories executed in 15 ms
2025-04-12 23:55:35,973 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,973 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:35,975 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,973 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:35,974 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:35,975 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:35,975 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 18 ms
2025-04-12 23:55:35,976 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,976 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,977 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:35,977 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,977 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:35,978 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,977 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:35,978 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:35,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,978 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getRecommendedProducts executed in 18 ms
2025-04-12 23:55:35,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:35,980 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:35,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:35,982 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,983 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,981 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:35,984 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:35,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:35,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@2e290a85],[]>]
2025-04-12 23:55:35,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,986 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:35,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:35,987 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,987 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getWishlist executed in 30 ms
2025-04-12 23:55:35,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,989 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,990 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=56ms
2025-04-12 23:55:35,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:35,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:35,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,991 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:35,992 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /categories
2025-04-12 23:55:35,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=66ms
2025-04-12 23:55:35,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,993 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /categories
2025-04-12 23:55:35,993 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,993 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:35,993 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,993 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:35,994 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,995 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,995 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /wishlist
2025-04-12 23:55:35,995 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:35,996 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:35,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /categories, Method: GET
2025-04-12 23:55:35,996 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /wishlist
2025-04-12 23:55:35,996 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:35,996 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,997 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /wishlist, Method: GET
2025-04-12 23:55:35,997 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,997 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:55:35,997 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:35,998 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:35,997 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:35,997 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:35,998 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:35,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:35,999 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:55:35,999 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,001 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:55:36,001 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-12 23:55:36,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,002 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:55:36,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,004 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,002 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-12 23:55:36,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:55:36,004 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-12 23:55:36,004 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,005 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,005 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,007 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,005 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,009 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,010 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,010 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,011 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,011 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,012 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,012 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,012 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,014 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,015 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,016 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=83ms
2025-04-12 23:55:36,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:55:36,017 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,017 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@64bbbebd, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,017 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /wishlist
2025-04-12 23:55:36,018 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,018 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,018 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,018 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=92ms
2025-04-12 23:55:36,020 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-12 23:55:36,020 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,020 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-12 23:55:36,020 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,021 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,021 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,022 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4
2025-04-12 23:55:36,021 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products
2025-04-12 23:55:36,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,022 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,022 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,022 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,022 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6df5fda, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,022 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products?sort=newest
2025-04-12 23:55:36,022 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /categories
2025-04-12 23:55:36,023 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,023 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,023 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllCategories
2025-04-12 23:55:36,023 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products, Method: GET
2025-04-12 23:55:36,024 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,025 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:55:36,024 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,023 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,025 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=92ms
2025-04-12 23:55:36,026 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:55:36,025 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:55:36,025 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-12 23:55:36,025 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:55:36,026 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,027 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,027 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:36,028 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/recommended
2025-04-12 23:55:36,028 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-4] Get wishlist request for user: 3
2025-04-12 23:55:36,028 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,028 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:55:36,028 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:55:36,029 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/recommended?limit=4
2025-04-12 23:55:36,029 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:55:36,029 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/recommended, Method: GET
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-12 23:55:36,031 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,030 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,031 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllCategories executed in 8 ms
2025-04-12 23:55:36,031 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:55:36,031 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:36,032 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,032 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,032 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:55:36,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:36,033 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,034 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:55:36,034 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,034 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:55:36,035 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,035 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,035 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:36,035 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,036 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,036 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,036 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,036 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,037 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,037 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,037 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:55:36,039 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,039 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@2b452561],[]>]
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,039 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getWishlist executed in 12 ms
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@13c4ee04, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,040 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4
2025-04-12 23:55:36,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@59b6d8b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,040 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products?sort=newest
2025-04-12 23:55:36,041 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,041 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:55:36,041 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllProducts
2025-04-12 23:55:36,041 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts
2025-04-12 23:55:36,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,042 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=48ms
2025-04-12 23:55:36,042 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:55:36,042 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,042 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-12 23:55:36,042 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,043 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5f1f8571, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,043 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,043 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/recommended?limit=4
2025-04-12 23:55:36,044 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=52ms
2025-04-12 23:55:36,044 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getRecommendedProducts with args: [4]
2025-04-12 23:55:36,044 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,047 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,047 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,048 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,048 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,048 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,050 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,050 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,050 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,052 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,052 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,052 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,054 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,054 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,055 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41)],[]>]
2025-04-12 23:55:36,055 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 14 ms
2025-04-12 23:55:36,055 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllProducts executed in 14 ms
2025-04-12 23:55:36,056 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,056 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,057 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,057 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,058 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,058 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,058 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getRecommendedProducts executed in 14 ms
2025-04-12 23:55:36,059 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,059 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,059 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,065 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,065 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,066 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,069 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,069 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,070 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,071 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,071 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,072 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,073 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,076 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,077 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,077 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,078 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,079 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,079 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,080 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,080 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,080 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,082 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,083 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,084 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,084 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,084 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,086 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,087 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,087 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,087 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,092 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,092 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,093 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,094 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,094 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,095 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=74ms
2025-04-12 23:55:36,096 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,096 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,098 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,098 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=79ms
2025-04-12 23:55:36,098 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=70ms
2025-04-12 23:55:36,101 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-12 23:55:36,101 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,102 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=4
2025-04-12 23:55:36,103 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,103 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,103 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:55:36,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,104 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:55:36,106 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:55:36,107 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:55:36,108 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,110 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,111 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:55:36,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,113 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@67c639aa, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,114 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=4
2025-04-12 23:55:36,114 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts
2025-04-12 23:55:36,115 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,118 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,123 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,124 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,126 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,127 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 13 ms
2025-04-12 23:55:36,128 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,129 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,131 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,132 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,133 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,134 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,135 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,136 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,139 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,141 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,141 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,143 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,143 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,145 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,145 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,148 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,149 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,150 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,151 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,152 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=51ms
2025-04-12 23:55:36,153 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-12 23:55:36,153 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,153 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-12 23:55:36,153 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,154 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,154 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,154 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:55:36,154 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,155 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:55:36,156 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:55:36,157 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:55:36,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,160 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,161 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,162 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,163 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,163 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:55:36,163 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,163 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7da2e1a4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,164 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-12 23:55:36,164 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-12 23:55:36,165 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,167 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,168 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,169 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,170 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,171 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,172 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,174 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,174 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 10 ms
2025-04-12 23:55:36,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,176 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,178 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,181 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,183 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,184 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,186 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,187 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,191 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,192 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,193 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,197 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,197 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=44ms
2025-04-12 23:55:36,199 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-12 23:55:36,200 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,201 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4
2025-04-12 23:55:36,201 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:55:36,202 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,203 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:55:36,203 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:55:36,203 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:55:36,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,206 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,207 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,209 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,211 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,211 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:55:36,212 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,212 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4c9648a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,213 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4
2025-04-12 23:55:36,214 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-12 23:55:36,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,220 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,221 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,223 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,223 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,225 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,226 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 12 ms
2025-04-12 23:55:36,227 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,228 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,230 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,233 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,234 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,236 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,236 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,241 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,242 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,243 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,245 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,247 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,248 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,249 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,250 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,251 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,254 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,254 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=55ms
2025-04-12 23:55:36,256 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-12 23:55:36,257 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,257 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4
2025-04-12 23:55:36,258 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,258 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,259 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,259 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:55:36,259 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,260 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:55:36,262 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:55:36,262 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:55:36,265 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,266 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,267 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,268 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,270 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:55:36,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6096a80e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,271 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4
2025-04-12 23:55:36,272 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-12 23:55:36,273 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,274 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,277 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,278 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,279 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,280 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,283 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,283 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 11 ms
2025-04-12 23:55:36,284 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,284 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,286 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,287 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,288 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,289 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,291 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,295 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,297 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,298 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,300 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,302 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,302 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,304 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,305 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,307 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,308 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=52ms
2025-04-12 23:55:36,309 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-12 23:55:36,310 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,311 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=4
2025-04-12 23:55:36,311 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:55:36,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,313 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:55:36,315 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:55:36,315 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:55:36,317 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,318 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,320 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,320 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,322 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,323 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:55:36,323 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,323 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5c2d512a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,324 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=4
2025-04-12 23:55:36,324 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-12 23:55:36,325 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,327 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,328 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,330 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,332 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,333 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,335 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,336 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 12 ms
2025-04-12 23:55:36,337 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,338 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,339 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,340 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,341 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,342 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,343 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,344 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,346 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,348 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,349 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,350 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,351 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,352 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,353 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,354 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,356 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,357 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,358 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,360 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,360 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=51ms
2025-04-12 23:55:36,362 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/top
2025-04-12 23:55:36,362 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:36,363 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/top?limit=4
2025-04-12 23:55:36,363 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:36,363 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/top, Method: GET
2025-04-12 23:55:36,363 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,364 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:55:36,364 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:36,364 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:55:36,365 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:55:36,365 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:55:36,367 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:36,367 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:36,368 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:36,369 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,371 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,371 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:55:36,372 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:36,372 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@e42f9d4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:36,372 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/top?limit=4
2025-04-12 23:55:36,373 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getTopProducts
2025-04-12 23:55:36,374 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:55:36,376 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,377 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,378 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,379 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,380 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:55:36,381 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,382 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:45:58)],[]>]
2025-04-12 23:55:36,382 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getTopProducts executed in 9 ms
2025-04-12 23:55:36,383 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,383 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,385 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,386 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,387 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,388 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,392 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,393 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:36,395 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:36,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:36,398 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,399 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,400 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,401 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:36,402 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:36,403 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:36,405 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:36,406 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:36,406 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=44ms
2025-04-12 23:55:40,326 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /coupons/my-coupons
2025-04-12 23:55:40,326 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /coupons/my-coupons
2025-04-12 23:55:40,327 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:40,327 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:40,327 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /coupons/my-coupons
2025-04-12 23:55:40,327 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing OPTIONS /coupons/my-coupons
2025-04-12 23:55:40,329 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:40,329 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:40,329 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:40,329 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:40,329 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:40,329 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:40,332 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /coupons/my-coupons
2025-04-12 23:55:40,332 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:40,332 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /coupons/my-coupons
2025-04-12 23:55:40,333 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:40,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-12 23:55:40,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:40,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:55:40,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:40,334 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:55:40,335 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:55:40,335 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:55:40,336 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:40,337 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:40,338 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:40,339 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:40,341 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:40,341 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:55:40,341 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:40,341 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@f8848d3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:40,342 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /coupons/my-coupons
2025-04-12 23:55:40,344 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:40,345 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:40,347 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:55:40,348 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:55:40,348 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:40,351 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-3] Getting coupons for user: 3
2025-04-12 23:55:40,362 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-12 23:55:40,363 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:40,363 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BOOLEAN] - [true]
2025-04-12 23:55:40,364 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [3] as [TIMESTAMP] - [2025-04-12T23:55:40.355138700]
2025-04-12 23:55:40,377 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38)],[]>]
2025-04-12 23:55:40,378 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getMyCoupons executed in 30 ms
2025-04-12 23:55:40,382 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:40,382 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=51ms
2025-04-12 23:55:40,383 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /coupons/my-coupons
2025-04-12 23:55:40,384 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:40,385 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /coupons/my-coupons
2025-04-12 23:55:40,385 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:40,385 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-12 23:55:40,385 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:40,386 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:55:40,386 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:40,386 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:55:40,387 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:55:40,388 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:55:40,389 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:40,389 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:40,390 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:40,391 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:40,392 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:40,392 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:55:40,392 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:40,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5f63c812, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:40,393 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /coupons/my-coupons
2025-04-12 23:55:40,393 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:40,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:40,396 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:55:40,397 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:55:40,397 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:40,398 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-10] Getting coupons for user: 3
2025-04-12 23:55:40,398 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-12 23:55:40,399 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:40,399 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [2] as [BOOLEAN] - [true]
2025-04-12 23:55:40,400 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [3] as [TIMESTAMP] - [2025-04-12T23:55:40.398632400]
2025-04-12 23:55:40,401 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38)],[]>]
2025-04-12 23:55:40,402 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getMyCoupons executed in 5 ms
2025-04-12 23:55:40,403 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:40,403 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=20ms
2025-04-12 23:55:46,937 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /coupons/verify
2025-04-12 23:55:46,937 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=POST, access-control-request-headers=authorization,content-type, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:46,938 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing OPTIONS /coupons/verify
2025-04-12 23:55:46,939 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:46,939 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:46,939 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:46,941 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing POST /coupons/verify
2025-04-12 23:55:46,942 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:46,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /coupons/verify, Method: POST
2025-04-12 23:55:46,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:46,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:55:46,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:46,944 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:55:46,945 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:55:46,945 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:55:46,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:46,947 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:46,948 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:46,949 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:46,950 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:46,951 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:55:46,951 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:46,951 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@78e9dddc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:46,951 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured POST /coupons/verify
2025-04-12 23:55:46,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:46,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:46,957 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:55:46,958 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.verifyCoupon(com.example.tmdt.model.User,com.example.tmdt.payload.request.CouponVerifyRequest); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:55:46,959 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING verifyCoupon with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), CouponVerifyRequest(code=c, orderAmount=29.99)]
2025-04-12 23:55:46,959 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-1] Verifying coupon: c for user: 3
2025-04-12 23:55:46,961 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-12 23:55:46,962 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [c]
2025-04-12 23:55:46,966 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING verifyCoupon with result: [<200 OK OK,{valid=true, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), message=Coupon is valid},[]>]
2025-04-12 23:55:46,966 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method verifyCoupon executed in 8 ms
2025-04-12 23:55:46,968 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:46,968 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: POST /coupons/verify
2025-04-12 23:55:46,969 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, content-length=32, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:46,969 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=0ms
2025-04-12 23:55:49,370 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /orders
2025-04-12 23:55:49,371 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=POST, access-control-request-headers=authorization,content-type, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:49,371 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing OPTIONS /orders
2025-04-12 23:55:49,371 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:49,373 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:49,373 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:49,375 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing POST /orders
2025-04-12 23:55:49,375 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:49,375 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /orders, Method: POST
2025-04-12 23:55:49,375 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,376 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:55:49,376 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,376 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:55:49,378 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:55:49,378 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:55:49,380 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:49,380 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:49,381 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:49,382 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,383 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:55:49,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:49,384 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@49df5e1c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,384 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured POST /orders
2025-04-12 23:55:49,387 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.createOrder(com.example.tmdt.payload.request.OrderRequest); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:49,388 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.createOrder(com.example.tmdt.payload.request.OrderRequest); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:49,390 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING createOrder with args: [OrderRequest(items=[OrderItemRequest(productId=3, quantity=1)], shippingAddress=a, 123a, 123, paymentMethod=cod, couponCode=c, total=26.391199999999998)]
2025-04-12 23:55:49,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:49,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:49,397 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:49,398 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:49,405 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-12 23:55:49,418 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [c]
2025-04-12 23:55:49,420 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.code=?
2025-04-12 23:55:49,421 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [c]
2025-04-12 23:55:49,430 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    insert 
    into
        orders
        (coupon_id, created_at, discount_amount, payment_method, payment_status, shipping_address, status, total_amount, updated_at, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-04-12 23:55:49,432 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [TIMESTAMP] - [2025-04-12T23:55:49.425976800]
2025-04-12 23:55:49,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [3] as [NUMERIC] - [3.5987999999999998]
2025-04-12 23:55:49,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [4] as [VARCHAR] - [cod]
2025-04-12 23:55:49,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [5] as [VARCHAR] - [PENDING]
2025-04-12 23:55:49,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [6] as [VARCHAR] - [a, 123a, 123]
2025-04-12 23:55:49,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [7] as [VARCHAR] - [PENDING]
2025-04-12 23:55:49,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [8] as [NUMERIC] - [26.391199999999998]
2025-04-12 23:55:49,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [9] as [TIMESTAMP] - [2025-04-12T23:55:49.425976800]
2025-04-12 23:55:49,435 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [10] as [BIGINT] - [3]
2025-04-12 23:55:49,442 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    insert 
    into
        order_items
        (order_id, price, product_id, product_image_url, product_name, quantity) 
    values
        (?, ?, ?, ?, ?, ?)
2025-04-12 23:55:49,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:49,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [NUMERIC] - [29.99]
2025-04-12 23:55:49,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [3] as [BIGINT] - [3]
2025-04-12 23:55:49,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [4] as [VARCHAR] - [https://example.com/tshirt.jpg]
2025-04-12 23:55:49,444 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [5] as [VARCHAR] - [Classic T-Shirt]
2025-04-12 23:55:49,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [6] as [INTEGER] - [1]
2025-04-12 23:55:49,452 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    insert 
    into
        notifications
        (created_at, is_read, message, reference_id, title, type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-04-12 23:55:49,453 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [TIMESTAMP] - [2025-04-12T23:55:49.452191600]
2025-04-12 23:55:49,453 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BOOLEAN] - [false]
2025-04-12 23:55:49,453 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [3] as [VARCHAR] - [??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!]
2025-04-12 23:55:49,454 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [4] as [BIGINT] - [42]
2025-04-12 23:55:49,454 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [5] as [VARCHAR] - [??t hng thnh cng]
2025-04-12 23:55:49,454 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [6] as [VARCHAR] - [ORDER_STATUS_CHANGE]
2025-04-12 23:55:49,455 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [7] as [BIGINT] - [3]
2025-04-12 23:55:49,461 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    update
        products 
    set
        average_rating=?,
        category_id=?,
        created_at=?,
        description=?,
        discount_percentage=?,
        image_url=?,
        is_featured=?,
        name=?,
        price=?,
        review_count=?,
        sold_count=?,
        stock=?,
        updated_at=? 
    where
        id=?
2025-04-12 23:55:49,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [DOUBLE] - [4.5]
2025-04-12 23:55:49,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [4]
2025-04-12 23:55:49,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [3] as [TIMESTAMP] - [2025-04-02T16:06:04]
2025-04-12 23:55:49,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [4] as [VARCHAR] - [Comfortable cotton t-shirt]
2025-04-12 23:55:49,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [5] as [DOUBLE] - [0.0]
2025-04-12 23:55:49,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [6] as [VARCHAR] - [https://example.com/tshirt.jpg]
2025-04-12 23:55:49,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [7] as [BOOLEAN] - [false]
2025-04-12 23:55:49,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [8] as [VARCHAR] - [Classic T-Shirt]
2025-04-12 23:55:49,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [9] as [DOUBLE] - [29.99]
2025-04-12 23:55:49,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [10] as [INTEGER] - [250]
2025-04-12 23:55:49,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [11] as [INTEGER] - [1000]
2025-04-12 23:55:49,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [12] as [INTEGER] - [198]
2025-04-12 23:55:49,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [13] as [TIMESTAMP] - [2025-04-12T23:55:49.456907400]
2025-04-12 23:55:49,466 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [14] as [BIGINT] - [3]
2025-04-12 23:55:49,473 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING createOrder with result: [<200 OK OK,Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.391199999999998, status=PENDING, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.5987999999999998, createdAt=2025-04-12T23:55:49.425976800, updatedAt=2025-04-12T23:55:49.425976800),[]>]
2025-04-12 23:55:49,474 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method createOrder executed in 86 ms
2025-04-12 23:55:49,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:49,477 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:49,477 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:49,483 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:49,484 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:49,485 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: POST /orders
2025-04-12 23:55:49,485 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, content-length=139, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:49,485 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=0ms
2025-04-12 23:55:49,489 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-12 23:55:49,489 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:49,490 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications
2025-04-12 23:55:49,490 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:49,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:49,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,491 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:55:49,491 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,491 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:55:49,492 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:55:49,492 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:55:49,493 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:49,494 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:49,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:49,496 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,498 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,498 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:55:49,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:49,499 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@69fe53e3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,499 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications
2025-04-12 23:55:49,500 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:49,501 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,503 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,503 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,503 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:49,504 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:49,505 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,506 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49)],[]>]
2025-04-12 23:55:49,507 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 4 ms
2025-04-12 23:55:49,509 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:49,509 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=20ms
2025-04-12 23:55:49,511 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-12 23:55:49,511 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:49,512 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications
2025-04-12 23:55:49,512 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:49,512 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:49,513 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,513 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:55:49,513 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,513 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:55:49,514 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:55:49,514 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:55:49,516 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:49,517 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:49,518 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:49,519 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,520 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,521 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:55:49,521 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:49,521 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5567be8e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,522 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications
2025-04-12 23:55:49,523 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:49,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,524 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,525 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,525 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:49,526 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:49,526 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,528 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49)],[]>]
2025-04-12 23:55:49,528 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 3 ms
2025-04-12 23:55:49,530 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:49,530 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=19ms
2025-04-12 23:55:49,532 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications
2025-04-12 23:55:49,532 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:49,532 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications
2025-04-12 23:55:49,533 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:49,533 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:49,533 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,534 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:55:49,534 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,535 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:55:49,536 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:55:49,536 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:55:49,537 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:49,537 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:49,538 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:49,539 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,541 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,541 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:55:49,541 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:49,541 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@52718dd0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,542 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications
2025-04-12 23:55:49,543 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:49,543 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,544 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,545 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,545 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:49,546 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:49,547 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,548 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49)],[]>]
2025-04-12 23:55:49,549 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllNotifications executed in 4 ms
2025-04-12 23:55:49,550 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:49,550 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=18ms
2025-04-12 23:55:49,856 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-12 23:55:49,856 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:49,857 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications
2025-04-12 23:55:49,857 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:49,857 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:49,858 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,858 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:55:49,859 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:49,859 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-12 23:55:49,860 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-12 23:55:49,861 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-12 23:55:49,862 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:49,863 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:49,864 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:49,865 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,867 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-12 23:55:49,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:49,869 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4832477f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:49,869 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications
2025-04-12 23:55:49,870 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:49,872 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,873 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,874 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:49,874 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:49,876 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:49,876 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:49,878 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49)],[]>]
2025-04-12 23:55:49,878 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 4 ms
2025-04-12 23:55:49,880 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:49,880 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=24ms
2025-04-12 23:55:51,218 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-12 23:55:51,219 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:51,219 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications
2025-04-12 23:55:51,219 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:51,220 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:51,220 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:51,220 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:55:51,220 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:51,221 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:55:51,222 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:55:51,222 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:55:51,223 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:51,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:51,225 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:51,226 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:51,227 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:51,229 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:55:51,229 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:51,229 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@39f168dd, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:51,230 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications
2025-04-12 23:55:51,231 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:51,232 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:51,234 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:51,234 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:51,235 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:51,235 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:51,236 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:51,237 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49)],[]>]
2025-04-12 23:55:51,238 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 3 ms
2025-04-12 23:55:51,240 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:51,240 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=22ms
2025-04-12 23:55:55,594 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /orders/my-orders
2025-04-12 23:55:55,594 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /orders/my-orders
2025-04-12 23:55:55,596 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:55,596 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:55,596 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing OPTIONS /orders/my-orders
2025-04-12 23:55:55,596 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing OPTIONS /orders/my-orders
2025-04-12 23:55:55,596 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:55,596 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:55,596 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:55,596 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:55,597 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:55,597 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=3ms
2025-04-12 23:55:55,599 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /orders/my-orders
2025-04-12 23:55:55,600 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:55,600 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /orders/my-orders
2025-04-12 23:55:55,600 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:55,601 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /orders/my-orders, Method: GET
2025-04-12 23:55:55,601 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:55,601 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:55:55,601 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:55,602 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:55:55,602 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:55:55,603 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:55:55,605 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:55,606 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:55,607 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:55,607 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,609 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:55,609 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:55:55,609 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:55,609 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@24d5eb87, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:55,610 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /orders/my-orders
2025-04-12 23:55:55,610 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders(); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:55,611 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders(); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:55,611 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getCurrentUserOrders
2025-04-12 23:55:55,612 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:55,613 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:55,614 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:55,615 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,618 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        order0_.id as id1_5_,
        order0_.coupon_id as coupon_10_5_,
        order0_.created_at as created_2_5_,
        order0_.discount_amount as discount3_5_,
        order0_.payment_method as payment_4_5_,
        order0_.payment_status as payment_5_5_,
        order0_.shipping_address as shipping6_5_,
        order0_.status as status7_5_,
        order0_.total_amount as total_am8_5_,
        order0_.updated_at as updated_9_5_,
        order0_.user_id as user_id11_5_ 
    from
        orders order0_ 
    where
        order0_.user_id=? 
    order by
        order0_.created_at desc
2025-04-12 23:55:55,619 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,621 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        coupon0_.id as id1_1_0_,
        coupon0_.code as code2_1_0_,
        coupon0_.created_at as created_3_1_0_,
        coupon0_.description as descript4_1_0_,
        coupon0_.discount_type as discount5_1_0_,
        coupon0_.discount_value as discount6_1_0_,
        coupon0_.end_date as end_date7_1_0_,
        coupon0_.expiry_date as expiry_d8_1_0_,
        coupon0_.is_active as is_activ9_1_0_,
        coupon0_.min_purchase_amount as min_pur10_1_0_,
        coupon0_.start_date as start_d11_1_0_,
        coupon0_.type as type12_1_0_,
        coupon0_.updated_at as updated13_1_0_,
        coupon0_.used_count as used_co14_1_0_,
        coupon0_.user_id as user_id15_1_0_ 
    from
        coupons coupon0_ 
    where
        coupon0_.id=?
2025-04-12 23:55:55,622 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,623 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getCurrentUserOrders with result: [<200 OK OK,[Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.39, status=PENDING, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.60, createdAt=2025-04-12T23:55:49, updatedAt=2025-04-12T23:55:49), Order(id=41, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=43.99, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=6.00, createdAt=2025-04-10T18:02:25, updatedAt=2025-04-10T18:02:41), Order(id=40, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=1143.99, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=156.00, createdAt=2025-04-10T17:51:14, updatedAt=2025-04-10T18:02:01), Order(id=39, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=1143.99, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=156.00, createdAt=2025-04-10T17:50:20, updatedAt=2025-04-10T17:50:40)],[]>]
2025-04-12 23:55:55,624 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getCurrentUserOrders executed in 13 ms
2025-04-12 23:55:55,625 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,626 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:55,629 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:55,630 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,631 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:55,632 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,633 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:55,633 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,635 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:55,636 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,638 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,638 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [41]
2025-04-12 23:55:55,639 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:55,640 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:55,641 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:55,642 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:55,643 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:55,643 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:55,643 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,644 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [40]
2025-04-12 23:55:55,645 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:55,646 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,647 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:55,648 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,649 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:55,649 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,650 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:55,651 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:55,652 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,652 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [39]
2025-04-12 23:55:55,654 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:55,654 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=55ms
2025-04-12 23:55:55,656 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /orders/my-orders
2025-04-12 23:55:55,657 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:55,657 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /orders/my-orders
2025-04-12 23:55:55,657 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:55,658 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /orders/my-orders, Method: GET
2025-04-12 23:55:55,658 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:55,658 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:55:55,658 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:55,659 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:55:55,659 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:55:55,659 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:55:55,660 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:55,661 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:55,662 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:55,663 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,664 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:55,664 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:55:55,664 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:55,665 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@191d56a8, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:55,665 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /orders/my-orders
2025-04-12 23:55:55,665 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders(); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:55,666 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getCurrentUserOrders(); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:55,666 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getCurrentUserOrders
2025-04-12 23:55:55,667 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:55,668 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:55,669 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:55,670 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,672 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        order0_.id as id1_5_,
        order0_.coupon_id as coupon_10_5_,
        order0_.created_at as created_2_5_,
        order0_.discount_amount as discount3_5_,
        order0_.payment_method as payment_4_5_,
        order0_.payment_status as payment_5_5_,
        order0_.shipping_address as shipping6_5_,
        order0_.status as status7_5_,
        order0_.total_amount as total_am8_5_,
        order0_.updated_at as updated_9_5_,
        order0_.user_id as user_id11_5_ 
    from
        orders order0_ 
    where
        order0_.user_id=? 
    order by
        order0_.created_at desc
2025-04-12 23:55:55,673 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,676 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        coupon0_.id as id1_1_0_,
        coupon0_.code as code2_1_0_,
        coupon0_.created_at as created_3_1_0_,
        coupon0_.description as descript4_1_0_,
        coupon0_.discount_type as discount5_1_0_,
        coupon0_.discount_value as discount6_1_0_,
        coupon0_.end_date as end_date7_1_0_,
        coupon0_.expiry_date as expiry_d8_1_0_,
        coupon0_.is_active as is_activ9_1_0_,
        coupon0_.min_purchase_amount as min_pur10_1_0_,
        coupon0_.start_date as start_d11_1_0_,
        coupon0_.type as type12_1_0_,
        coupon0_.updated_at as updated13_1_0_,
        coupon0_.used_count as used_co14_1_0_,
        coupon0_.user_id as user_id15_1_0_ 
    from
        coupons coupon0_ 
    where
        coupon0_.id=?
2025-04-12 23:55:55,677 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,678 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getCurrentUserOrders with result: [<200 OK OK,[Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.39, status=PENDING, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.60, createdAt=2025-04-12T23:55:49, updatedAt=2025-04-12T23:55:49), Order(id=41, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=43.99, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=6.00, createdAt=2025-04-10T18:02:25, updatedAt=2025-04-10T18:02:41), Order(id=40, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=1143.99, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=156.00, createdAt=2025-04-10T17:51:14, updatedAt=2025-04-10T18:02:01), Order(id=39, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=1143.99, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=156.00, createdAt=2025-04-10T17:50:20, updatedAt=2025-04-10T17:50:40)],[]>]
2025-04-12 23:55:55,679 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getCurrentUserOrders executed in 13 ms
2025-04-12 23:55:55,679 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,680 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:55,681 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:55,682 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,683 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:55,684 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,685 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:55,686 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:55,687 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:55,688 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,690 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,690 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [41]
2025-04-12 23:55:55,692 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:55,693 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:55,694 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:55,695 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:55,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:55,698 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:55:55,699 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,699 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [40]
2025-04-12 23:55:55,700 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:55,702 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,702 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:55,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:55,705 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:55,706 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:55,706 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:55:55,707 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:55,708 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [39]
2025-04-12 23:55:55,709 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:55,709 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=53ms
2025-04-12 23:55:58,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: OPTIONS /orders/42
2025-04-12 23:55:58,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /orders/42
2025-04-12 23:55:58,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:58,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:58,423 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing OPTIONS /orders/42
2025-04-12 23:55:58,423 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing OPTIONS /orders/42
2025-04-12 23:55:58,423 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:58,423 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:58,423 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:58,423 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:58,424 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:58,424 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:58,426 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /orders/42
2025-04-12 23:55:58,427 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:58,427 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /orders/42
2025-04-12 23:55:58,428 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:58,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /orders/42, Method: GET
2025-04-12 23:55:58,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:58,429 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:55:58,429 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:58,429 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:55:58,430 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:55:58,430 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:55:58,431 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:58,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:58,434 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:58,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:58,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:55:58,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:58,436 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@45366fe, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:58,437 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /orders/42
2025-04-12 23:55:58,439 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:58,440 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:58,440 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getOrderById with args: [42]
2025-04-12 23:55:58,441 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        order0_.id as id1_5_0_,
        order0_.coupon_id as coupon_10_5_0_,
        order0_.created_at as created_2_5_0_,
        order0_.discount_amount as discount3_5_0_,
        order0_.payment_method as payment_4_5_0_,
        order0_.payment_status as payment_5_5_0_,
        order0_.shipping_address as shipping6_5_0_,
        order0_.status as status7_5_0_,
        order0_.total_amount as total_am8_5_0_,
        order0_.updated_at as updated_9_5_0_,
        order0_.user_id as user_id11_5_0_ 
    from
        orders order0_ 
    where
        order0_.id=?
2025-04-12 23:55:58,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:58,444 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:58,446 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        coupon0_.id as id1_1_0_,
        coupon0_.code as code2_1_0_,
        coupon0_.created_at as created_3_1_0_,
        coupon0_.description as descript4_1_0_,
        coupon0_.discount_type as discount5_1_0_,
        coupon0_.discount_value as discount6_1_0_,
        coupon0_.end_date as end_date7_1_0_,
        coupon0_.expiry_date as expiry_d8_1_0_,
        coupon0_.is_active as is_activ9_1_0_,
        coupon0_.min_purchase_amount as min_pur10_1_0_,
        coupon0_.start_date as start_d11_1_0_,
        coupon0_.type as type12_1_0_,
        coupon0_.updated_at as updated13_1_0_,
        coupon0_.used_count as used_co14_1_0_,
        coupon0_.user_id as user_id15_1_0_ 
    from
        coupons coupon0_ 
    where
        coupon0_.id=?
2025-04-12 23:55:58,448 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,449 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getOrderById with result: [<200 OK OK,Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.39, status=PENDING, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.60, createdAt=2025-04-12T23:55:49, updatedAt=2025-04-12T23:55:49),[]>]
2025-04-12 23:55:58,449 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getOrderById executed in 9 ms
2025-04-12 23:55:58,450 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:58,451 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:58,451 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:58,452 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,453 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:58,453 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,454 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:58,455 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,456 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:58,456 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:58,457 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:58,458 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=32ms
2025-04-12 23:55:58,459 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /orders/42
2025-04-12 23:55:58,460 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:58,460 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /orders/42
2025-04-12 23:55:58,460 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:58,461 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /orders/42, Method: GET
2025-04-12 23:55:58,461 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:58,461 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:55:58,461 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:58,462 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:55:58,463 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:55:58,463 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:55:58,464 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:58,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:58,466 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:58,466 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:58,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:55:58,468 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:58,469 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@760c5bc1, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:58,469 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /orders/42
2025-04-12 23:55:58,470 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:58,470 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:58,470 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getOrderById with args: [42]
2025-04-12 23:55:58,471 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        order0_.id as id1_5_0_,
        order0_.coupon_id as coupon_10_5_0_,
        order0_.created_at as created_2_5_0_,
        order0_.discount_amount as discount3_5_0_,
        order0_.payment_method as payment_4_5_0_,
        order0_.payment_status as payment_5_5_0_,
        order0_.shipping_address as shipping6_5_0_,
        order0_.status as status7_5_0_,
        order0_.total_amount as total_am8_5_0_,
        order0_.updated_at as updated_9_5_0_,
        order0_.user_id as user_id11_5_0_ 
    from
        orders order0_ 
    where
        order0_.id=?
2025-04-12 23:55:58,472 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:58,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:58,478 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,480 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        coupon0_.id as id1_1_0_,
        coupon0_.code as code2_1_0_,
        coupon0_.created_at as created_3_1_0_,
        coupon0_.description as descript4_1_0_,
        coupon0_.discount_type as discount5_1_0_,
        coupon0_.discount_value as discount6_1_0_,
        coupon0_.end_date as end_date7_1_0_,
        coupon0_.expiry_date as expiry_d8_1_0_,
        coupon0_.is_active as is_activ9_1_0_,
        coupon0_.min_purchase_amount as min_pur10_1_0_,
        coupon0_.start_date as start_d11_1_0_,
        coupon0_.type as type12_1_0_,
        coupon0_.updated_at as updated13_1_0_,
        coupon0_.used_count as used_co14_1_0_,
        coupon0_.user_id as user_id15_1_0_ 
    from
        coupons coupon0_ 
    where
        coupon0_.id=?
2025-04-12 23:55:58,481 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,483 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getOrderById with result: [<200 OK OK,Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.39, status=PENDING, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.60, createdAt=2025-04-12T23:55:49, updatedAt=2025-04-12T23:55:49),[]>]
2025-04-12 23:55:58,484 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getOrderById executed in 14 ms
2025-04-12 23:55:58,485 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:58,485 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:58,486 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:58,487 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,488 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:58,489 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,490 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:58,491 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:58,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:58,492 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:58,493 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:58,494 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=35ms
2025-04-12 23:55:59,636 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /orders/42/cancel
2025-04-12 23:55:59,637 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=PUT, access-control-request-headers=authorization,content-type, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:59,637 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /orders/42/cancel
2025-04-12 23:55:59,637 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:59,638 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:59,638 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=2ms
2025-04-12 23:55:59,640 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing PUT /orders/42/cancel
2025-04-12 23:55:59,640 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:59,641 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /orders/42/cancel, Method: PUT
2025-04-12 23:55:59,641 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,641 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:55:59,641 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,642 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:55:59,643 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:55:59,643 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:55:59,644 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:59,645 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:59,645 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:59,646 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,647 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,648 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:55:59,648 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:59,648 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7f059f6f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,649 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured PUT /orders/42/cancel
2025-04-12 23:55:59,650 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.cancelOrder(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:59,650 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.cancelOrder(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:59,651 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING cancelOrder with args: [42]
2025-04-12 23:55:59,652 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:59,652 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:59,653 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:59,653 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,656 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        order0_.id as id1_5_0_,
        order0_.coupon_id as coupon_10_5_0_,
        order0_.created_at as created_2_5_0_,
        order0_.discount_amount as discount3_5_0_,
        order0_.payment_method as payment_4_5_0_,
        order0_.payment_status as payment_5_5_0_,
        order0_.shipping_address as shipping6_5_0_,
        order0_.status as status7_5_0_,
        order0_.total_amount as total_am8_5_0_,
        order0_.updated_at as updated_9_5_0_,
        order0_.user_id as user_id11_5_0_ 
    from
        orders order0_ 
    where
        order0_.id=?
2025-04-12 23:55:59,656 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:59,659 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:59,660 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:59,661 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:59,662 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,664 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    insert 
    into
        notifications
        (created_at, is_read, message, reference_id, title, type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-04-12 23:55:59,664 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [TIMESTAMP] - [2025-04-12T23:55:59.663076300]
2025-04-12 23:55:59,665 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BOOLEAN] - [false]
2025-04-12 23:55:59,665 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [3] as [VARCHAR] - [??n hng #42 c?a b?n ? b? h?y.]
2025-04-12 23:55:59,665 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [4] as [BIGINT] - [42]
2025-04-12 23:55:59,666 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [5] as [VARCHAR] - [??n hng ? b? h?y]
2025-04-12 23:55:59,666 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [6] as [VARCHAR] - [ORDER_STATUS_CHANGE]
2025-04-12 23:55:59,666 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [7] as [BIGINT] - [3]
2025-04-12 23:55:59,670 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    update
        orders 
    set
        coupon_id=?,
        created_at=?,
        discount_amount=?,
        payment_method=?,
        payment_status=?,
        shipping_address=?,
        status=?,
        total_amount=?,
        updated_at=?,
        user_id=? 
    where
        id=?
2025-04-12 23:55:59,671 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,671 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [TIMESTAMP] - [2025-04-12T23:55:49]
2025-04-12 23:55:59,672 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [3] as [NUMERIC] - [3.60]
2025-04-12 23:55:59,672 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [4] as [VARCHAR] - [cod]
2025-04-12 23:55:59,672 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [5] as [VARCHAR] - [PENDING]
2025-04-12 23:55:59,672 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [6] as [VARCHAR] - [a, 123a, 123]
2025-04-12 23:55:59,672 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [7] as [VARCHAR] - [CANCELLED]
2025-04-12 23:55:59,673 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [8] as [NUMERIC] - [26.39]
2025-04-12 23:55:59,673 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [9] as [TIMESTAMP] - [2025-04-12T23:55:59.670291400]
2025-04-12 23:55:59,673 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [10] as [BIGINT] - [3]
2025-04-12 23:55:59,673 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [11] as [BIGINT] - [42]
2025-04-12 23:55:59,674 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    update
        products 
    set
        average_rating=?,
        category_id=?,
        created_at=?,
        description=?,
        discount_percentage=?,
        image_url=?,
        is_featured=?,
        name=?,
        price=?,
        review_count=?,
        sold_count=?,
        stock=?,
        updated_at=? 
    where
        id=?
2025-04-12 23:55:59,674 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [DOUBLE] - [4.5]
2025-04-12 23:55:59,674 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BIGINT] - [4]
2025-04-12 23:55:59,675 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [3] as [TIMESTAMP] - [2025-04-02T16:06:04]
2025-04-12 23:55:59,675 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [4] as [VARCHAR] - [Comfortable cotton t-shirt]
2025-04-12 23:55:59,675 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [5] as [DOUBLE] - [0.0]
2025-04-12 23:55:59,676 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [6] as [VARCHAR] - [https://example.com/tshirt.jpg]
2025-04-12 23:55:59,676 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [7] as [BOOLEAN] - [false]
2025-04-12 23:55:59,676 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [8] as [VARCHAR] - [Classic T-Shirt]
2025-04-12 23:55:59,676 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [9] as [DOUBLE] - [29.99]
2025-04-12 23:55:59,677 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [10] as [INTEGER] - [250]
2025-04-12 23:55:59,677 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [11] as [INTEGER] - [1000]
2025-04-12 23:55:59,677 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [12] as [INTEGER] - [199]
2025-04-12 23:55:59,677 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [13] as [TIMESTAMP] - [2025-04-12T23:55:59.670291400]
2025-04-12 23:55:59,678 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [14] as [BIGINT] - [3]
2025-04-12 23:55:59,680 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        coupon0_.id as id1_1_0_,
        coupon0_.code as code2_1_0_,
        coupon0_.created_at as created_3_1_0_,
        coupon0_.description as descript4_1_0_,
        coupon0_.discount_type as discount5_1_0_,
        coupon0_.discount_value as discount6_1_0_,
        coupon0_.end_date as end_date7_1_0_,
        coupon0_.expiry_date as expiry_d8_1_0_,
        coupon0_.is_active as is_activ9_1_0_,
        coupon0_.min_purchase_amount as min_pur10_1_0_,
        coupon0_.start_date as start_d11_1_0_,
        coupon0_.type as type12_1_0_,
        coupon0_.updated_at as updated13_1_0_,
        coupon0_.used_count as used_co14_1_0_,
        coupon0_.user_id as user_id15_1_0_ 
    from
        coupons coupon0_ 
    where
        coupon0_.id=?
2025-04-12 23:55:59,681 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,682 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING cancelOrder with result: [<200 OK OK,Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.39, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.60, createdAt=2025-04-12T23:55:49, updatedAt=2025-04-12T23:55:59.670291400),[]>]
2025-04-12 23:55:59,682 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method cancelOrder executed in 31 ms
2025-04-12 23:55:59,683 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:59,683 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,684 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:59,685 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,686 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:59,686 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:59,687 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:59,688 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: PUT /orders/42/cancel
2025-04-12 23:55:59,688 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, content-length=2, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:59,688 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=0ms
2025-04-12 23:55:59,691 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /notifications
2025-04-12 23:55:59,692 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:59,692 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /notifications
2025-04-12 23:55:59,692 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:59,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:59,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:55:59,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,694 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:55:59,694 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:55:59,695 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:55:59,696 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:59,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:59,698 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:59,698 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:55:59,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:59,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@74fdd546, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,700 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /notifications
2025-04-12 23:55:59,701 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:59,702 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,705 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:59,705 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:59,706 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:59,706 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:59,707 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,708 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:55:59,709 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllNotifications executed in 3 ms
2025-04-12 23:55:59,710 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:59,711 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=20ms
2025-04-12 23:55:59,712 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications
2025-04-12 23:55:59,712 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:59,713 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications
2025-04-12 23:55:59,713 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:59,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:59,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,713 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:55:59,714 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,714 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:55:59,715 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:55:59,715 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:55:59,716 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:59,717 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:59,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:59,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,720 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,720 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:55:59,721 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:59,721 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1087ccb5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,721 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications
2025-04-12 23:55:59,722 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:59,723 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,725 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:59,726 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:59,726 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:59,727 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:59,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,729 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:55:59,730 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllNotifications executed in 4 ms
2025-04-12 23:55:59,732 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:59,732 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=20ms
2025-04-12 23:55:59,732 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications
2025-04-12 23:55:59,732 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:59,734 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications
2025-04-12 23:55:59,734 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications, Method: GET
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:55:59,734 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:55:59,738 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:59,738 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:59,739 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:59,740 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,741 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,741 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:55:59,742 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:59,742 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@63226f16, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,742 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications
2025-04-12 23:55:59,743 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:59,744 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,746 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:59,747 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:55:59,747 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:55:59,748 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:55:59,748 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,749 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:55:59,750 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllNotifications executed in 3 ms
2025-04-12 23:55:59,751 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:59,751 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=19ms
2025-04-12 23:55:59,753 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /orders/42
2025-04-12 23:55:59,754 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:55:59,754 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /orders/42
2025-04-12 23:55:59,754 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:55:59,755 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /orders/42, Method: GET
2025-04-12 23:55:59,755 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,755 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:55:59,755 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:55:59,756 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:55:59,756 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:55:59,756 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:55:59,757 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:55:59,758 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:55:59,759 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:55:59,760 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:55:59,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:55:59,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1f1fda49, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:55:59,762 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /orders/42
2025-04-12 23:55:59,763 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:59,763 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.OrderController.getOrderById(java.lang.Long); target is of class [com.example.tmdt.controller.OrderController]
2025-04-12 23:55:59,763 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getOrderById with args: [42]
2025-04-12 23:55:59,764 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        order0_.id as id1_5_0_,
        order0_.coupon_id as coupon_10_5_0_,
        order0_.created_at as created_2_5_0_,
        order0_.discount_amount as discount3_5_0_,
        order0_.payment_method as payment_4_5_0_,
        order0_.payment_status as payment_5_5_0_,
        order0_.shipping_address as shipping6_5_0_,
        order0_.status as status7_5_0_,
        order0_.total_amount as total_am8_5_0_,
        order0_.updated_at as updated_9_5_0_,
        order0_.user_id as user_id11_5_0_ 
    from
        orders order0_ 
    where
        order0_.id=?
2025-04-12 23:55:59,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:59,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:59,767 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        coupon0_.id as id1_1_0_,
        coupon0_.code as code2_1_0_,
        coupon0_.created_at as created_3_1_0_,
        coupon0_.description as descript4_1_0_,
        coupon0_.discount_type as discount5_1_0_,
        coupon0_.discount_value as discount6_1_0_,
        coupon0_.end_date as end_date7_1_0_,
        coupon0_.expiry_date as expiry_d8_1_0_,
        coupon0_.is_active as is_activ9_1_0_,
        coupon0_.min_purchase_amount as min_pur10_1_0_,
        coupon0_.start_date as start_d11_1_0_,
        coupon0_.type as type12_1_0_,
        coupon0_.updated_at as updated13_1_0_,
        coupon0_.used_count as used_co14_1_0_,
        coupon0_.user_id as user_id15_1_0_ 
    from
        coupons coupon0_ 
    where
        coupon0_.id=?
2025-04-12 23:55:59,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,770 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getOrderById with result: [<200 OK OK,Order(id=42, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), totalAmount=26.39, status=CANCELLED, shippingAddress=a, 123a, 123, paymentMethod=cod, paymentStatus=PENDING, coupon=Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38), discountAmount=3.60, createdAt=2025-04-12T23:55:49, updatedAt=2025-04-12T23:55:59),[]>]
2025-04-12 23:55:59,770 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getOrderById executed in 7 ms
2025-04-12 23:55:59,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        orderitems0_.order_id as order_id6_4_0_,
        orderitems0_.id as id1_4_0_,
        orderitems0_.id as id1_4_1_,
        orderitems0_.order_id as order_id6_4_1_,
        orderitems0_.price as price2_4_1_,
        orderitems0_.product_id as product_7_4_1_,
        orderitems0_.product_image_url as product_3_4_1_,
        orderitems0_.product_name as product_4_4_1_,
        orderitems0_.quantity as quantity5_4_1_ 
    from
        order_items orderitems0_ 
    where
        orderitems0_.order_id=?
2025-04-12 23:55:59,771 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [42]
2025-04-12 23:55:59,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:55:59,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,774 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:55:59,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,777 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:55:59,778 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:55:59,778 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:55:59,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:55:59,780 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:55:59,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=28ms
2025-04-12 23:56:00,054 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications
2025-04-12 23:56:00,055 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:00,055 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications
2025-04-12 23:56:00,056 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:00,056 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications, Method: GET
2025-04-12 23:56:00,057 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:00,057 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:56:00,057 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:00,058 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:56:00,058 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:56:00,058 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:56:00,060 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:00,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:00,063 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:00,063 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:00,065 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:00,066 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:56:00,066 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:00,066 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@783307fc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:00,067 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications
2025-04-12 23:56:00,069 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:00,070 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:00,072 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:00,072 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:00,072 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:00,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:56:00,073 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:00,076 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:00,076 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getAllNotifications executed in 4 ms
2025-04-12 23:56:00,076 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:00,076 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=22ms
2025-04-12 23:56:00,689 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-12 23:56:00,689 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:00,690 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications
2025-04-12 23:56:00,690 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-12 23:56:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:56:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:00,692 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:56:00,693 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:56:00,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:56:00,695 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:00,695 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:00,698 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:00,698 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:00,701 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:00,702 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:56:00,702 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:00,702 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@10f43555, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:00,703 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications
2025-04-12 23:56:00,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:00,705 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:00,706 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:00,707 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:00,707 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:00,708 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:56:00,709 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:00,711 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=false, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:00,712 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 5 ms
2025-04-12 23:56:00,713 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:00,713 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=24ms
2025-04-12 23:56:01,284 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /notifications/read-all
2025-04-12 23:56:01,285 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=PUT, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:01,285 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /notifications/read-all
2025-04-12 23:56:01,285 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:01,286 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:01,286 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=3ms
2025-04-12 23:56:01,288 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: PUT /notifications/read-all
2025-04-12 23:56:01,288 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, content-length=0, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:01,289 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /notifications/read-all
2025-04-12 23:56:01,289 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:01,289 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications/read-all, Method: PUT
2025-04-12 23:56:01,289 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:01,289 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:56:01,290 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:01,290 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:56:01,291 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:56:01,291 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:56:01,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:01,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:01,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:01,294 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:01,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:56:01,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:01,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6701321c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:01,297 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured PUT /notifications/read-all
2025-04-12 23:56:01,298 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:01,298 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,300 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAllAsRead(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:01,301 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.markAllAsRead(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:01,301 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING markAllAsRead with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:01,306 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    update
        notifications 
    set
        is_read=1 
    where
        user_id=?
2025-04-12 23:56:01,306 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,310 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING markAllAsRead with result: [<200 OK OK,MessageResponse(message=All notifications marked as read),[]>]
2025-04-12 23:56:01,311 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method markAllAsRead executed in 10 ms
2025-04-12 23:56:01,312 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:01,312 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=24ms
2025-04-12 23:56:01,316 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-12 23:56:01,316 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:01,317 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications
2025-04-12 23:56:01,317 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:01,317 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-12 23:56:01,317 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:01,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:56:01,318 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:01,318 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-12 23:56:01,319 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-12 23:56:01,319 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-12 23:56:01,320 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:01,321 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:01,322 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:01,322 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,323 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:01,324 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-12 23:56:01,324 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:01,324 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2083a91e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:01,324 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications
2025-04-12 23:56:01,326 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:01,327 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,328 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:01,329 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:01,329 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:01,330 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:56:01,331 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,332 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:01,333 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 4 ms
2025-04-12 23:56:01,334 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:01,335 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=19ms
2025-04-12 23:56:01,336 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-12 23:56:01,337 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:01,337 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications
2025-04-12 23:56:01,337 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:01,338 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-12 23:56:01,338 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:01,338 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:56:01,338 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:01,339 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:56:01,340 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:56:01,340 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:56:01,341 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:01,342 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:01,343 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:01,343 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,345 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:01,345 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:56:01,345 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:01,345 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@567f5a7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:01,346 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications
2025-04-12 23:56:01,347 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:01,348 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,349 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:01,350 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:01,350 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:01,351 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:56:01,352 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:01,354 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:01,354 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 4 ms
2025-04-12 23:56:01,356 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:01,356 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=20ms
2025-04-12 23:56:02,974 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-12 23:56:02,976 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:02,976 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=6
2025-04-12 23:56:02,976 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:02,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:02,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:02,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:56:02,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:02,978 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:56:02,979 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:56:02,979 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:56:02,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:02,981 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:02,982 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:02,983 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:02,985 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:02,985 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:56:02,986 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:02,986 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4c2c104f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:02,986 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=6
2025-04-12 23:56:02,987 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-12 23:56:02,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:02,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:02,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:02,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:02,993 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:02,994 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:02,995 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:02,996 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:02,997 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 10 ms
2025-04-12 23:56:02,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:02,998 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:02,999 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:03,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:03,001 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:03,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:03,003 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,003 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:03,003 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:03,004 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:03,005 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,005 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:03,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,007 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:03,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:03,008 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,008 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:03,010 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:03,010 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=36ms
2025-04-12 23:56:03,012 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-12 23:56:03,012 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:03,012 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=6
2025-04-12 23:56:03,012 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:03,013 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:03,013 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:03,013 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:56:03,013 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:03,014 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:56:03,014 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:56:03,014 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:56:03,015 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:03,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:03,017 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:03,018 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:03,019 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:03,019 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:56:03,019 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:03,019 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6459d265, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:03,020 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=6
2025-04-12 23:56:03,020 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts
2025-04-12 23:56:03,021 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:03,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:03,023 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:03,024 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:03,025 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:03,025 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:03,026 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:03,027 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:03,027 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 7 ms
2025-04-12 23:56:03,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,028 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:03,029 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,030 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:03,030 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:03,031 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:03,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,032 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:03,033 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,034 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:03,035 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:03,036 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:03,037 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,037 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:03,038 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,038 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:03,039 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:03,040 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:03,040 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:03,041 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:03,042 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:03,042 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=31ms
2025-04-12 23:56:04,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /notifications/unread-count
2025-04-12 23:56:04,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-12 23:56:04,835 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:04,836 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:04,836 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /notifications/unread-count
2025-04-12 23:56:04,836 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications
2025-04-12 23:56:04,837 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:04,837 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:04,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:56:04,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-12 23:56:04,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:04,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:04,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:56:04,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:56:04,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:04,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:04,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:56:04,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:56:04,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:56:04,839 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:56:04,839 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:56:04,840 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:56:04,840 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:04,840 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:04,841 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:04,841 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:04,842 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:04,842 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:04,843 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:04,843 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:04,844 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7787d801, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:04,846 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7beb615f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:04,846 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications
2025-04-12 23:56:04,846 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /notifications/unread-count
2025-04-12 23:56:04,846 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:04,846 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:04,847 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:04,848 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:04,849 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:04,849 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:04,849 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:04,849 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:04,849 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:04,849 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:04,850 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:56:04,850 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:56:04,850 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:04,850 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:04,851 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:56:04,851 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getUnreadCount executed in 2 ms
2025-04-12 23:56:04,851 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:04,852 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 3 ms
2025-04-12 23:56:04,852 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:04,852 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=18ms
2025-04-12 23:56:04,853 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:04,853 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=19ms
2025-04-12 23:56:35,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications/unread-count
2025-04-12 23:56:35,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications
2025-04-12 23:56:35,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:35,768 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications/unread-count
2025-04-12 23:56:35,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:35,769 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications
2025-04-12 23:56:35,769 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:35,770 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:35,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:56:35,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications, Method: GET
2025-04-12 23:56:35,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:35,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:35,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:56:35,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:56:35,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:35,772 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:35,772 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:56:35,772 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:56:35,773 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:56:35,773 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:56:35,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:56:35,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:56:35,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:35,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:35,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:35,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:35,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:35,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:35,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:35,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:35,778 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:35,778 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:35,778 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:56:35,778 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:56:35,778 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:35,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:35,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@31115d29, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:35,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4556f5d2, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:35,779 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications
2025-04-12 23:56:35,779 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications/unread-count
2025-04-12 23:56:35,780 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:35,780 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:35,780 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:35,781 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:35,781 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:35,782 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:35,782 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:35,782 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:56:35,782 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:35,782 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:35,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:56:35,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:56:35,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:35,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:35,784 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:56:35,784 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:35,784 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getUnreadCount executed in 2 ms
2025-04-12 23:56:35,784 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllNotifications executed in 2 ms
2025-04-12 23:56:35,785 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:35,785 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:35,785 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=19ms
2025-04-12 23:56:35,785 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=19ms
2025-04-12 23:56:49,561 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products
2025-04-12 23:56:49,562 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /wishlist
2025-04-12 23:56:49,562 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,562 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,562 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products?sort=newest
2025-04-12 23:56:49,562 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /wishlist
2025-04-12 23:56:49,563 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,563 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products, Method: GET
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /wishlist, Method: GET
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,563 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,564 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-12 23:56:49,564 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /categories
2025-04-12 23:56:49,564 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:56:49,564 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,564 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:56:49,564 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/recommended
2025-04-12 23:56:49,565 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /categories
2025-04-12 23:56:49,564 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,565 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-12 23:56:49,565 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,565 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,565 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/recommended?limit=4
2025-04-12 23:56:49,565 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:56:49,565 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:56:49,565 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:56:49,565 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:56:49,566 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,566 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,566 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /categories, Method: GET
2025-04-12 23:56:49,566 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,566 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/recommended, Method: GET
2025-04-12 23:56:49,566 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,566 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,566 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,566 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,566 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,567 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:56:49,567 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,567 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,567 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:56:49,567 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:56:49,568 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,567 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,568 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,568 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:56:49,569 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:56:49,569 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:56:49,569 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:56:49,569 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,569 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,570 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,569 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:56:49,570 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,569 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:56:49,569 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:56:49,570 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:56:49,570 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:56:49,571 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,572 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,572 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,572 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,572 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,572 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,572 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,573 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,573 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:56:49,573 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:56:49,573 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,573 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,574 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5cdaac28, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,574 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@960c5c6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,575 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products?sort=newest
2025-04-12 23:56:49,574 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,575 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /wishlist
2025-04-12 23:56:49,574 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,574 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,575 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,576 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllProducts
2025-04-12 23:56:49,582 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,582 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,582 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-12 23:56:49,583 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:56:49,583 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,583 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,584 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,584 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:56:49,584 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,584 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:56:49,585 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,585 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1d661dbe, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,585 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,585 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1d623e16, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,586 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /categories
2025-04-12 23:56:49,586 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/recommended?limit=4
2025-04-12 23:56:49,586 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@587f100c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,586 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-12 23:56:49,586 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,586 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:56:49,587 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllCategories
2025-04-12 23:56:49,587 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-12 23:56:49,587 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,587 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:56:49,587 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getRecommendedProducts with args: [4]
2025-04-12 23:56:49,587 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:49,587 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,587 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,588 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-8] Get wishlist request for user: 3
2025-04-12 23:56:49,588 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-12 23:56:49,589 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,590 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,590 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,590 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,590 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-12 23:56:49,591 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,591 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,591 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,591 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-12 23:56:49,593 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllCategories executed in 6 ms
2025-04-12 23:56:49,593 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,593 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,593 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,594 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,594 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,595 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,593 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:56:49,593 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,596 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,596 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,596 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,597 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,597 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,597 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41)],[]>]
2025-04-12 23:56:49,598 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,597 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,598 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllProducts executed in 22 ms
2025-04-12 23:56:49,598 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,598 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,599 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,599 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,599 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,600 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,599 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,599 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,600 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getRecommendedProducts executed in 13 ms
2025-04-12 23:56:49,600 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@59f41e6e],[]>]
2025-04-12 23:56:49,601 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,600 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 13 ms
2025-04-12 23:56:49,601 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getWishlist executed in 14 ms
2025-04-12 23:56:49,601 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,601 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,601 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,601 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,601 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,602 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,602 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,602 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,602 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=40ms
2025-04-12 23:56:49,603 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,603 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,603 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,604 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,603 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,604 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,604 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,604 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=40ms
2025-04-12 23:56:49,604 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,606 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,606 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /wishlist
2025-04-12 23:56:49,606 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,606 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,607 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /wishlist
2025-04-12 23:56:49,606 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,606 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,607 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,607 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,608 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,607 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /categories
2025-04-12 23:56:49,608 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,608 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /categories
2025-04-12 23:56:49,608 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,608 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,608 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /wishlist, Method: GET
2025-04-12 23:56:49,608 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,609 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,608 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,609 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,609 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,610 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,610 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:56:49,610 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,610 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /categories, Method: GET
2025-04-12 23:56:49,611 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,611 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:56:49,611 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,611 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,611 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,612 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,611 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,612 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,611 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:56:49,612 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-12 23:56:49,612 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,613 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:56:49,613 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-12 23:56:49,613 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:56:49,613 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-12 23:56:49,613 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,613 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,613 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,613 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,614 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,614 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,613 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,614 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,615 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,615 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,616 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,616 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,616 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,616 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,617 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,616 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,617 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,616 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,617 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,618 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,618 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,618 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,619 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,619 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,618 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,619 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,620 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,619 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,620 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-12 23:56:49,620 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:56:49,620 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,620 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,620 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,620 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,620 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@26864077, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,621 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,621 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,620 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,621 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /categories
2025-04-12 23:56:49,621 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4718a175, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,621 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /wishlist
2025-04-12 23:56:49,622 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,623 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,622 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllCategories
2025-04-12 23:56:49,623 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,623 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,623 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=62ms
2025-04-12 23:56:49,623 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,624 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,623 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,624 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-12 23:56:49,624 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,626 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,626 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,627 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products
2025-04-12 23:56:49,627 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:56:49,627 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,627 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=63ms
2025-04-12 23:56:49,627 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products?sort=newest
2025-04-12 23:56:49,627 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=63ms
2025-04-12 23:56:49,627 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-12 23:56:49,628 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-12 23:56:49,628 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,628 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllCategories executed in 6 ms
2025-04-12 23:56:49,628 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:49,628 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-6] Get wishlist request for user: 3
2025-04-12 23:56:49,628 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products, Method: GET
2025-04-12 23:56:49,629 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,629 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,629 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:56:49,629 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,629 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-12 23:56:49,629 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,629 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/recommended
2025-04-12 23:56:49,630 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,630 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,630 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-12 23:56:49,630 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:56:49,631 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/recommended?limit=4
2025-04-12 23:56:49,631 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,631 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=4
2025-04-12 23:56:49,631 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,631 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,631 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,631 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:56:49,632 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,632 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:56:49,632 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/recommended, Method: GET
2025-04-12 23:56:49,632 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,632 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-12 23:56:49,632 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,632 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,633 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:56:49,633 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:56:49,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,633 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,633 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,633 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,634 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:56:49,634 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:56:49,634 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,634 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,635 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:56:49,634 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,635 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,635 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:56:49,635 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:56:49,636 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,635 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-12 23:56:49,636 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:56:49,636 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,637 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,637 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,637 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,638 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@35d6ce02],[]>]
2025-04-12 23:56:49,638 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,638 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=31ms
2025-04-12 23:56:49,638 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getWishlist executed in 10 ms
2025-04-12 23:56:49,638 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:56:49,638 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,638 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,639 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,638 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,639 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,639 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7f15fa1e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,639 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,640 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products?sort=newest
2025-04-12 23:56:49,640 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=34ms
2025-04-12 23:56:49,640 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,640 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,640 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllProducts
2025-04-12 23:56:49,641 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,641 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:56:49,641 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-12 23:56:49,642 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,642 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@647fafd0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,642 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,642 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/recommended?limit=4
2025-04-12 23:56:49,642 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:56:49,643 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,643 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@297fc8b5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,643 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=4
2025-04-12 23:56:49,643 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,643 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getRecommendedProducts with args: [4]
2025-04-12 23:56:49,644 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,644 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,644 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-12 23:56:49,646 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,646 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,646 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,646 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,647 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,647 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,647 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,648 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,648 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,648 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,649 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,649 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,649 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,650 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,649 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41)],[]>]
2025-04-12 23:56:49,650 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllProducts executed in 10 ms
2025-04-12 23:56:49,650 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,651 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,651 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,651 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,651 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getRecommendedProducts executed in 8 ms
2025-04-12 23:56:49,652 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,652 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,652 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,653 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,653 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,653 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,653 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,653 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 9 ms
2025-04-12 23:56:49,653 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,653 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,653 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,653 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,654 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,654 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,655 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,655 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,656 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,656 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,655 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,656 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,657 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,657 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,658 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,658 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,657 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,659 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,659 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,659 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,659 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,660 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,660 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,660 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,661 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,661 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,661 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,662 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,662 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,663 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,663 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,663 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,664 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,663 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,664 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,664 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,665 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,666 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,666 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,666 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,666 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,666 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,667 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,667 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,668 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,667 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,668 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,668 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,669 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,669 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,669 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,669 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,670 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,670 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=44ms
2025-04-12 23:56:49,671 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,670 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,671 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=42ms
2025-04-12 23:56:49,671 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,673 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,673 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=43ms
2025-04-12 23:56:49,674 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-12 23:56:49,676 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,676 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=4
2025-04-12 23:56:49,676 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,677 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,677 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,677 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:56:49,677 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,678 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:56:49,678 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:56:49,679 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:56:49,680 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,681 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,682 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,682 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:56:49,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,684 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@71ee6216, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,684 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=4
2025-04-12 23:56:49,684 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts
2025-04-12 23:56:49,685 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,687 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,687 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,688 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,689 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,690 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,690 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,691 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,691 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 7 ms
2025-04-12 23:56:49,691 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,693 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,693 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,694 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,695 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,696 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,698 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,699 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,700 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,700 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,701 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,702 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,704 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,705 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,706 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,706 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=32ms
2025-04-12 23:56:49,707 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-12 23:56:49,708 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,708 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4
2025-04-12 23:56:49,708 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,709 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,709 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,709 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:56:49,709 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,710 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:56:49,710 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:56:49,710 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:56:49,711 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,712 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,712 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,713 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,715 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,715 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:56:49,715 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,715 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@178b68ba, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,716 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4
2025-04-12 23:56:49,716 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-12 23:56:49,717 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,720 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,720 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,721 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,722 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,723 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,723 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 7 ms
2025-04-12 23:56:49,723 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,724 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,725 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,725 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,727 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,728 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,729 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,730 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,732 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,732 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,733 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,733 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,734 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,736 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,736 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,737 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,738 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=32ms
2025-04-12 23:56:49,740 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-12 23:56:49,740 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,741 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4
2025-04-12 23:56:49,741 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,741 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,741 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,742 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-12 23:56:49,742 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-12 23:56:49,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-12 23:56:49,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-12 23:56:49,744 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,745 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,745 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,746 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,747 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,747 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-12 23:56:49,748 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,748 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@14b69a84, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,748 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4
2025-04-12 23:56:49,749 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-12 23:56:49,750 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,751 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,752 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,752 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,753 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,753 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,754 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,755 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,755 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 6 ms
2025-04-12 23:56:49,756 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,757 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,758 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,758 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,759 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,760 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,760 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,761 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,763 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,764 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,764 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,766 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,767 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,767 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,768 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,769 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,771 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,771 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=31ms
2025-04-12 23:56:49,772 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-12 23:56:49,772 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,773 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4
2025-04-12 23:56:49,773 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:56:49,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,774 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:56:49,774 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:56:49,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:56:49,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,777 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:56:49,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,779 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@336a932d, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,779 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4
2025-04-12 23:56:49,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-12 23:56:49,780 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,782 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,782 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,784 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,785 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,785 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,786 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,787 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 7 ms
2025-04-12 23:56:49,787 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,788 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,791 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,793 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,794 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,795 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,795 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,797 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,798 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,799 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,800 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,800 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,801 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,801 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,802 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,802 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,803 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,803 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=31ms
2025-04-12 23:56:49,805 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-12 23:56:49,806 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,806 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-12 23:56:49,806 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,806 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,807 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,807 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-12 23:56:49,807 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,807 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-12 23:56:49,808 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-12 23:56:49,808 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-12 23:56:49,809 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,809 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,810 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,811 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-12 23:56:49,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,813 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2d68dd97, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,813 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-12 23:56:49,814 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-12 23:56:49,814 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,816 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,817 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,818 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,818 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,819 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,820 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,820 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,821 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 7 ms
2025-04-12 23:56:49,821 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,822 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,823 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,823 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,823 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,824 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,825 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,825 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,826 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,827 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,828 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,828 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,829 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,829 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,830 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,830 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,831 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,831 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,832 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,833 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,834 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,834 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=29ms
2025-04-12 23:56:49,835 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-12 23:56:49,835 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:49,836 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4
2025-04-12 23:56:49,836 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:49,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-12 23:56:49,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:56:49,837 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:49,837 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-12 23:56:49,838 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-12 23:56:49,838 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-12 23:56:49,839 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:49,840 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:49,840 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:49,841 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,842 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,842 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-12 23:56:49,842 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:49,842 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@c9eee42, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:49,842 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4
2025-04-12 23:56:49,842 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts
2025-04-12 23:56:49,844 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-12 23:56:49,845 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,846 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,847 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,848 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,848 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-12 23:56:49,849 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,849 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=28, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:01), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=49, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T17:47:03), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=151, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-10T18:02:41), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:56:49,850 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 8 ms
2025-04-12 23:56:49,850 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,851 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,851 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,852 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,856 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,857 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,858 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,859 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,861 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,862 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-12 23:56:49,863 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:49,863 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-12 23:56:49,865 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,866 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,868 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-12 23:56:49,868 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-12 23:56:49,869 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,870 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-12 23:56:49,870 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:49,871 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:49,871 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=36ms
2025-04-12 23:56:52,509 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /coupons/my-coupons
2025-04-12 23:56:52,509 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:52,509 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /coupons/my-coupons
2025-04-12 23:56:52,510 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:52,510 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-12 23:56:52,510 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:52,510 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:56:52,511 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:52,511 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:56:52,511 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:56:52,512 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:56:52,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:52,513 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:52,514 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:52,515 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:52,516 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:52,516 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:56:52,517 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:52,517 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6ef45db9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:52,517 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /coupons/my-coupons
2025-04-12 23:56:52,518 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:52,519 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:52,520 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:56:52,521 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:56:52,521 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:52,521 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-6] Getting coupons for user: 3
2025-04-12 23:56:52,522 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-12 23:56:52,523 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:52,524 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [2] as [BOOLEAN] - [true]
2025-04-12 23:56:52,524 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [3] as [TIMESTAMP] - [2025-04-12T23:56:52.522919400]
2025-04-12 23:56:52,527 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38)],[]>]
2025-04-12 23:56:52,528 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getMyCoupons executed in 7 ms
2025-04-12 23:56:52,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:52,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=21ms
2025-04-12 23:56:52,530 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /coupons/my-coupons
2025-04-12 23:56:52,531 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:56:52,531 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /coupons/my-coupons
2025-04-12 23:56:52,531 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:56:52,532 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /coupons/my-coupons, Method: GET
2025-04-12 23:56:52,532 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:52,532 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:56:52,532 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:56:52,532 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:56:52,533 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:56:52,533 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:56:52,534 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:56:52,535 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:56:52,536 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:56:52,536 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:52,538 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:52,538 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:56:52,538 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:56:52,538 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1fc20a24, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:56:52,538 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /coupons/my-coupons
2025-04-12 23:56:52,540 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:56:52,540 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:52,542 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:56:52,542 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.CouponController.getMyCoupons(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.CouponController]
2025-04-12 23:56:52,543 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getMyCoupons with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:56:52,543 INFO com.example.tmdt.controller.CouponController [http-nio-8080-exec-3] Getting coupons for user: 3
2025-04-12 23:56:52,544 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        coupon0_.id as id1_1_,
        coupon0_.code as code2_1_,
        coupon0_.created_at as created_3_1_,
        coupon0_.description as descript4_1_,
        coupon0_.discount_type as discount5_1_,
        coupon0_.discount_value as discount6_1_,
        coupon0_.end_date as end_date7_1_,
        coupon0_.expiry_date as expiry_d8_1_,
        coupon0_.is_active as is_activ9_1_,
        coupon0_.min_purchase_amount as min_pur10_1_,
        coupon0_.start_date as start_d11_1_,
        coupon0_.type as type12_1_,
        coupon0_.updated_at as updated13_1_,
        coupon0_.used_count as used_co14_1_,
        coupon0_.user_id as user_id15_1_ 
    from
        coupons coupon0_ 
    where
        coupon0_.user_id=? 
        and coupon0_.is_active=? 
        and coupon0_.expiry_date>?
2025-04-12 23:56:52,545 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:56:52,546 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BOOLEAN] - [true]
2025-04-12 23:56:52,546 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [3] as [TIMESTAMP] - [2025-04-12T23:56:52.543938600]
2025-04-12 23:56:52,547 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getMyCoupons with result: [<200 OK OK,[Coupon(id=3, code=c, description=a, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), type=GENERAL, discountType=PERCENTAGE, discountValue=12.00, minPurchaseAmount=1.00, usedCount=0, startDate=2025-04-04T15:31:38, endDate=2025-05-04T15:31:38, isActive=true, createdAt=2025-04-04T22:31:48, updatedAt=2025-04-04T22:36:57, expiryDate=2025-05-04T15:31:38)],[]>]
2025-04-12 23:56:52,548 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getMyCoupons executed in 5 ms
2025-04-12 23:56:52,549 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:56:52,549 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=19ms
2025-04-12 23:57:05,282 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications
2025-04-12 23:57:05,282 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications/unread-count
2025-04-12 23:57:05,283 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:57:05,283 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:57:05,283 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications/unread-count
2025-04-12 23:57:05,283 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications
2025-04-12 23:57:05,284 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:57:05,284 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:57:05,284 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications, Method: GET
2025-04-12 23:57:05,284 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:57:05,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:05,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:05,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:57:05,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:57:05,286 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:05,286 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:05,287 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:57:05,287 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:57:05,288 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:57:05,288 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:57:05,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:57:05,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:57:05,289 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:57:05,289 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:57:05,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:57:05,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:57:05,292 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:57:05,292 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:57:05,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:05,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:05,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:05,295 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:05,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:57:05,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:57:05,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:57:05,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:57:05,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2ddd215e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:05,297 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@66d72553, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:05,297 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications/unread-count
2025-04-12 23:57:05,297 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications
2025-04-12 23:57:05,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:57:05,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:57:05,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:05,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:05,304 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:05,304 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:05,305 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:05,305 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:05,306 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:57:05,306 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:57:05,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:57:05,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:57:05,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:05,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:05,309 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:57:05,310 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:57:05,310 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getUnreadCount executed in 4 ms
2025-04-12 23:57:05,311 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getAllNotifications executed in 5 ms
2025-04-12 23:57:05,312 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:57:05,312 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:57:05,313 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=31ms
2025-04-12 23:57:05,313 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=31ms
2025-04-12 23:57:35,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications
2025-04-12 23:57:35,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications/unread-count
2025-04-12 23:57:35,783 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:57:35,783 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications
2025-04-12 23:57:35,783 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:57:35,784 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications/unread-count
2025-04-12 23:57:35,784 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:57:35,784 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:57:35,784 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications, Method: GET
2025-04-12 23:57:35,784 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:57:35,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:35,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:35,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:57:35,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:57:35,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:35,786 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:57:35,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:57:35,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:57:35,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:57:35,787 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:57:35,787 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:57:35,787 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:57:35,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:57:35,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:57:35,789 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:57:35,789 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:57:35,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:57:35,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:57:35,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:35,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:35,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:35,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:35,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:57:35,791 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:57:35,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:57:35,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:57:35,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3a9ecc9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:35,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3ed27d19, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:57:35,792 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications/unread-count
2025-04-12 23:57:35,792 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications
2025-04-12 23:57:35,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:57:35,793 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:35,793 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:57:35,794 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:35,794 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:35,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:35,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:35,795 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:57:35,795 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:57:35,795 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:57:35,795 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:57:35,795 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:57:35,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:35,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:57:35,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:57:35,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:57:35,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getUnreadCount executed in 2 ms
2025-04-12 23:57:35,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllNotifications executed in 2 ms
2025-04-12 23:57:35,798 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:57:35,798 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:57:35,798 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=16ms
2025-04-12 23:57:35,798 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=16ms
2025-04-12 23:58:05,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /notifications
2025-04-12 23:58:05,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /notifications/unread-count
2025-04-12 23:58:05,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:58:05,767 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /notifications
2025-04-12 23:58:05,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:58:05,767 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /notifications/unread-count
2025-04-12 23:58:05,767 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:58:05,767 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /notifications, Method: GET
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:05,768 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:05,769 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-12 23:58:05,769 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-12 23:58:05,769 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-12 23:58:05,769 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-12 23:58:05,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-12 23:58:05,769 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-12 23:58:05,770 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:58:05,770 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:58:05,771 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:58:05,771 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:58:05,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:58:05,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:58:05,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:05,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:05,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:05,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:05,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-12 23:58:05,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-12 23:58:05,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:58:05,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:58:05,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5c93378, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:05,774 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2a2c815c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:05,774 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /notifications
2025-04-12 23:58:05,774 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /notifications/unread-count
2025-04-12 23:58:05,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:58:05,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:58:05,775 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:05,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:05,777 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:05,777 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:05,777 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:05,777 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:05,777 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:58:05,778 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:58:05,778 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:58:05,778 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:58:05,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:05,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:05,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:58:05,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:58:05,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getUnreadCount executed in 2 ms
2025-04-12 23:58:05,781 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllNotifications executed in 4 ms
2025-04-12 23:58:05,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-12 23:58:05,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-12 23:58:05,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=17ms
2025-04-12 23:58:05,782 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=17ms
2025-04-12 23:58:35,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /notifications
2025-04-12 23:58:35,767 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /notifications/unread-count
2025-04-12 23:58:35,768 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:58:35,769 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /notifications
2025-04-12 23:58:35,768 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:58:35,769 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /notifications/unread-count
2025-04-12 23:58:35,769 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:58:35,769 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /notifications, Method: GET
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-12 23:58:35,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:58:35,771 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-12 23:58:35,771 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-12 23:58:35,771 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-12 23:58:35,771 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-12 23:58:35,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-12 23:58:35,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-12 23:58:35,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:58:35,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:58:35,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:58:35,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:58:35,773 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:58:35,773 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:58:35,774 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:35,774 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@fc18a1f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:35,775 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5732703b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:58:35,775 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /notifications/unread-count
2025-04-12 23:58:35,775 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /notifications
2025-04-12 23:58:35,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:58:35,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:35,776 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:58:35,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:35,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:35,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:35,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:35,778 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:58:35,778 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:58:35,778 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:58:35,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:58:35,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:58:35,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:35,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:58:35,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:58:35,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:58:35,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getUnreadCount executed in 2 ms
2025-04-12 23:58:35,780 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllNotifications executed in 2 ms
2025-04-12 23:58:35,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-12 23:58:35,781 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-12 23:58:35,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=14ms
2025-04-12 23:58:35,781 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=14ms
2025-04-12 23:59:21,761 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /notifications
2025-04-12 23:59:21,761 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /notifications/unread-count
2025-04-12 23:59:21,762 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:59:21,762 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:59:21,763 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /notifications
2025-04-12 23:59:21,763 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /notifications/unread-count
2025-04-12 23:59:21,763 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:59:21,763 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:59:21,763 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /notifications, Method: GET
2025-04-12 23:59:21,763 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:59:21,764 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:21,764 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:21,765 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-12 23:59:21,765 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-12 23:59:21,765 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:21,765 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:21,765 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-12 23:59:21,765 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-12 23:59:21,766 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-12 23:59:21,766 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-12 23:59:21,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-12 23:59:21,766 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-12 23:59:21,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:59:21,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:59:21,768 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:59:21,768 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:59:21,769 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:59:21,769 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:59:21,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:21,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:21,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:21,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:21,770 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-12 23:59:21,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-12 23:59:21,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:59:21,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:59:21,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@25deb4ad, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:21,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7e5b4330, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:21,771 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /notifications
2025-04-12 23:59:21,771 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /notifications/unread-count
2025-04-12 23:59:21,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:59:21,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:59:21,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:21,773 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:21,774 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:21,774 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:21,774 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:21,774 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:21,774 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:59:21,774 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:59:21,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:59:21,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:59:21,775 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:21,776 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:21,776 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:59:21,776 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getUnreadCount executed in 2 ms
2025-04-12 23:59:21,776 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:59:21,777 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllNotifications executed in 3 ms
2025-04-12 23:59:21,777 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-12 23:59:21,777 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=16ms
2025-04-12 23:59:21,777 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-12 23:59:21,778 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=17ms
2025-04-12 23:59:35,759 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /notifications
2025-04-12 23:59:35,759 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /notifications/unread-count
2025-04-12 23:59:35,759 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:59:35,759 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Microsoft Edge";v="135", "Not-A.Brand";v="8", "Chromium";v="135", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-12 23:59:35,760 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /notifications
2025-04-12 23:59:35,760 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /notifications/unread-count
2025-04-12 23:59:35,760 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:59:35,760 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-12 23:59:35,760 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /notifications, Method: GET
2025-04-12 23:59:35,760 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /notifications/unread-count, Method: GET
2025-04-12 23:59:35,760 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:35,760 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0NDQ3NjkzNCwiZXhwIjoxNzQ0NTYzMzM0fQ.kgmbTfuwsYA9E0SGC0F8qL7bjR4N69lB0aBCKJ26vU_KpY5vy0dp5FImbAmfbQAZUyQk1Nt3bg8Lc2o7yGebwA
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-12 23:59:35,761 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-12 23:59:35,762 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-12 23:59:35,762 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-12 23:59:35,762 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-12 23:59:35,763 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:59:35,763 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-12 23:59:35,764 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:59:35,764 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-12 23:59:35,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:59:35,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-12 23:59:35,766 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:35,766 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7305c3c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:35,767 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@65d4e669, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-12 23:59:35,767 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /notifications/unread-count
2025-04-12 23:59:35,767 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /notifications
2025-04-12 23:59:35,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:59:35,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-12 23:59:35,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:35,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:35,770 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:35,770 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:35,771 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getAllNotifications(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:35,771 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.NotificationController.getUnreadCount(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.NotificationController]
2025-04-12 23:59:35,771 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getAllNotifications with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:59:35,771 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getUnreadCount with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=)]
2025-04-12 23:59:35,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        count(notificati0_.id) as col_0_0_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=? 
        and notificati0_.is_read=0
2025-04-12 23:59:35,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        notificati0_.id as id1_3_,
        notificati0_.created_at as created_2_3_,
        notificati0_.is_read as is_read3_3_,
        notificati0_.message as message4_3_,
        notificati0_.reference_id as referenc5_3_,
        notificati0_.title as title6_3_,
        notificati0_.type as type7_3_,
        notificati0_.user_id as user_id8_3_ 
    from
        notifications notificati0_ 
    where
        notificati0_.user_id=?
2025-04-12 23:59:35,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:35,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-12 23:59:35,773 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getUnreadCount with result: [<200 OK OK,0,[]>]
2025-04-12 23:59:35,773 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getAllNotifications with result: [<200 OK OK,[Notification(id=19, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #38 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 2023.98 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=38, isRead=true, createdAt=2025-04-10T17:47:03), Notification(id=20, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #39 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:20), Notification(id=21, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #39 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=39, isRead=true, createdAt=2025-04-10T17:50:40), Notification(id=22, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #40 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 1143.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T17:51:14), Notification(id=23, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #40 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=40, isRead=true, createdAt=2025-04-10T18:02:01), Notification(id=24, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #41 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 43.99 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:25), Notification(id=25, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #41 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=41, isRead=true, createdAt=2025-04-10T18:02:41), Notification(id=26, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??t hng thnh cng, message=??n hng #42 c?a b?n ? ???c ??t thnh cng. T?ng ti?n: 26.39 VND. C?m ?n b?n ? mua s?m!, type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:49), Notification(id=27, user=User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=), title=??n hng ? b? h?y, message=??n hng #42 c?a b?n ? b? h?y., type=ORDER_STATUS_CHANGE, referenceId=42, isRead=true, createdAt=2025-04-12T23:55:59)],[]>]
2025-04-12 23:59:35,773 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getUnreadCount executed in 2 ms
2025-04-12 23:59:35,773 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getAllNotifications executed in 2 ms
2025-04-12 23:59:35,774 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-12 23:59:35,774 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-12 23:59:35,775 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=16ms
2025-04-12 23:59:35,775 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=16ms
