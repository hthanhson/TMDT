2025-04-03 22:07:41,133 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 15528 (E:\tmdt\backend\target\classes started by leloi in E:\tmdt\backend)
2025-04-03 22:07:41,136 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-03 22:07:41,691 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-03 22:07:41,760 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 61 ms. Found 15 JPA repository interfaces.
2025-04-03 22:07:42,403 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-03 22:07:42,411 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-03 22:07:42,413 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-03 22:07:42,413 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-03 22:07:42,506 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-03 22:07:42,506 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1332 ms
2025-04-03 22:07:43,008 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:07:43,144 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-03 22:07:43,881 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:07:44,287 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-03 22:07:46,507 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7d364bce, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1aa7d66e, org.springframework.security.web.context.SecurityContextPersistenceFilter@4a648b35, org.springframework.security.web.header.HeaderWriterFilter@2453cbb7, org.springframework.web.filter.CorsFilter@35bd8bc9, org.springframework.security.web.authentication.logout.LogoutFilter@6d58ed12, com.example.tmdt.security.jwt.AuthTokenFilter@5f3fafca, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51577fc8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@753cfae3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5cc85ffc, org.springframework.security.web.session.SessionManagementFilter@61799152, org.springframework.security.web.access.ExceptionTranslationFilter@386b4f7e, org.springframework.security.web.access.intercept.AuthorizationFilter@72769bf5]
2025-04-03 22:07:46,658 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-03 22:07:47,441 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2025-04-03 22:07:47,503 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2025-04-03 22:07:47,520 INFO org.springframework.boot.StartupInfoLogger [main] Started TmdtApplication in 6.788 seconds (JVM running for 8.13)
2025-04-03 22:07:47,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [main] 
    select
        count(*) as col_0_0_ 
    from
        roles role0_
2025-04-03 22:10:10,207 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-03 22:10:10,208 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2025-04-03 22:10:10,209 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2025-04-03 22:10:10,228 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:10:10,229 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:10,243 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=6
2025-04-03 22:10:10,251 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:10,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:10:10,296 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:10,485 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:10:10,486 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:10:10,487 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:10:10,559 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:10,564 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:10,627 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:10,629 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:10,725 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:10,736 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=6
2025-04-03 22:10:10,810 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:10:10,820 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:10,830 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:10,831 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:10,861 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:10,862 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:10,864 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:10,866 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:10,934 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:10,935 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 129 ms
2025-04-03 22:10:11,061 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,074 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,089 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:11,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:11,099 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,099 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:11,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,103 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:11,106 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:11,106 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,108 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,109 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:11,112 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:11,116 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,117 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:11,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,121 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:11,133 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:11,134 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=915ms
2025-04-03 22:10:11,140 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:10:11,140 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:11,140 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=6
2025-04-03 22:10:11,140 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:11,141 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:10:11,141 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:11,142 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:10:11,143 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:10:11,144 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:10:11,145 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:11,146 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:11,148 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:11,148 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:11,151 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:11,151 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=6
2025-04-03 22:10:11,152 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:10:11,152 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:11,155 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:11,157 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:11,159 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:11,161 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,163 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:11,164 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:11,166 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:11,168 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 16 ms
2025-04-03 22:10:11,169 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,169 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,171 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,172 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,174 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:11,174 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:11,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:11,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,181 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:11,184 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:11,184 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:11,186 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,187 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:11,189 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,190 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:11,191 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:11,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:11,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:11,195 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:11,198 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:11,199 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=59ms
2025-04-03 22:10:48,166 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products
2025-04-03 22:10:48,166 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /wishlist
2025-04-03 22:10:48,166 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,166 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,166 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products?sort=newest
2025-04-03 22:10:48,166 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /wishlist
2025-04-03 22:10:48,167 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,167 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,167 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:10:48,167 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:10:48,167 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-03 22:10:48,167 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,167 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,167 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,168 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4
2025-04-03 22:10:48,168 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,169 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:10:48,169 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:10:48,169 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:10:48,169 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,170 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /categories
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:10:48,170 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:10:48,170 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /categories
2025-04-03 22:10:48,170 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:10:48,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:10:48,170 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/recommended
2025-04-03 22:10:48,171 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:10:48,171 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,171 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,171 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/recommended?limit=4
2025-04-03 22:10:48,171 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,172 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:10:48,172 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,172 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,173 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,173 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,173 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,173 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:10:48,173 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,173 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,174 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:10:48,174 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:10:48,174 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:10:48,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,175 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:10:48,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,175 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:10:48,175 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,175 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,175 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,175 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,175 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,177 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,177 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,177 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,177 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,178 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4
2025-04-03 22:10:48,178 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,179 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,179 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,179 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products?sort=newest
2025-04-03 22:10:48,180 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /categories
2025-04-03 22:10:48,180 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /wishlist
2025-04-03 22:10:48,180 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts
2025-04-03 22:10:48,180 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllCategories
2025-04-03 22:10:48,180 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllProducts
2025-04-03 22:10:48,181 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,181 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,181 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/recommended?limit=4
2025-04-03 22:10:48,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,185 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,189 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,195 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:10:48,195 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,196 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 16 ms
2025-04-03 22:10:48,196 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-03 22:10:48,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,199 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,200 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-03 22:10:48,200 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,200 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,202 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,203 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,203 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,206 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,206 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,207 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,208 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,208 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getRecommendedProducts with args: [4]
2025-04-03 22:10:48,209 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,209 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,209 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-03 22:10:48,209 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,210 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllCategories executed in 30 ms
2025-04-03 22:10:48,211 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43)],[]>]
2025-04-03 22:10:48,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,211 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllProducts executed in 31 ms
2025-04-03 22:10:48,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,212 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,213 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,214 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,216 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,218 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,220 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,220 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getRecommendedProducts executed in 12 ms
2025-04-03 22:10:48,221 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,222 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,224 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,227 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,227 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,227 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=58ms
2025-04-03 22:10:48,227 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=60ms
2025-04-03 22:10:48,228 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,229 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,230 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,230 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,230 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /categories
2025-04-03 22:10:48,230 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,230 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,230 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /categories
2025-04-03 22:10:48,230 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,230 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:10:48,231 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,231 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-03 22:10:48,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:10:48,231 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,231 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,232 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:10:48,232 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,232 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,232 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:10:48,232 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,233 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,233 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,234 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:10:48,235 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:10:48,235 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:10:48,235 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:10:48,235 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:10:48,236 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,236 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,237 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,237 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,238 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,238 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,243 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,243 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,243 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-03 22:10:48,243 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /categories
2025-04-03 22:10:48,244 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllCategories
2025-04-03 22:10:48,244 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:10:48,246 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-03 22:10:48,246 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,248 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,248 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,249 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,249 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-03 22:10:48,249 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,249 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,249 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllCategories executed in 5 ms
2025-04-03 22:10:48,250 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,250 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,251 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,251 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,251 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,251 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,251 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,252 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,252 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,252 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,254 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,255 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,255 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,255 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,255 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 11 ms
2025-04-03 22:10:48,256 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:10:48,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,258 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,258 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=28ms
2025-04-03 22:10:48,258 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,259 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,260 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,260 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,260 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,264 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,264 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,264 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,264 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,266 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,266 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,266 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,267 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=97ms
2025-04-03 22:10:48,267 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,267 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,269 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/recommended
2025-04-03 22:10:48,269 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,269 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,270 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,270 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,270 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,270 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/recommended?limit=4
2025-04-03 22:10:48,271 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:10:48,271 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,271 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,272 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:10:48,272 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,272 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,272 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=107ms
2025-04-03 22:10:48,273 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:10:48,273 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:10:48,274 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products
2025-04-03 22:10:48,274 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,274 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,274 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,275 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products?sort=newest
2025-04-03 22:10:48,276 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,277 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:10:48,277 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,277 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,277 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,277 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,277 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,277 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:10:48,278 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:10:48,278 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:10:48,278 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,279 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,279 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,279 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/recommended?limit=4
2025-04-03 22:10:48,279 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getRecommendedProducts with args: [4]
2025-04-03 22:10:48,281 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,281 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,281 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,281 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,281 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,282 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,283 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,283 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,283 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,283 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=53ms
2025-04-03 22:10:48,283 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,285 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-03 22:10:48,285 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,285 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,285 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4
2025-04-03 22:10:48,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,286 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,286 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products?sort=newest
2025-04-03 22:10:48,286 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:10:48,286 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,286 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllProducts
2025-04-03 22:10:48,287 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:10:48,287 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-03 22:10:48,287 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,288 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:10:48,288 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,288 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getWishlist with args: [null]
2025-04-03 22:10:48,288 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:10:48,288 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:10:48,289 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,289 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,289 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getRecommendedProducts executed in 10 ms
2025-04-03 22:10:48,289 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,289 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,290 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,290 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,291 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,291 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,291 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,292 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,292 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,293 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,293 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4
2025-04-03 22:10:48,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,293 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-6] Get wishlist request for user: null
2025-04-03 22:10:48,293 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-6] User is null when getting wishlist
2025-04-03 22:10:48,294 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-03 22:10:48,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,295 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,295 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43)],[]>]
2025-04-03 22:10:48,295 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllProducts executed in 9 ms
2025-04-03 22:10:48,295 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getWishlist with result: [<400 BAD_REQUEST Bad Request,MessageResponse(message=User must be authenticated to view wishlist),[]>]
2025-04-03 22:10:48,296 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getWishlist executed in 8 ms
2025-04-03 22:10:48,296 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,296 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,297 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,297 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,297 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,297 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,299 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,298 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,298 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,299 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,299 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,299 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,299 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=400, Time=133ms
2025-04-03 22:10:48,299 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,302 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /wishlist
2025-04-03 22:10:48,302 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,302 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,302 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,303 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /wishlist
2025-04-03 22:10:48,303 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,304 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:10:48,304 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,304 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,304 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,304 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,304 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,304 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 10 ms
2025-04-03 22:10:48,305 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,305 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,306 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:10:48,306 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,306 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,306 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,307 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:10:48,307 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:10:48,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,308 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,308 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,310 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,311 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,311 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=42ms
2025-04-03 22:10:48,312 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,313 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /wishlist
2025-04-03 22:10:48,313 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:10:48,314 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:10:48,314 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getWishlist with args: [null]
2025-04-03 22:10:48,314 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-8] Get wishlist request for user: null
2025-04-03 22:10:48,314 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-8] User is null when getting wishlist
2025-04-03 22:10:48,314 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getWishlist with result: [<400 BAD_REQUEST Bad Request,MessageResponse(message=User must be authenticated to view wishlist),[]>]
2025-04-03 22:10:48,314 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getWishlist executed in 0 ms
2025-04-03 22:10:48,315 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,316 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=400, Time=15ms
2025-04-03 22:10:48,316 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,317 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,317 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,317 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,319 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,319 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,319 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,319 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,320 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,320 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,321 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,321 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,322 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,322 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,322 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,322 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,323 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,324 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,324 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,325 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,326 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,326 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,326 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,327 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,327 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=53ms
2025-04-03 22:10:48,327 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,327 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,329 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,329 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=44ms
2025-04-03 22:10:48,332 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-03 22:10:48,332 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,333 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4
2025-04-03 22:10:48,333 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:10:48,333 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,334 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:10:48,334 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:10:48,334 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:10:48,335 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,336 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,336 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,337 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,338 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,339 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4
2025-04-03 22:10:48,341 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts
2025-04-03 22:10:48,341 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,343 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,343 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,344 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,345 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,346 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,347 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,349 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,350 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 10 ms
2025-04-03 22:10:48,350 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,351 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,352 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,353 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,355 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,355 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,356 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,357 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,358 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,358 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,360 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,360 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,362 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,362 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,363 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,364 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,364 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,364 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,366 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,366 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,367 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,368 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=36ms
2025-04-03 22:10:48,369 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-03 22:10:48,369 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,369 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4
2025-04-03 22:10:48,369 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,370 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:10:48,370 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,371 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:10:48,371 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:10:48,371 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:10:48,374 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,374 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,375 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,376 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,378 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,378 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4
2025-04-03 22:10:48,379 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-03 22:10:48,380 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,383 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,384 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,386 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,386 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,389 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,390 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,390 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,391 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 12 ms
2025-04-03 22:10:48,391 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,392 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,393 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,395 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,397 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,397 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,398 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,399 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,400 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,400 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,402 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,402 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,403 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,403 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,404 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,408 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,408 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=39ms
2025-04-03 22:10:48,410 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-03 22:10:48,410 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,410 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4
2025-04-03 22:10:48,410 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,410 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:10:48,411 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,411 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:10:48,412 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:10:48,412 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:10:48,413 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,414 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,415 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,415 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,417 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,417 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4
2025-04-03 22:10:48,417 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts
2025-04-03 22:10:48,418 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,420 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,421 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,423 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,424 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,424 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 7 ms
2025-04-03 22:10:48,425 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,425 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,426 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,427 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,429 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,429 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,431 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,432 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,433 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,434 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,435 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,435 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,436 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,436 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,438 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,438 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=28ms
2025-04-03 22:10:48,439 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-03 22:10:48,440 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,440 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4
2025-04-03 22:10:48,440 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,440 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:10:48,441 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,441 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:10:48,441 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:10:48,441 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:10:48,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,444 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,446 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,446 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4
2025-04-03 22:10:48,447 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-03 22:10:48,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,448 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,448 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,450 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,450 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,451 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,451 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,452 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,452 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 5 ms
2025-04-03 22:10:48,453 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,453 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,454 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,454 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,455 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,455 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,456 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,457 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,459 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,460 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,461 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,461 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,461 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,464 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,466 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,466 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,467 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,467 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,469 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,469 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=30ms
2025-04-03 22:10:48,470 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:10:48,470 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:48,470 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-03 22:10:48,470 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:48,471 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:10:48,471 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:48,472 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:10:48,472 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:10:48,472 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:10:48,474 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:48,474 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:48,475 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:48,475 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,476 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:48,476 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-03 22:10:48,477 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:10:48,478 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:10:48,479 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,480 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,480 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,481 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,482 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:10:48,482 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,483 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:10:48,483 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 6 ms
2025-04-03 22:10:48,484 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,484 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,486 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,486 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,487 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,487 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,488 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,488 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,489 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,490 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:10:48,491 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:10:48,491 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:10:48,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,493 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,494 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:10:48,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:10:48,495 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,495 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:10:48,495 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:48,496 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:48,497 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=27ms
2025-04-03 22:10:59,434 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /wishlist/3
2025-04-03 22:10:59,434 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=POST, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:59,434 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing OPTIONS /wishlist/3
2025-04-03 22:10:59,434 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:59,435 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:59,435 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=1ms
2025-04-03 22:10:59,438 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: POST /wishlist/3
2025-04-03 22:10:59,439 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, content-length=0, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:10:59,439 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing POST /wishlist/3
2025-04-03 22:10:59,439 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:10:59,439 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:10:59,440 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:10:59,440 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:10:59,442 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:10:59,442 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:10:59,444 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:10:59,444 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:10:59,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:10:59,446 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:10:59,449 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:10:59,450 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured POST /wishlist/3
2025-04-03 22:10:59,458 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:10:59,459 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:10:59,459 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING addToWishlist with args: [null, 3]
2025-04-03 22:10:59,459 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-2] Add to wishlist request: user=null, productId=3
2025-04-03 22:10:59,459 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-2] User is null when adding to wishlist
2025-04-03 22:10:59,460 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING addToWishlist with result: [<400 BAD_REQUEST Bad Request,MessageResponse(message=User must be authenticated to add to wishlist),[]>]
2025-04-03 22:10:59,460 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method addToWishlist executed in 1 ms
2025-04-03 22:10:59,461 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:10:59,462 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=400, Time=24ms
2025-04-03 22:12:54,305 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: POST /wishlist/3
2025-04-03 22:12:54,305 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, content-length=0, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:12:54,305 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing POST /wishlist/3
2025-04-03 22:12:54,306 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:12:54,306 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:12:54,306 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:12:54,307 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:12:54,307 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:12:54,307 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:12:54,308 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:12:54,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:12:54,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:12:54,311 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:12:54,313 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:12:54,313 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured POST /wishlist/3
2025-04-03 22:13:39,972 WARN com.zaxxer.hikari.pool.HikariPool$HouseKeeper [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=56s614ms698µs200ns).
2025-04-03 22:13:39,974 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:13:39,975 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:13:39,975 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING addToWishlist with args: [null, 3]
2025-04-03 22:13:42,991 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-3] Add to wishlist request: user=null, productId=3
2025-04-03 22:21:20,946 WARN com.zaxxer.hikari.pool.HikariPool$HouseKeeper [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m40s975ms667µs400ns).
2025-04-03 22:21:20,950 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /products/top
2025-04-03 22:21:20,950 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /products/top
2025-04-03 22:21:20,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:20,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:20,951 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing OPTIONS /products/top?limit=6
2025-04-03 22:21:20,951 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /products/top?limit=6
2025-04-03 22:21:20,951 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:20,951 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:20,951 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:20,951 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:20,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=1ms
2025-04-03 22:21:20,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=1ms
2025-04-03 22:21:20,951 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-3] User is null when adding to wishlist
2025-04-03 22:21:20,953 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING addToWishlist with result: [<400 BAD_REQUEST Bad Request,MessageResponse(message=User must be authenticated to add to wishlist),[]>]
2025-04-03 22:21:20,953 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method addToWishlist executed in 460978 ms
2025-04-03 22:21:20,957 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:20,957 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=400, Time=506652ms
2025-04-03 22:21:20,961 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-03 22:21:20,961 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:20,963 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=6
2025-04-03 22:21:20,963 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:20,963 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:21:20,963 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:21:20,965 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:21:20,967 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:21:20,967 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:21:20,975 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:21:20,975 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:21:20,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:21:20,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:20,981 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:21:20,983 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=6
2025-04-03 22:21:20,983 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-03 22:21:20,983 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:21:20,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:20,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:20,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:20,992 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:20,994 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:20,994 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:20,998 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:21:20,998 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 15 ms
2025-04-03 22:21:20,999 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:20,999 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,003 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:21,007 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:21,010 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,012 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:21,015 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,015 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:21,019 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:21,019 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,021 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,023 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:21,025 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,025 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:21,027 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,027 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:21,031 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,031 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:21,033 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:21,035 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=76ms
2025-04-03 22:21:21,037 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:21:21,038 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:21,038 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=6
2025-04-03 22:21:21,039 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:21,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:21:21,039 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:21:21,040 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:21:21,041 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:21:21,041 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:21:21,043 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:21:21,045 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:21:21,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:21:21,047 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:21,049 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:21:21,051 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=6
2025-04-03 22:21:21,053 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:21:21,053 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:21:21,055 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:21,057 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:21,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:21,064 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,066 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:21,068 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:21,068 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:21:21,068 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 15 ms
2025-04-03 22:21:21,074 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,074 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,076 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,078 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,079 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:21,081 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:21,081 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,081 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:21,085 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,087 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:21,089 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:21,089 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:21,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,092 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:21,096 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,096 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:21,100 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:21,100 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:21,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:21,104 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:21,106 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:21,108 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=71ms
2025-04-03 22:21:23,864 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-03 22:21:23,864 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:23,866 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=6
2025-04-03 22:21:23,866 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:23,866 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:21:23,866 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:21:23,868 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:21:23,868 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:21:23,868 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:21:23,870 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:21:23,872 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:21:23,874 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:21:23,874 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,877 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:21:23,877 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=6
2025-04-03 22:21:23,879 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-03 22:21:23,879 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:21:23,881 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:23,883 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,883 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:23,883 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,885 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:23,885 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:23,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:21:23,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 8 ms
2025-04-03 22:21:23,889 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,889 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,889 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,892 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,893 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:23,893 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:23,895 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,895 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:23,897 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,897 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:23,899 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:23,899 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,901 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,901 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:23,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:23,905 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,907 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,907 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,913 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:23,913 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=49ms
2025-04-03 22:21:23,915 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:21:23,917 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:23,917 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=6
2025-04-03 22:21:23,917 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:23,917 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:21:23,917 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:21:23,917 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:21:23,920 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:21:23,920 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:21:23,920 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:21:23,920 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:21:23,920 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:21:23,920 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,926 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:21:23,926 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=6
2025-04-03 22:21:23,928 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:21:23,928 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:21:23,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:23,930 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:23,932 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,932 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:21:23,934 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:23,934 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:21:23,934 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 6 ms
2025-04-03 22:21:23,936 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,936 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,938 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,938 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,940 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:23,941 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:23,942 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,942 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:23,944 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,944 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:21:23,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:21:23,946 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:21:23,948 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,948 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:23,950 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:21:23,950 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:21:23,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,950 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:21:23,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:23,955 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:23,955 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=40ms
2025-04-03 22:21:30,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /products/2
2025-04-03 22:21:30,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /products/2
2025-04-03 22:21:30,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:30,992 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:30,992 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /products/2
2025-04-03 22:21:30,992 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing OPTIONS /products/2
2025-04-03 22:21:30,992 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:30,992 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:30,993 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:30,993 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:21:30,993 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=2ms
2025-04-03 22:21:30,993 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=2ms
2025-04-03 22:21:30,994 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/2
2025-04-03 22:21:30,994 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:21:30,994 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/2
2025-04-03 22:21:30,994 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:21:30,994 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:21:30,994 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:21:30,994 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:21:30,994 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:21:30,994 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:21:30,994 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:21:30,994 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:21:31,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:21:31,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:21:31,004 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:21:31,004 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/2
2025-04-03 22:23:42,190 WARN com.zaxxer.hikari.pool.HikariPool$HouseKeeper [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m21s243ms583µs200ns).
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /wishlist
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /products/top
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /products/top
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products/top
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /products/top
2025-04-03 22:23:42,194 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:42,194 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /wishlist
2025-04-03 22:23:42,194 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:42,194 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:42,194 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:42,195 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=3ms
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=3ms
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=2ms
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=2ms
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=3ms
2025-04-03 22:23:42,196 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getProductById with args: [2]
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /categories
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:42,196 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing OPTIONS /categories
2025-04-03 22:23:42,196 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:42,196 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:42,196 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:43,519 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: OPTIONS /products/recommended
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /products
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /products/top
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: OPTIONS /wishlist
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /products?sort=newest
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing OPTIONS /products/recommended?limit=4
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing OPTIONS /wishlist
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: OPTIONS /products/top
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products/top
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=1ms
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:43,520 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,520 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: OPTIONS /products/top
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,527 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing OPTIONS /products/top?limit=4
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: OPTIONS /categories
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: OPTIONS /products/recommended
2025-04-03 22:23:43,527 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: OPTIONS /products
2025-04-03 22:23:43,527 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,528 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,528 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing OPTIONS /categories
2025-04-03 22:23:43,528 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=6
2025-04-03 22:23:43,528 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing OPTIONS /products/recommended?limit=4
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing OPTIONS /products?sort=newest
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,528 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=2ms
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,529 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:23:43,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=2ms
2025-04-03 22:23:43,529 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,529 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:43,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=2ms
2025-04-03 22:23:43,529 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=2ms
2025-04-03 22:23:43,531 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:23:43,531 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:23:43,531 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:23:43,533 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:43,533 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:23:43,533 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:43,533 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:43,535 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,535 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:23:43,535 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getProductById executed in 1339 ms
2025-04-03 22:23:43,535 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:43,535 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=6
2025-04-03 22:23:43,535 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-03 22:23:43,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:23:43,541 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,541 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:43,541 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,541 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,541 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:43,543 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,543 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,543 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,543 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:43,543 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:43,545 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:43,545 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,545 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:23:43,545 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 10 ms
2025-04-03 22:23:43,545 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,545 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=132551ms
2025-04-03 22:23:43,545 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,545 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,549 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,549 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=22ms
2025-04-03 22:23:43,561 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-03 22:23:43,561 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:43,561 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=6
2025-04-03 22:23:43,561 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:43,561 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:23:43,561 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:43,561 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:23:43,561 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:23:43,561 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:23:43,561 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:43,561 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:43,561 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:43,561 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,561 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:43,561 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=6
2025-04-03 22:23:43,570 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts
2025-04-03 22:23:43,570 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:23:43,570 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:43,570 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,570 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:43,570 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,570 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:43,570 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:43,570 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:23:43,570 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 0 ms
2025-04-03 22:23:43,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:43,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:43,576 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:43,576 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:43,583 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,583 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:43,583 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,585 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:43,585 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:43,585 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,585 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:43,585 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:43,585 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:43,585 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=24ms
2025-04-03 22:23:50,146 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/2
2025-04-03 22:23:50,146 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:50,147 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/2
2025-04-03 22:23:50,147 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:50,147 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:23:50,147 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:50,148 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:23:50,150 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:23:50,150 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:23:50,150 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:50,150 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:50,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:50,153 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:50,155 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:50,155 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/2
2025-04-03 22:23:54,863 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getProductById with args: [2]
2025-04-03 22:23:54,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:23:54,867 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getProductById executed in 4 ms
2025-04-03 22:23:54,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:54,867 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:54,867 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:54,867 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:54,867 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,867 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=4721ms
2025-04-03 22:23:54,867 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/2
2025-04-03 22:23:54,867 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,867 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/2
2025-04-03 22:23:54,867 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:23:54,867 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:23:54,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:54,867 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:54,883 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:54,883 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,883 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /wishlist/check/2
2025-04-03 22:23:54,883 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,883 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing OPTIONS /wishlist/check/2
2025-04-03 22:23:54,883 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,883 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,883 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:54,883 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:54,883 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/2
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getProductById with args: [2]
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,887 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /wishlist/check/2
2025-04-03 22:23:54,887 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /wishlist/check/2
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getProductById executed in 0 ms
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,887 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=20ms
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /wishlist/check/2
2025-04-03 22:23:54,887 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/2
2025-04-03 22:23:54,887 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,887 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/2
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:54,887 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-6] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING checkInWishlist with args: [null, 2]
2025-04-03 22:23:54,887 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-6] Check in wishlist request: user=null, productId=2
2025-04-03 22:23:54,887 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-6] User is null when checking wishlist
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method checkInWishlist executed in 0 ms
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:23:54,887 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:23:54,887 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,887 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:54,887 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:54,899 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:54,899 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,899 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /wishlist/check/2
2025-04-03 22:23:54,899 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,899 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /wishlist/check/2
2025-04-03 22:23:54,899 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:54,899 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/2
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:23:54,899 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getProductById with args: [2]
2025-04-03 22:23:54,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:54,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:54,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:23:54,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:54,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,903 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:54,903 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:23:54,903 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getProductById executed in 4 ms
2025-04-03 22:23:54,903 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /wishlist/check/2
2025-04-03 22:23:54,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:54,903 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:23:54,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,903 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-4] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:23:54,903 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING checkInWishlist with args: [null, 2]
2025-04-03 22:23:54,903 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-4] Check in wishlist request: user=null, productId=2
2025-04-03 22:23:54,903 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-4] User is null when checking wishlist
2025-04-03 22:23:54,903 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:23:54,903 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method checkInWishlist executed in 0 ms
2025-04-03 22:23:54,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:54,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,903 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,903 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=4ms
2025-04-03 22:23:54,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:54,903 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:54,903 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,903 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=16ms
2025-04-03 22:23:54,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /wishlist/check/2
2025-04-03 22:23:54,951 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,951 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /wishlist/check/2
2025-04-03 22:23:54,951 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,951 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:23:54,951 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:54,951 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:23:54,951 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:23:54,951 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:23:54,951 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:54,951 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:54,951 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:54,967 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,967 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:54,967 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /wishlist/check/2
2025-04-03 22:23:54,967 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:23:54,967 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:23:54,967 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING checkInWishlist with args: [null, 2]
2025-04-03 22:23:54,967 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-9] Check in wishlist request: user=null, productId=2
2025-04-03 22:23:54,967 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-9] User is null when checking wishlist
2025-04-03 22:23:54,967 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:23:54,967 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method checkInWishlist executed in 0 ms
2025-04-03 22:23:54,967 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:54,967 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=16ms
2025-04-03 22:23:54,980 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-03 22:23:54,980 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:54,982 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4
2025-04-03 22:23:54,982 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:54,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:23:54,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:54,982 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:23:54,982 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:23:54,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:23:54,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:54,984 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:54,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:54,984 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,986 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:54,986 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4
2025-04-03 22:23:54,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-03 22:23:54,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:23:54,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:54,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:54,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:54,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:54,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:54,990 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:23:54,990 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 4 ms
2025-04-03 22:23:54,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:54,990 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,990 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:54,990 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:54,992 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:54,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:54,992 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:54,994 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:54,994 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:54,994 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:54,994 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:54,996 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:54,996 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:54,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:54,998 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:54,998 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:55,000 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:55,000 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=20ms
2025-04-03 22:23:55,000 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-03 22:23:55,000 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:55,000 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4
2025-04-03 22:23:55,000 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:55,000 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4
2025-04-03 22:23:55,000 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:55,000 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:23:55,000 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:55,014 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:23:55,014 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 14 ms
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:55,014 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:23:55,014 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:55,014 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:55,014 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=14ms
2025-04-03 22:23:59,417 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /wishlist/2
2025-04-03 22:23:59,417 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=POST, access-control-request-headers=authorization,content-type, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:23:59,417 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /wishlist/2
2025-04-03 22:23:59,417 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:59,417 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:23:59,417 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=0ms
2025-04-03 22:23:59,420 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing POST /wishlist/2
2025-04-03 22:23:59,420 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:23:59,420 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:23:59,420 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:23:59,420 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:23:59,420 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:23:59,420 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:23:59,420 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:23:59,420 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:23:59,420 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:23:59,420 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:23:59,426 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:23:59,427 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured POST /wishlist/2
2025-04-03 22:24:04,241 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:24:04,241 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-8] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:24:04,241 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING addToWishlist with args: [null, 2]
2025-04-03 22:24:16,481 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-8] Add to wishlist request: user=null, productId=2
2025-04-03 22:24:16,481 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-8] User is null when adding to wishlist
2025-04-03 22:24:16,481 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING addToWishlist with result: [<400 BAD_REQUEST Bad Request,MessageResponse(message=User must be authenticated to add to wishlist),[]>]
2025-04-03 22:24:16,481 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method addToWishlist executed in 12240 ms
2025-04-03 22:24:16,481 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:24:16,481 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: POST /wishlist/2
2025-04-03 22:24:16,481 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, content-length=2, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:24:16,488 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=400, Time=0ms
2025-04-03 22:24:23,452 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing POST /wishlist/2
2025-04-03 22:24:23,452 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:24:23,458 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:24:23,458 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:24:23,458 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:24:23,459 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:24:23,459 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:24:23,459 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:24:23,459 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:24:23,459 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:24:23,459 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:24:23,459 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:24:23,459 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured POST /wishlist/2
2025-04-03 22:24:26,485 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:24:26,485 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:24:26,485 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING addToWishlist with args: [null, 2]
2025-04-03 22:24:28,740 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-5] Add to wishlist request: user=null, productId=2
2025-04-03 22:31:03,050 WARN com.zaxxer.hikari.pool.HikariPool$HouseKeeper [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m46s576ms312µs700ns).
2025-04-03 22:31:03,050 ERROR com.example.tmdt.controller.WishlistController [http-nio-8080-exec-5] User is null when adding to wishlist
2025-04-03 22:31:03,050 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING addToWishlist with result: [<400 BAD_REQUEST Bad Request,MessageResponse(message=User must be authenticated to add to wishlist),[]>]
2025-04-03 22:31:03,050 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method addToWishlist executed in 396565 ms
2025-04-03 22:31:03,050 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:31:03,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: POST /wishlist/2
2025-04-03 22:31:03,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, content-length=2, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:31:03,068 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=400, Time=0ms
2025-04-03 22:31:05,900 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:31:05,900 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2025-04-03 22:31:05,921 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2025-04-03 22:31:08,893 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 12508 (E:\tmdt\backend\target\classes started by leloi in E:\tmdt\backend)
2025-04-03 22:31:08,893 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-03 22:31:09,417 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-03 22:31:09,481 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 57 ms. Found 15 JPA repository interfaces.
2025-04-03 22:31:10,134 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-03 22:31:10,141 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-03 22:31:10,143 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-03 22:31:10,143 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-03 22:31:10,250 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-03 22:31:10,250 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1326 ms
2025-04-03 22:31:10,719 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:31:10,832 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-03 22:31:11,469 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:31:11,833 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-03 22:31:13,714 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@619944a7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@294aaa6, org.springframework.security.web.context.SecurityContextPersistenceFilter@4ce9985f, org.springframework.security.web.header.HeaderWriterFilter@64dc0a5f, org.springframework.web.filter.CorsFilter@1a8e9ed9, org.springframework.security.web.authentication.logout.LogoutFilter@238cac6, com.example.tmdt.security.jwt.AuthTokenFilter@2cf97875, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@468dbd07, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2fedae96, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f612968, org.springframework.security.web.session.SessionManagementFilter@5d5a77de, org.springframework.security.web.access.ExceptionTranslationFilter@f111e97, org.springframework.security.web.access.intercept.AuthorizationFilter@373c367]
2025-04-03 22:31:13,804 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-03 22:31:13,849 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x00000215aa8e2aa8]; does the class parameterize those types?
Related cause: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x00000215aa8e2aa8]; does the class parameterize those types?
2025-04-03 22:31:13,852 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:31:13,856 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2025-04-03 22:31:13,865 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2025-04-03 22:31:13,868 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2025-04-03 22:31:13,880 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-04-03 22:31:13,908 ERROR org.springframework.boot.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x00000215aa8e2aa8]; does the class parameterize those types?
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at com.example.tmdt.TmdtApplication.main(TmdtApplication.java:12)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x00000215aa8e2aa8]; does the class parameterize those types?
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x00000215aa8e2aa8]; does the class parameterize those types?
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 33 common frames omitted
Caused by: java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x00000215aa8e2aa8]; does the class parameterize those types?
	at org.springframework.core.convert.support.GenericConversionService.addConverter(GenericConversionService.java:93)
	at org.springframework.boot.convert.ApplicationConversionService.addBeans(ApplicationConversionService.java:285)
	at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.addFormatters(WebMvcAutoConfiguration.java:329)
	at org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81)
	at org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78)
	at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:530)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 34 common frames omitted
2025-04-03 22:32:03,018 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 14720 (E:\tmdt\backend\target\classes started by leloi in E:\tmdt\backend)
2025-04-03 22:32:03,020 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-03 22:32:03,509 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-03 22:32:03,572 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 57 ms. Found 15 JPA repository interfaces.
2025-04-03 22:32:04,114 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-03 22:32:04,120 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-03 22:32:04,121 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-03 22:32:04,121 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-03 22:32:04,212 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-03 22:32:04,212 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1163 ms
2025-04-03 22:32:04,615 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:32:04,726 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-03 22:32:05,330 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:32:05,690 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-03 22:32:07,701 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@47483211, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8ba7408, org.springframework.security.web.context.SecurityContextPersistenceFilter@46cb9794, org.springframework.security.web.header.HeaderWriterFilter@3feeab43, org.springframework.web.filter.CorsFilter@1a8e9ed9, org.springframework.security.web.authentication.logout.LogoutFilter@1aaa3406, com.example.tmdt.security.jwt.AuthTokenFilter@73db1a6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@17baaf07, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3d5009c0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17616c07, org.springframework.security.web.session.SessionManagementFilter@22c4151b, org.springframework.security.web.access.ExceptionTranslationFilter@54464330, org.springframework.security.web.access.intercept.AuthorizationFilter@686ee555]
2025-04-03 22:32:07,814 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-03 22:32:07,853 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x0000021881905f28]; does the class parameterize those types?
Related cause: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x0000021881905f28]; does the class parameterize those types?
2025-04-03 22:32:07,856 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:32:07,861 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2025-04-03 22:32:07,869 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2025-04-03 22:32:07,872 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2025-04-03 22:32:07,884 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-04-03 22:32:07,912 ERROR org.springframework.boot.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x0000021881905f28]; does the class parameterize those types?
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at com.example.tmdt.TmdtApplication.main(TmdtApplication.java:12)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x0000021881905f28]; does the class parameterize those types?
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x0000021881905f28]; does the class parameterize those types?
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 33 common frames omitted
Caused by: java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1186/0x0000021881905f28]; does the class parameterize those types?
	at org.springframework.core.convert.support.GenericConversionService.addConverter(GenericConversionService.java:93)
	at org.springframework.boot.convert.ApplicationConversionService.addBeans(ApplicationConversionService.java:285)
	at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.addFormatters(WebMvcAutoConfiguration.java:329)
	at org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81)
	at org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78)
	at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:530)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 34 common frames omitted
2025-04-03 22:33:15,330 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 10560 (E:\tmdt\backend\target\classes started by leloi in E:\tmdt\backend)
2025-04-03 22:33:15,332 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-03 22:33:15,758 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-03 22:33:15,818 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 59 ms. Found 15 JPA repository interfaces.
2025-04-03 22:33:16,364 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-03 22:33:16,364 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-03 22:33:16,378 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-03 22:33:16,378 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-03 22:33:16,432 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-03 22:33:16,432 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1067 ms
2025-04-03 22:33:16,785 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:33:16,902 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-03 22:33:17,454 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:33:17,782 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-03 22:33:18,831 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6df0d030, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33319df0, org.springframework.security.web.context.SecurityContextPersistenceFilter@5e38329d, org.springframework.security.web.header.HeaderWriterFilter@2e4262d2, org.springframework.web.filter.CorsFilter@6fa2448b, org.springframework.security.web.authentication.logout.LogoutFilter@2b27d5d3, com.example.tmdt.security.jwt.AuthTokenFilter@26f07261, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@333e01c6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f70b659, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73b71935, org.springframework.security.web.session.SessionManagementFilter@7c08461b, org.springframework.security.web.access.ExceptionTranslationFilter@7d018c58, org.springframework.security.web.access.intercept.AuthorizationFilter@6fa5fc67]
2025-04-03 22:33:18,905 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-03 22:33:18,945 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1124/0x00000272c5840960]; does the class parameterize those types?
Related cause: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1124/0x00000272c5840960]; does the class parameterize those types?
2025-04-03 22:33:18,952 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:33:18,954 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2025-04-03 22:33:18,958 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2025-04-03 22:33:18,960 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2025-04-03 22:33:18,966 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-04-03 22:33:18,980 ERROR org.springframework.boot.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Unsatisfied dependency expressed through method 'requestMappingHandlerAdapter' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1124/0x00000272c5840960]; does the class parameterize those types?
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at com.example.tmdt.TmdtApplication.main(TmdtApplication.java:12)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcConversionService' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1124/0x00000272c5840960]; does the class parameterize those types?
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1124/0x00000272c5840960]; does the class parameterize those types?
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 33 common frames omitted
Caused by: java.lang.IllegalArgumentException: Unable to determine source type <S> and target type <T> for your Converter [com.example.tmdt.config.SecurityConfig$$Lambda$1124/0x00000272c5840960]; does the class parameterize those types?
	at org.springframework.core.convert.support.GenericConversionService.addConverter(GenericConversionService.java:93)
	at org.springframework.boot.convert.ApplicationConversionService.addBeans(ApplicationConversionService.java:285)
	at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.addFormatters(WebMvcAutoConfiguration.java:329)
	at org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81)
	at org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78)
	at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:530)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 34 common frames omitted
2025-04-03 22:35:33,625 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 2816 (E:\tmdt\backend\target\classes started by leloi in E:\tmdt\backend)
2025-04-03 22:35:33,636 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-03 22:35:34,180 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-03 22:35:34,261 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 74 ms. Found 15 JPA repository interfaces.
2025-04-03 22:35:34,894 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-03 22:35:34,900 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-03 22:35:34,901 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-03 22:35:34,901 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-03 22:35:34,988 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-03 22:35:34,989 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1312 ms
2025-04-03 22:35:35,412 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:35:35,527 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2025-04-03 22:35:36,185 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:35:36,590 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-03 22:35:38,813 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@502f6f6a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64a0ee65, org.springframework.security.web.context.SecurityContextPersistenceFilter@50e7d8ba, org.springframework.security.web.header.HeaderWriterFilter@45cce4c2, org.springframework.web.filter.CorsFilter@12fcb2c3, org.springframework.security.web.authentication.logout.LogoutFilter@466f7259, com.example.tmdt.security.jwt.AuthTokenFilter@5fa3df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5eabcf77, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@647468a7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3ce60feb, org.springframework.security.web.session.SessionManagementFilter@57e9cd2, org.springframework.security.web.access.ExceptionTranslationFilter@238cac6, org.springframework.security.web.access.intercept.AuthorizationFilter@75c5ab79]
2025-04-03 22:35:38,949 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-03 22:35:39,067 INFO com.example.tmdt.config.WebMvcConfig [main] Added CurrentUserArgumentResolver to Spring MVC
2025-04-03 22:35:39,592 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2025-04-03 22:35:39,627 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2025-04-03 22:35:39,641 INFO org.springframework.boot.StartupInfoLogger [main] Started TmdtApplication in 6.426 seconds (JVM running for 7.186)
2025-04-03 22:35:39,680 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [main] 
    select
        count(*) as col_0_0_ 
    from
        roles role0_
2025-04-03 22:35:44,473 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-03 22:35:44,479 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2025-04-03 22:35:44,480 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2025-04-03 22:35:44,487 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/2
2025-04-03 22:35:44,487 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:44,500 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/2
2025-04-03 22:35:44,507 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:44,541 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/2, Method: GET
2025-04-03 22:35:44,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:44,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:35:44,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:44,639 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:35:44,640 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:35:44,640 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:35:44,669 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:44,671 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:44,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:44,708 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:44,764 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:44,771 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:35:44,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:44,773 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@69ae1418, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:44,779 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/2
2025-04-03 22:35:44,827 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getProductById with args: [2]
2025-04-03 22:35:44,834 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:35:44,834 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:44,882 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:35:44,882 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getProductById executed in 62 ms
2025-04-03 22:35:44,967 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:44,972 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:44,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:44,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:44,987 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:44,987 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,001 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:45,001 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=515ms
2025-04-03 22:35:45,008 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/2
2025-04-03 22:35:45,008 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:45,008 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/2
2025-04-03 22:35:45,008 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:45,008 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/2, Method: GET
2025-04-03 22:35:45,008 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,008 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:35:45,008 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,014 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:35:45,015 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:35:45,015 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:35:45,015 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /wishlist/check/2
2025-04-03 22:35:45,016 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:45,016 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /wishlist/check/2
2025-04-03 22:35:45,016 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:45,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:45,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /wishlist/check/2, Method: GET
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:35:45,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:45,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:35:45,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:45,016 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:45,016 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6487e575, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,021 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/2
2025-04-03 22:35:45,021 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:45,021 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getProductById with args: [2]
2025-04-03 22:35:45,021 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:35:45,021 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1551070b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,021 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /wishlist/check/2
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:35:45,021 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getProductById executed in 0 ms
2025-04-03 22:35:45,021 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,021 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,028 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,030 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,030 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,030 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:45,030 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=22ms
2025-04-03 22:35:45,030 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:35:45,064 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:35:45,076 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 2]
2025-04-03 22:35:45,077 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-3] Check in wishlist request: user=3, productId=2
2025-04-03 22:35:45,083 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-3] Checking if product 2 is in wishlist for user 3
2025-04-03 22:35:45,083 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:35:45,083 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:35:45,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,091 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BIGINT] - [2]
2025-04-03 22:35:45,104 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:35:45,104 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method checkInWishlist executed in 40 ms
2025-04-03 22:35:45,104 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:45,104 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=89ms
2025-04-03 22:35:45,104 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /wishlist/check/2
2025-04-03 22:35:45,104 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:45,104 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /wishlist/check/2
2025-04-03 22:35:45,104 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:45,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /wishlist/check/2, Method: GET
2025-04-03 22:35:45,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,104 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:35:45,111 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,111 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:35:45,112 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:35:45,112 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:35:45,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:45,113 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:45,114 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:45,114 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,116 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,116 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-03 22:35:45,116 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:45,116 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2e512c64, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,117 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /wishlist/check/2
2025-04-03 22:35:45,118 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,119 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,121 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:35:45,121 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:35:45,121 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 2]
2025-04-03 22:35:45,121 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-9] Check in wishlist request: user=3, productId=2
2025-04-03 22:35:45,121 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-9] Checking if product 2 is in wishlist for user 3
2025-04-03 22:35:45,123 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:35:45,123 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,127 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:35:45,127 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,127 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [2] as [BIGINT] - [2]
2025-04-03 22:35:45,128 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:35:45,128 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method checkInWishlist executed in 7 ms
2025-04-03 22:35:45,129 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:45,129 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=25ms
2025-04-03 22:35:45,162 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-03 22:35:45,162 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:45,162 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4
2025-04-03 22:35:45,162 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:35:45,162 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:35:45,167 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:45,167 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:45,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:45,168 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-03 22:35:45,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:45,170 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1da4c17a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,170 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4
2025-04-03 22:35:45,171 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-03 22:35:45,174 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:35:45,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:45,178 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:45,181 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,183 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:45,184 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:45,186 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:35:45,186 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 15 ms
2025-04-03 22:35:45,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,190 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,192 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,192 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,193 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,193 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,195 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,199 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,199 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,201 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:45,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,203 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:45,204 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,204 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,206 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,206 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,208 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:45,208 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=46ms
2025-04-03 22:35:45,210 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-03 22:35:45,210 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:45,211 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=4
2025-04-03 22:35:45,211 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:45,212 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-03 22:35:45,212 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,212 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:35:45,212 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:45,213 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:35:45,214 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:35:45,215 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:35:45,216 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:45,217 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:45,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:45,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,221 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,221 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-03 22:35:45,221 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:45,221 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@344b4aef, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:45,221 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=4
2025-04-03 22:35:45,222 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-03 22:35:45,223 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:35:45,226 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:45,227 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,230 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:45,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,233 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:45,234 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:45,237 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:35:45,237 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 15 ms
2025-04-03 22:35:45,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,240 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,242 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,243 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,246 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,246 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,252 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,253 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,255 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,255 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:45,258 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:45,259 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:45,261 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:45,263 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,263 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:45,264 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:45,265 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,268 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:45,268 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:45,271 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:45,271 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=61ms
2025-04-03 22:35:46,667 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing POST /wishlist/2
2025-04-03 22:35:46,673 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:46,673 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /wishlist/2, Method: POST
2025-04-03 22:35:46,673 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:46,673 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:35:46,673 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:46,674 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:35:46,675 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:35:46,675 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:35:46,675 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:46,675 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:46,675 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:46,675 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:46,675 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:46,680 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-03 22:35:46,680 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:46,680 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@65365ac9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:46,680 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured POST /wishlist/2
2025-04-03 22:35:46,681 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:46,681 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:52,181 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:35:52,181 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.addToWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:35:52,181 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING addToWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 2]
2025-04-03 22:35:55,159 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-7] Authentication: principal=com.example.tmdt.security.services.UserDetailsImpl@65365ac9, authorities=[ROLE_USER]
2025-04-03 22:35:55,159 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-7] Add to wishlist request: user=3, productId=2
2025-04-03 22:35:55,164 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-7] Adding product 2 to wishlist for user User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)
2025-04-03 22:35:55,164 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:35:55,180 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:55,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:35:55,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:55,196 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [2]
2025-04-03 22:35:55,196 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-7] Saving wishlist entry: user=3, product=2
2025-04-03 22:35:55,244 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    insert 
    into
        wishlists
        (created_at, product_id, user_id) 
    values
        (?, ?, ?)
2025-04-03 22:35:55,244 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [TIMESTAMP] - [2025-04-03T22:35:55.212295600]
2025-04-03 22:35:55,244 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [2] as [BIGINT] - [2]
2025-04-03 22:35:55,244 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [3] as [BIGINT] - [3]
2025-04-03 22:35:55,275 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING addToWishlist with result: [<200 OK OK,MessageResponse(message=Product added to wishlist successfully),[]>]
2025-04-03 22:35:55,275 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method addToWishlist executed in 3094 ms
2025-04-03 22:35:55,275 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:55,275 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: POST /wishlist/2
2025-04-03 22:35:55,275 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, content-length=2, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", content-type=application/json, sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:55,275 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=0ms
2025-04-03 22:35:58,190 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/top
2025-04-03 22:35:58,190 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:58,190 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/top?limit=6
2025-04-03 22:35:58,190 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:58,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/top, Method: GET
2025-04-03 22:35:58,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:58,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:35:58,191 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:58,192 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:35:58,194 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:35:58,194 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:35:58,196 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:58,197 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:58,199 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:58,200 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,203 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:58,203 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-03 22:35:58,203 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:58,203 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5a539795, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:58,203 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/top?limit=6
2025-04-03 22:35:58,204 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getTopProducts
2025-04-03 22:35:58,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:35:58,208 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:58,209 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:58,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:58,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:58,210 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:35:58,210 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getTopProducts executed in 6 ms
2025-04-03 22:35:58,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,210 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:58,210 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:58,218 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:58,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,219 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:58,224 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:58,225 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,226 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,226 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:58,231 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:58,231 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,231 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,231 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,231 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:58,231 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=41ms
2025-04-03 22:35:58,231 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/top
2025-04-03 22:35:58,231 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:35:58,231 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/top?limit=6
2025-04-03 22:35:58,231 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:35:58,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/top, Method: GET
2025-04-03 22:35:58,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:58,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:35:58,238 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:35:58,239 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:35:58,239 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:35:58,239 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:35:58,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:35:58,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:35:58,239 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:35:58,239 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,245 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:58,245 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-03 22:35:58,245 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:35:58,245 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5f2a7b92, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:35:58,245 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/top?limit=6
2025-04-03 22:35:58,246 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getTopProducts
2025-04-03 22:35:58,247 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:35:58,249 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:58,250 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,251 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:58,251 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,253 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:35:58,254 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:58,255 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:35:58,255 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getTopProducts executed in 10 ms
2025-04-03 22:35:58,255 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,256 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,257 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,260 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:58,261 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:58,265 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,266 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:58,275 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,275 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:35:58,280 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:35:58,280 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:35:58,284 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:58,286 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,287 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:35:58,288 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:35:58,288 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,289 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:35:58,289 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:35:58,291 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:35:58,291 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=60ms
2025-04-03 22:36:00,687 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products
2025-04-03 22:36:00,687 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,687 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /wishlist
2025-04-03 22:36:00,687 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,687 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products?sort=newest
2025-04-03 22:36:00,687 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /wishlist
2025-04-03 22:36:00,687 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,687 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,688 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products, Method: GET
2025-04-03 22:36:00,688 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /wishlist, Method: GET
2025-04-03 22:36:00,688 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,688 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,688 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:36:00,689 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:36:00,689 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,689 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,689 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:36:00,689 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:36:00,690 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:36:00,690 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,690 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:36:00,690 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:36:00,690 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=4
2025-04-03 22:36:00,690 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:36:00,690 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,690 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:36:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:36:00,691 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,691 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,692 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,692 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:36:00,692 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,692 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,692 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/recommended
2025-04-03 22:36:00,692 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /categories
2025-04-03 22:36:00,692 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,692 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,692 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /categories
2025-04-03 22:36:00,692 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/recommended?limit=4
2025-04-03 22:36:00,692 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:36:00,692 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,692 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,692 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:36:00,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /categories, Method: GET
2025-04-03 22:36:00,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/recommended, Method: GET
2025-04-03 22:36:00,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,693 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,693 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,693 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,694 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,694 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,694 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,694 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:36:00,694 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,694 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:36:00,694 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,697 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,697 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-03 22:36:00,697 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@448223, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,697 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,697 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /wishlist
2025-04-03 22:36:00,697 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3fd83cc6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,697 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products?sort=newest
2025-04-03 22:36:00,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,697 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,697 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllProducts
2025-04-03 22:36:00,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,700 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,697 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,701 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,701 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:36:00,701 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,700 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,701 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,701 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6c8e7720, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,701 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=4
2025-04-03 22:36:00,701 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:36:00,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,703 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:00,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-03 22:36:00,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-03 22:36:00,704 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,704 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,704 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4824c429, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,704 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@339530f1, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,704 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:00,704 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/recommended?limit=4
2025-04-03 22:36:00,704 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)]
2025-04-03 22:36:00,704 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /categories
2025-04-03 22:36:00,704 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-03 22:36:00,704 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-1] Get wishlist request for user: 3
2025-04-03 22:36:00,707 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,707 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,708 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getAllCategories
2025-04-03 22:36:00,708 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,708 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,708 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-03 22:36:00,708 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,708 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,712 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,712 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,712 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,712 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,712 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,715 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,715 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,715 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getRecommendedProducts with args: [4]
2025-04-03 22:36:00,715 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,715 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,715 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 14 ms
2025-04-03 22:36:00,718 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43)],[]>]
2025-04-03 22:36:00,718 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllProducts executed in 21 ms
2025-04-03 22:36:00,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:00,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,719 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,719 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,719 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,719 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,719 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,723 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,723 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,723 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,723 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,724 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,724 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,724 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,724 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,724 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,726 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,726 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,726 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-03 22:36:00,726 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@aabdd92],[]>]
2025-04-03 22:36:00,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,726 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getWishlist executed in 22 ms
2025-04-03 22:36:00,728 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,728 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getRecommendedProducts executed in 13 ms
2025-04-03 22:36:00,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,728 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-03 22:36:00,728 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getAllCategories executed in 23 ms
2025-04-03 22:36:00,728 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,728 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,728 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,728 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,728 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,731 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,731 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,731 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,731 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,731 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,731 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,731 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,731 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=44ms
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,731 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,735 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,735 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,735 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,735 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,735 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,735 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,735 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /wishlist
2025-04-03 22:36:00,735 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,735 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,737 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,737 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,737 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /wishlist
2025-04-03 22:36:00,737 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,737 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /wishlist, Method: GET
2025-04-03 22:36:00,737 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,737 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:36:00,737 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,737 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,737 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=45ms
2025-04-03 22:36:00,737 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,737 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,737 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,739 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,739 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,739 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /categories
2025-04-03 22:36:00,739 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:36:00,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,739 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,739 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,739 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /categories
2025-04-03 22:36:00,739 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=49ms
2025-04-03 22:36:00,739 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,739 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,739 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:36:00,739 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:36:00,739 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /categories, Method: GET
2025-04-03 22:36:00,739 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:36:00,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,743 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4
2025-04-03 22:36:00,743 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,743 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=56ms
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:36:00,743 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,743 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:36:00,743 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,743 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:36:00,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products
2025-04-03 22:36:00,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:36:00,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,743 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,743 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,743 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products?sort=newest
2025-04-03 22:36:00,743 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,743 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,743 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,748 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products, Method: GET
2025-04-03 22:36:00,748 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,748 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,748 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,748 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,748 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,749 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:36:00,749 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,749 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-03 22:36:00,751 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,751 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,749 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:36:00,751 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@4fb01f63, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,751 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7cf25f72, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,752 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /wishlist
2025-04-03 22:36:00,753 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,753 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /categories
2025-04-03 22:36:00,753 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,754 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,754 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getAllCategories
2025-04-03 22:36:00,754 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-03 22:36:00,754 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,754 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@54745dd5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,754 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,755 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,755 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4
2025-04-03 22:36:00,755 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-03 22:36:00,755 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,755 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,756 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-03 22:36:00,757 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:00,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-03 22:36:00,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,757 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,757 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-5] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:00,757 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@93f2429, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,758 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products?sort=newest
2025-04-03 22:36:00,758 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)]
2025-04-03 22:36:00,758 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-03 22:36:00,758 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-5] Get wishlist request for user: 3
2025-04-03 22:36:00,758 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getAllCategories executed in 4 ms
2025-04-03 22:36:00,758 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getAllProducts
2025-04-03 22:36:00,758 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-03 22:36:00,759 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,759 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,759 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,759 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,759 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,760 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-03 22:36:00,760 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,760 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:00,760 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,761 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,761 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,761 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,761 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,761 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,763 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,763 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:36:00,763 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,763 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@6f080a4f],[]>]
2025-04-03 22:36:00,765 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,765 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getWishlist executed in 7 ms
2025-04-03 22:36:00,765 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 9 ms
2025-04-03 22:36:00,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,766 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,766 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=31ms
2025-04-03 22:36:00,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,766 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=27ms
2025-04-03 22:36:00,766 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,766 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,767 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,767 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,768 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,769 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,769 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43)],[]>]
2025-04-03 22:36:00,770 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getAllProducts executed in 12 ms
2025-04-03 22:36:00,770 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,770 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,770 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,770 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,772 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,772 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,775 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,775 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,775 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,775 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,775 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,775 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=83ms
2025-04-03 22:36:00,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,777 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,779 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/recommended
2025-04-03 22:36:00,779 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,779 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,779 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/recommended?limit=4
2025-04-03 22:36:00,779 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,779 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/recommended, Method: GET
2025-04-03 22:36:00,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:36:00,780 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,781 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,781 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,781 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:36:00,781 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,781 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,782 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:36:00,782 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:36:00,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,783 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,783 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,784 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,784 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,784 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,784 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,784 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,784 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,787 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,787 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,787 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,787 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,787 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,788 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-03 22:36:00,788 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,788 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@71ba8350, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,788 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/recommended?limit=4
2025-04-03 22:36:00,788 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,789 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,789 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,789 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getRecommendedProducts with args: [4]
2025-04-03 22:36:00,789 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=46ms
2025-04-03 22:36:00,789 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,790 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,790 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:36:00,790 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,791 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,791 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-03 22:36:00,791 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,791 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,792 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,792 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,792 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=49ms
2025-04-03 22:36:00,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:36:00,792 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,793 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:36:00,794 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:36:00,794 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:36:00,794 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,795 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,795 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,795 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,796 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,796 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,797 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getRecommendedProducts executed in 8 ms
2025-04-03 22:36:00,798 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,798 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:36:00,798 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,798 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@77042115, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,798 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-03 22:36:00,798 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,798 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,798 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:36:00,799 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,800 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,800 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,801 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,801 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,801 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,802 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,802 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,802 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,802 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,803 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,803 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,803 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,804 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,804 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,805 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,805 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,805 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 7 ms
2025-04-03 22:36:00,805 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,806 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,806 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,807 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,807 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,807 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,808 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,808 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,808 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,809 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,809 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,809 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,809 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,810 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,810 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,810 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,810 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,811 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,811 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,811 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,811 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=34ms
2025-04-03 22:36:00,813 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,813 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,815 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,815 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,816 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,816 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,817 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,817 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,818 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,818 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,819 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,819 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=29ms
2025-04-03 22:36:00,820 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-03 22:36:00,820 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,820 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4
2025-04-03 22:36:00,820 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,821 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,821 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,821 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:36:00,821 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,821 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:36:00,822 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:36:00,822 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:36:00,823 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,823 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,824 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,824 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,825 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,825 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-03 22:36:00,825 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,825 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@20dc231a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,826 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4
2025-04-03 22:36:00,826 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts
2025-04-03 22:36:00,826 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,828 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,828 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,829 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,830 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,830 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,831 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,832 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,832 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 6 ms
2025-04-03 22:36:00,832 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,833 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,833 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,834 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,834 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,836 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,837 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,838 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,839 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,839 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,840 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,840 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,841 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,841 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,841 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,841 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,842 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,842 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,843 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,843 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,844 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,844 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=24ms
2025-04-03 22:36:00,845 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:36:00,845 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,845 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=4
2025-04-03 22:36:00,846 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,846 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,846 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,846 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:36:00,846 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,847 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:36:00,847 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:36:00,848 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:36:00,850 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,850 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,851 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,851 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,852 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,852 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:36:00,852 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,852 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5ef694a3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,853 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=4
2025-04-03 22:36:00,853 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:36:00,853 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,854 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,854 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,855 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,855 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,856 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,857 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,858 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,858 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 5 ms
2025-04-03 22:36:00,858 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,859 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,860 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,860 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,860 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,860 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,864 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,864 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,865 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,866 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,867 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,867 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,868 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,868 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,870 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,870 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,871 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,871 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,872 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,873 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,874 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,874 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=29ms
2025-04-03 22:36:00,876 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-03 22:36:00,876 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,876 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4
2025-04-03 22:36:00,876 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,877 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,877 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,877 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:36:00,877 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,878 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:36:00,878 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:36:00,878 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:36:00,879 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,879 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,880 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,880 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,881 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,881 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-03 22:36:00,881 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,881 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3ff9415c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,883 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4
2025-04-03 22:36:00,883 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-03 22:36:00,884 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,886 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,886 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,888 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,888 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,888 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,890 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,890 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 7 ms
2025-04-03 22:36:00,891 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,891 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,892 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,893 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,893 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,894 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,894 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,895 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,895 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,895 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,898 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,898 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,899 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,900 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,900 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,900 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,901 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,901 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,901 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,901 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,902 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,902 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=26ms
2025-04-03 22:36:00,904 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /products/top
2025-04-03 22:36:00,904 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,905 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /products/top?limit=4
2025-04-03 22:36:00,905 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,905 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:36:00,906 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,906 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:36:00,907 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:36:00,907 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:36:00,907 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,909 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,909 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,909 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-03 22:36:00,909 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,909 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@50c650c, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,909 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /products/top?limit=4
2025-04-03 22:36:00,909 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getTopProducts
2025-04-03 22:36:00,909 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,909 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,909 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,909 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,909 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,909 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,918 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getTopProducts executed in 0 ms
2025-04-03 22:36:00,918 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,919 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,920 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,920 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,921 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,921 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,922 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,923 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,926 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,926 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,927 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,928 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,929 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,929 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,930 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,931 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,931 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,932 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,932 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,933 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,934 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=30ms
2025-04-03 22:36:00,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-03 22:36:00,936 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:00,936 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=4
2025-04-03 22:36:00,936 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:00,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:00,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:36:00,937 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:00,937 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:36:00,939 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:36:00,939 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:36:00,940 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:00,940 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:00,940 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:00,941 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-03 22:36:00,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:00,942 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1f9476a7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:00,942 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=4
2025-04-03 22:36:00,943 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-03 22:36:00,943 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:00,944 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,945 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,946 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,946 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,947 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:00,948 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,949 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:00,949 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 6 ms
2025-04-03 22:36:00,950 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,950 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,951 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,951 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,952 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,952 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,953 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,953 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,954 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,954 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:00,955 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:00,955 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:00,956 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,956 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,957 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,957 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:00,958 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:00,958 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,959 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:00,959 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:00,960 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:00,960 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=24ms
2025-04-03 22:36:06,280 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /wishlist
2025-04-03 22:36:06,280 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:06,280 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /wishlist
2025-04-03 22:36:06,280 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /wishlist, Method: GET
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:36:06,280 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:36:06,280 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:06,280 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:06,285 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:06,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:06,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:06,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-03 22:36:06,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:06,285 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@25d6b7ac, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:06,285 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /wishlist
2025-04-03 22:36:06,285 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:06,285 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:06,285 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:06,285 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:06,285 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)]
2025-04-03 22:36:06,285 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-9] Get wishlist request for user: 3
2025-04-03 22:36:06,292 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-03 22:36:06,292 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:06,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:06,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:06,293 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:06,293 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@1654cf97],[]>]
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getWishlist executed in 8 ms
2025-04-03 22:36:06,293 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:06,293 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=13ms
2025-04-03 22:36:06,293 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /wishlist
2025-04-03 22:36:06,293 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:06,293 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /wishlist
2025-04-03 22:36:06,293 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /wishlist, Method: GET
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:36:06,293 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:36:06,301 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:36:06,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:06,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:06,301 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:06,301 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:06,303 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:06,303 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-03 22:36:06,303 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:06,303 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@cf69d41, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:06,303 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /wishlist
2025-04-03 22:36:06,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:06,307 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:06,309 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:06,309 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-7] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:06,309 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)]
2025-04-03 22:36:06,309 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-7] Get wishlist request for user: 3
2025-04-03 22:36:06,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-03 22:36:06,309 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:06,311 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:06,311 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:06,313 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:06,313 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:06,313 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@3e2bb27d],[]>]
2025-04-03 22:36:06,313 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getWishlist executed in 4 ms
2025-04-03 22:36:06,313 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:06,313 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=20ms
2025-04-03 22:36:15,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/2
2025-04-03 22:36:15,975 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:15,975 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/2
2025-04-03 22:36:15,975 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:15,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/2, Method: GET
2025-04-03 22:36:15,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:15,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:36:15,975 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:15,977 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:36:15,977 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:36:15,977 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:36:15,979 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:15,979 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:15,980 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:15,980 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:15,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:15,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-03 22:36:15,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:15,982 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7c7674b3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:15,982 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/2
2025-04-03 22:36:15,983 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getProductById with args: [2]
2025-04-03 22:36:15,984 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:15,985 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:15,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:36:15,986 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getProductById executed in 3 ms
2025-04-03 22:36:15,987 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:15,987 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:15,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:15,988 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:15,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:15,989 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:15,989 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:15,990 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=15ms
2025-04-03 22:36:15,991 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/2
2025-04-03 22:36:15,991 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:15,991 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/2
2025-04-03 22:36:15,991 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/2, Method: GET
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:36:15,991 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:15,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:15,991 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /wishlist/check/2
2025-04-03 22:36:15,991 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:15,991 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /wishlist/check/2
2025-04-03 22:36:15,991 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /wishlist/check/2, Method: GET
2025-04-03 22:36:15,991 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:15,991 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:36:15,991 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@146afe85, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,002 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/2
2025-04-03 22:36:16,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:16,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:16,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getProductById with args: [2]
2025-04-03 22:36:16,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:16,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3376bbc9, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,002 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /wishlist/check/2
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getProductById with result: [<200 OK OK,Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54),[]>]
2025-04-03 22:36:16,002 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getProductById executed in 0 ms
2025-04-03 22:36:16,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,002 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,002 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,006 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:16,006 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-1] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 2]
2025-04-03 22:36:16,006 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-1] Check in wishlist request: user=3, productId=2
2025-04-03 22:36:16,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,006 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-1] Checking if product 2 is in wishlist for user 3
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,006 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:16,006 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=15ms
2025-04-03 22:36:16,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [2] as [BIGINT] - [2]
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING checkInWishlist with result: [<200 OK OK,true,[]>]
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method checkInWishlist executed in 0 ms
2025-04-03 22:36:16,006 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:16,006 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=15ms
2025-04-03 22:36:16,006 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /wishlist/check/2
2025-04-03 22:36:16,006 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:16,006 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /wishlist/check/2
2025-04-03 22:36:16,006 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /wishlist/check/2, Method: GET
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:36:16,006 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:36:16,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:16,006 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:16,006 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@717e2031, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,022 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /wishlist/check/2
2025-04-03 22:36:16,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,022 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,022 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:16,022 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 2]
2025-04-03 22:36:16,022 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-3] Check in wishlist request: user=3, productId=2
2025-04-03 22:36:16,022 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-3] Checking if product 2 is in wishlist for user 3
2025-04-03 22:36:16,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:36:16,022 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:36:16,022 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,022 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [2] as [BIGINT] - [2]
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING checkInWishlist with result: [<200 OK OK,true,[]>]
2025-04-03 22:36:16,022 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method checkInWishlist executed in 0 ms
2025-04-03 22:36:16,022 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:16,022 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=16ms
2025-04-03 22:36:16,051 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:36:16,051 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:16,051 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=4
2025-04-03 22:36:16,051 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:16,051 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:16,051 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:16,051 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:36:16,051 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:16,054 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:36:16,054 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:36:16,055 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:36:16,056 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:16,056 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:16,057 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:16,057 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,058 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,059 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:36:16,059 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:16,059 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@7d8ab9a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,059 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=4
2025-04-03 22:36:16,059 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:36:16,060 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:16,061 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:16,061 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:16,062 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:16,062 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:16,063 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:16,063 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 4 ms
2025-04-03 22:36:16,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,064 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,065 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,065 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,065 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,066 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,066 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,066 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,067 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,069 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,069 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,070 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,070 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:16,070 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:16,071 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,071 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,072 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,072 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,072 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:16,073 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=22ms
2025-04-03 22:36:16,074 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-03 22:36:16,075 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:36:16,075 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4
2025-04-03 22:36:16,075 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2eada8c5, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:36:16,075 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:36:16,075 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 0 ms
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:36:16,075 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:36:16,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:16,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:36:16,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:36:16,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:36:16,090 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:36:16,090 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:36:16,090 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=16ms
2025-04-03 22:37:41,388 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products
2025-04-03 22:37:41,389 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,389 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products?sort=newest
2025-04-03 22:37:41,389 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,389 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products, Method: GET
2025-04-03 22:37:41,389 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,389 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:37:41,389 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,390 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:37:41,390 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /wishlist
2025-04-03 22:37:41,390 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,390 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,390 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /wishlist
2025-04-03 22:37:41,390 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=4
2025-04-03 22:37:41,390 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,390 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,390 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /wishlist, Method: GET
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:37:41,391 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:37:41,392 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:37:41,392 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:37:41,392 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:37:41,392 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /categories
2025-04-03 22:37:41,392 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:37:41,392 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,392 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/recommended
2025-04-03 22:37:41,392 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,392 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /categories
2025-04-03 22:37:41,392 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,392 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/recommended?limit=4
2025-04-03 22:37:41,392 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /categories, Method: GET
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/recommended, Method: GET
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:37:41,393 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,393 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,393 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,393 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,393 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,393 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:37:41,393 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:37:41,394 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:37:41,394 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:37:41,394 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:37:41,394 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,394 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,394 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@32481cd6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@73f95e28, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@15d733c0, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /wishlist
2025-04-03 22:37:41,396 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=4
2025-04-03 22:37:41,396 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products?sort=newest
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getAllProducts
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@5ee277e4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6e40fde4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,396 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /categories
2025-04-03 22:37:41,396 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/recommended?limit=4
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getAllCategories
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getRecommendedProducts with args: [4]
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-03 22:37:41,396 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:41,396 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-3] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,396 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)]
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,396 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-3] Get wishlist request for user: 3
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,396 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-03 22:37:41,396 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,402 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,402 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,403 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,403 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,404 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:37:41,404 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 10 ms
2025-04-03 22:37:41,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getAllCategories executed in 10 ms
2025-04-03 22:37:41,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getRecommendedProducts executed in 10 ms
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43)],[]>]
2025-04-03 22:37:41,406 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,406 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getAllProducts executed in 10 ms
2025-04-03 22:37:41,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,410 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,410 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,410 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,410 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,410 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@f3351da],[]>]
2025-04-03 22:37:41,410 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getWishlist executed in 14 ms
2025-04-03 22:37:41,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,410 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,410 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,410 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=20ms
2025-04-03 22:37:41,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,412 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,414 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,414 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,414 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,414 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /wishlist
2025-04-03 22:37:41,414 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,414 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /wishlist
2025-04-03 22:37:41,414 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,414 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /wishlist, Method: GET
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,414 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,414 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,417 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,417 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,417 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:37:41,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,417 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,417 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=25ms
2025-04-03 22:37:41,417 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:37:41,417 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:37:41,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,417 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,417 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,419 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: GET /categories
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,419 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,419 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing GET /categories
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,419 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,419 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Processing request to URL: /categories, Method: GET
2025-04-03 22:37:41,419 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,419 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,419 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found Authorization header with Bearer token
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] JWT token validation successful
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-5] Extracted username from JWT token: a1234
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Valid JWT token found for user: a1234
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@47c6a786, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /wishlist
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=32ms
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=30ms
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=34ms
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,422 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: GET /products/top
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing GET /products/top?limit=4
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,422 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] User authorities: [ROLE_USER]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found Authorization header with Bearer token
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-5] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@354318, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-5] Secured GET /categories
2025-04-03 22:37:41,422 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-9] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.getWishlist(com.example.tmdt.model.User); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â)]
2025-04-03 22:37:41,422 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-9] Get wishlist request for user: 3
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] JWT token validation successful
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] ENTERING getAllCategories
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-7] Extracted username from JWT token: a1234
2025-04-03 22:37:41,422 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products?sort=newest
2025-04-03 22:37:41,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        wishlist0_.id as id1_17_,
        wishlist0_.created_at as created_2_17_,
        wishlist0_.product_id as product_3_17_,
        wishlist0_.user_id as user_id4_17_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=?
2025-04-03 22:37:41,422 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Valid JWT token found for user: a1234
2025-04-03 22:37:41,422 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/recommended
2025-04-03 22:37:41,428 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,428 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        category0_.id as id1_0_,
        category0_.created_at as created_2_0_,
        category0_.description as descript3_0_,
        category0_.display_order as display_4_0_,
        category0_.image_url as image_ur5_0_,
        category0_.is_active as is_activ6_0_,
        category0_.name as name7_0_,
        category0_.parent_id as parent_i9_0_,
        category0_.updated_at as updated_8_0_ 
    from
        categories category0_
2025-04-03 22:37:41,428 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/recommended?limit=4
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products, Method: GET
2025-04-03 22:37:41,428 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/recommended, Method: GET
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] EXITING getAllCategories with result: [<200 OK OK,[Category(id=1, name=Electronics, description=Electronic devices and accessories, imageUrl=https://example.com/electronics.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04)],[]>]
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-5] Method getAllCategories executed in 6 ms
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] User authorities: [ROLE_USER]
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,428 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,432 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-7] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@40dbaf0a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,428 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,432 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-7] Secured GET /products/top?limit=4
2025-04-03 22:37:41,432 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,432 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,433 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,433 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,433 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,434 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,434 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@3c4a65c2, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,434 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products?sort=newest
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] ENTERING getTopProducts
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@46ceed4a, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,434 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] 
    select
        subcategor0_.parent_id as parent_i9_0_0_,
        subcategor0_.id as id1_0_0_,
        subcategor0_.id as id1_0_1_,
        subcategor0_.created_at as created_2_0_1_,
        subcategor0_.description as descript3_0_1_,
        subcategor0_.display_order as display_4_0_1_,
        subcategor0_.image_url as image_ur5_0_1_,
        subcategor0_.is_active as is_activ6_0_1_,
        subcategor0_.name as name7_0_1_,
        subcategor0_.parent_id as parent_i9_0_1_,
        subcategor0_.updated_at as updated_8_0_1_ 
    from
        categories subcategor0_ 
    where
        subcategor0_.parent_id=?
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getWishlist with result: [<200 OK OK,[com.example.tmdt.payload.response.ProductResponse@65034d0d],[]>]
2025-04-03 22:37:41,434 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getAllProducts
2025-04-03 22:37:41,435 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getWishlist executed in 13 ms
2025-04-03 22:37:41,435 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/recommended?limit=4
2025-04-03 22:37:41,435 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,435 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-5] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,435 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getRecommendedProducts with args: [4]
2025-04-03 22:37:41,435 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_
2025-04-03 22:37:41,435 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,435 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=21ms
2025-04-03 22:37:41,435 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,435 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,435 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=16ms
2025-04-03 22:37:41,435 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,436 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,436 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,436 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,436 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,436 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,437 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,437 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,438 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,438 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,438 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getRecommendedProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,438 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,439 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getRecommendedProducts executed in 4 ms
2025-04-03 22:37:41,439 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-7] Method getTopProducts executed in 5 ms
2025-04-03 22:37:41,439 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getAllProducts with result: [<200 OK OK,[Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43)],[]>]
2025-04-03 22:37:41,439 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getAllProducts executed in 5 ms
2025-04-03 22:37:41,439 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,439 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,440 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,440 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,440 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,440 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,441 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,441 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,441 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,441 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,441 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,441 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,442 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,442 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,442 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,442 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,442 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,443 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,445 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,446 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,446 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,446 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,446 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,446 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,446 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,447 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,447 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,447 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,448 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,448 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,448 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,448 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,449 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,449 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-7] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,449 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,449 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,449 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,450 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=28ms
2025-04-03 22:37:41,450 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=28ms
2025-04-03 22:37:41,450 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,450 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,450 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=28ms
2025-04-03 22:37:41,451 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: GET /products/top
2025-04-03 22:37:41,451 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,451 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing GET /products/top?limit=4
2025-04-03 22:37:41,451 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,451 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,452 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,452 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found Authorization header with Bearer token
2025-04-03 22:37:41,452 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,453 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] JWT token validation successful
2025-04-03 22:37:41,453 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-3] Extracted username from JWT token: a1234
2025-04-03 22:37:41,454 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Valid JWT token found for user: a1234
2025-04-03 22:37:41,454 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,455 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,455 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,455 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,456 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,456 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] User authorities: [ROLE_USER]
2025-04-03 22:37:41,456 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,456 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-3] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2eeb0c52, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,456 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-3] Secured GET /products/top?limit=4
2025-04-03 22:37:41,457 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] ENTERING getTopProducts
2025-04-03 22:37:41,457 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,458 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,458 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,459 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,459 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,459 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,460 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,461 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,461 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-3] Method getTopProducts executed in 4 ms
2025-04-03 22:37:41,461 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,461 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,462 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,462 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,463 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,463 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,463 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,464 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,464 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,465 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,465 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,465 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,466 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,466 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,466 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,467 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,467 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,468 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-3] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,468 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,468 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=17ms
2025-04-03 22:37:41,469 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /products/top
2025-04-03 22:37:41,470 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,470 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /products/top?limit=4
2025-04-03 22:37:41,470 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,470 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,470 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,470 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:37:41,470 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,471 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:37:41,471 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:37:41,471 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:37:41,472 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,472 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,472 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,473 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,474 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,474 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-03 22:37:41,474 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,474 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@711e7a9e, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,474 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /products/top?limit=4
2025-04-03 22:37:41,475 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING getTopProducts
2025-04-03 22:37:41,475 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,476 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,476 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,476 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,477 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,477 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,478 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,478 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method getTopProducts executed in 3 ms
2025-04-03 22:37:41,478 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,478 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,479 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,479 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,479 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,479 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,480 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,480 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,481 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,481 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,482 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,482 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,482 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,482 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,483 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,483 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,484 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,484 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,484 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,484 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=15ms
2025-04-03 22:37:41,485 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /products/top
2025-04-03 22:37:41,486 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,486 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /products/top?limit=4
2025-04-03 22:37:41,486 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,486 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,486 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,486 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:37:41,486 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,487 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:37:41,487 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:37:41,487 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:37:41,488 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,488 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,489 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,489 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:37:41,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,490 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@82b7528, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,490 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /products/top?limit=4
2025-04-03 22:37:41,490 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING getTopProducts
2025-04-03 22:37:41,491 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,491 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,492 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,492 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,492 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,493 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,493 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,493 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,494 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method getTopProducts executed in 4 ms
2025-04-03 22:37:41,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,494 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,495 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,495 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,496 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,496 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,497 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,497 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,497 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,497 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,498 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,498 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,498 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,499 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,499 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,499 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,499 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,499 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,500 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,500 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,500 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,501 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=16ms
2025-04-03 22:37:41,502 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-03 22:37:41,502 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,502 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=4
2025-04-03 22:37:41,502 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:37:41,503 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,503 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:37:41,504 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:37:41,504 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:37:41,504 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,505 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,505 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,505 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,506 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,506 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-03 22:37:41,506 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,506 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2475d1d1, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,507 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=4
2025-04-03 22:37:41,507 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-03 22:37:41,507 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,508 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,508 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,509 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,509 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,510 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,510 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,510 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,510 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 3 ms
2025-04-03 22:37:41,511 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,511 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,511 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,512 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,512 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,512 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,513 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,513 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,514 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,514 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,514 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,514 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,515 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,515 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,515 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,516 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,516 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,516 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,517 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,517 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=15ms
2025-04-03 22:37:41,518 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:37:41,518 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,519 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-03 22:37:41,519 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,519 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,519 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,519 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:37:41,519 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,519 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:37:41,520 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:37:41,520 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:37:41,521 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,521 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,521 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,522 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,523 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,523 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:37:41,523 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,523 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@2d397810, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,524 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-03 22:37:41,524 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:37:41,525 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,526 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,526 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,527 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,527 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,528 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,528 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,530 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,530 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 6 ms
2025-04-03 22:37:41,531 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,531 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,532 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,532 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,533 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,533 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,534 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,534 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,534 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,535 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,535 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,536 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,536 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,537 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,537 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,537 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,538 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,539 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,539 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,540 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,540 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=22ms
2025-04-03 22:37:41,541 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] REQUEST: GET /products/top
2025-04-03 22:37:41,541 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:41,542 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-9] Securing GET /products/top?limit=4
2025-04-03 22:37:41,542 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:41,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:41,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found Authorization header with Bearer token
2025-04-03 22:37:41,542 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:41,543 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] JWT token validation successful
2025-04-03 22:37:41,543 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-9] Extracted username from JWT token: a1234
2025-04-03 22:37:41,543 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Valid JWT token found for user: a1234
2025-04-03 22:37:41,545 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:41,545 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:41,545 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:41,546 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] User authorities: [ROLE_USER]
2025-04-03 22:37:41,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:41,547 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-9] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@1e4ecaa4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:41,547 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-9] Secured GET /products/top?limit=4
2025-04-03 22:37:41,547 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] ENTERING getTopProducts
2025-04-03 22:37:41,548 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:41,548 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,549 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,550 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:41,550 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,551 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:41,551 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-9] Method getTopProducts executed in 4 ms
2025-04-03 22:37:41,552 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,552 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,552 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,552 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,553 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,553 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,554 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,554 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,554 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,554 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:41,555 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:41,555 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:41,555 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,556 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,556 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,556 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:41,557 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:41,557 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,557 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-9] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:41,558 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-9] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:41,558 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-9] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:41,559 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-9] RESPONSE: Status=200, Time=18ms
2025-04-03 22:37:42,680 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] REQUEST: OPTIONS /products/4
2025-04-03 22:37:42,680 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] REQUEST: OPTIONS /products/4
2025-04-03 22:37:42,681 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,681 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,681 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-7] Securing OPTIONS /products/4
2025-04-03 22:37:42,681 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-5] Securing OPTIONS /products/4
2025-04-03 22:37:42,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-5] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,681 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-7] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,682 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-5] RESPONSE: Status=200, Time=1ms
2025-04-03 22:37:42,682 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-7] RESPONSE: Status=200, Time=2ms
2025-04-03 22:37:42,683 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] REQUEST: GET /products/4
2025-04-03 22:37:42,683 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,683 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-8] Securing GET /products/4
2025-04-03 22:37:42,683 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Processing request to URL: /products/4, Method: GET
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found Authorization header with Bearer token
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] JWT token validation successful
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-8] Extracted username from JWT token: a1234
2025-04-03 22:37:42,683 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Valid JWT token found for user: a1234
2025-04-03 22:37:42,683 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:42,683 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:42,689 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:42,689 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,690 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,690 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] User authorities: [ROLE_USER]
2025-04-03 22:37:42,690 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:42,690 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-8] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@55cd16ab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,690 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-8] Secured GET /products/4
2025-04-03 22:37:42,691 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] ENTERING getProductById with args: [4]
2025-04-03 22:37:42,692 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:37:42,692 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,693 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] EXITING getProductById with result: [<200 OK OK,Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43),[]>]
2025-04-03 22:37:42,693 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-8] Method getProductById executed in 2 ms
2025-04-03 22:37:42,693 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,693 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,694 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,694 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-8] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,694 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-8] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,694 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-8] RESPONSE: Status=200, Time=11ms
2025-04-03 22:37:42,695 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] REQUEST: GET /products/4
2025-04-03 22:37:42,696 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,696 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-4] Securing GET /products/4
2025-04-03 22:37:42,696 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,696 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Processing request to URL: /products/4, Method: GET
2025-04-03 22:37:42,696 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,696 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found Authorization header with Bearer token
2025-04-03 22:37:42,696 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,697 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] JWT token validation successful
2025-04-03 22:37:42,697 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-4] Extracted username from JWT token: a1234
2025-04-03 22:37:42,697 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Valid JWT token found for user: a1234
2025-04-03 22:37:42,698 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:42,698 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:42,699 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] REQUEST: OPTIONS /wishlist/check/4
2025-04-03 22:37:42,699 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] HEADERS: host=localhost:8080, connection=keep-alive, accept=*/*, access-control-request-method=GET, access-control-request-headers=authorization, origin=http://localhost:3000, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, sec-fetch-mode=cors, sec-fetch-site=same-site, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,699 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:42,699 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-3] Securing OPTIONS /wishlist/check/4
2025-04-03 22:37:42,699 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,699 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,699 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-3] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,699 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-3] RESPONSE: Status=200, Time=0ms
2025-04-03 22:37:42,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] User authorities: [ROLE_USER]
2025-04-03 22:37:42,700 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:42,701 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-4] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@611c017b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,701 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-4] Secured GET /products/4
2025-04-03 22:37:42,701 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] ENTERING getProductById with args: [4]
2025-04-03 22:37:42,702 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:37:42,702 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] REQUEST: GET /wishlist/check/4
2025-04-03 22:37:42,702 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,702 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-10] Securing GET /wishlist/check/4
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Processing request to URL: /wishlist/check/4, Method: GET
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found Authorization header with Bearer token
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] EXITING getProductById with result: [<200 OK OK,Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43),[]>]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] JWT token validation successful
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-4] Method getProductById executed in 2 ms
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-10] Extracted username from JWT token: a1234
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Valid JWT token found for user: a1234
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-4] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-4] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,703 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-4] RESPONSE: Status=200, Time=8ms
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] User authorities: [ROLE_USER]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-10] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@6053b950, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-10] Secured GET /wishlist/check/4
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,703 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:42,703 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-10] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 4]
2025-04-03 22:37:42,703 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-10] Check in wishlist request: user=3, productId=4
2025-04-03 22:37:42,703 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-10] Checking if product 4 is in wishlist for user 3
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-10] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-10] binding parameter [2] as [BIGINT] - [4]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-10] Method checkInWishlist executed in 0 ms
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-10] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,703 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-10] RESPONSE: Status=200, Time=1ms
2025-04-03 22:37:42,703 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] REQUEST: GET /wishlist/check/4
2025-04-03 22:37:42,703 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-2] Securing GET /wishlist/check/4
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Processing request to URL: /wishlist/check/4, Method: GET
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found Authorization header with Bearer token
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] JWT token validation successful
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-2] Extracted username from JWT token: a1234
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Valid JWT token found for user: a1234
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:42,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:42,703 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] User authorities: [ROLE_USER]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:42,703 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-2] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@54347438, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,703 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-2] Secured GET /wishlist/check/4
2025-04-03 22:37:42,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:42,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,718 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:42,718 DEBUG org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor [http-nio-8080-exec-2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.tmdt.controller.WishlistController.checkInWishlist(com.example.tmdt.model.User,java.lang.Long); target is of class [com.example.tmdt.controller.WishlistController]
2025-04-03 22:37:42,718 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] ENTERING checkInWishlist with args: [User(id=3, username=a1234, email=leloilonglon@gmail.com, password=$2a$10$xXfAob.90H1heMq/BlCF1.ZkPx4GO/8M1VfZsFB7sddAlB4c5uD8G, fullName=sYn good72a, phoneNumber=123a, address=â), 4]
2025-04-03 22:37:42,718 INFO com.example.tmdt.controller.WishlistController [http-nio-8080-exec-2] Check in wishlist request: user=3, productId=4
2025-04-03 22:37:42,718 INFO com.example.tmdt.service.WishlistService [http-nio-8080-exec-2] Checking if product 4 is in wishlist for user 3
2025-04-03 22:37:42,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        product0_.id as id1_8_0_,
        product0_.average_rating as average_2_8_0_,
        product0_.category_id as categor14_8_0_,
        product0_.created_at as created_3_8_0_,
        product0_.description as descript4_8_0_,
        product0_.discount_percentage as discount5_8_0_,
        product0_.image_url as image_ur6_8_0_,
        product0_.is_featured as is_featu7_8_0_,
        product0_.name as name8_8_0_,
        product0_.price as price9_8_0_,
        product0_.review_count as review_10_8_0_,
        product0_.sold_count as sold_co11_8_0_,
        product0_.stock as stock12_8_0_,
        product0_.updated_at as updated13_8_0_,
        category1_.id as id1_0_1_,
        category1_.created_at as created_2_0_1_,
        category1_.description as descript3_0_1_,
        category1_.display_order as display_4_0_1_,
        category1_.image_url as image_ur5_0_1_,
        category1_.is_active as is_activ6_0_1_,
        category1_.name as name7_0_1_,
        category1_.parent_id as parent_i9_0_1_,
        category1_.updated_at as updated_8_0_1_ 
    from
        products product0_ 
    left outer join
        categories category1_ 
            on product0_.category_id=category1_.id 
    where
        product0_.id=?
2025-04-03 22:37:42,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] 
    select
        wishlist0_.id as col_0_0_ 
    from
        wishlists wishlist0_ 
    where
        wishlist0_.user_id=? 
        and wishlist0_.product_id=? limit ?
2025-04-03 22:37:42,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,718 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-2] binding parameter [2] as [BIGINT] - [4]
2025-04-03 22:37:42,718 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] EXITING checkInWishlist with result: [<200 OK OK,false,[]>]
2025-04-03 22:37:42,718 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-2] Method checkInWishlist executed in 0 ms
2025-04-03 22:37:42,718 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-2] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,718 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-2] RESPONSE: Status=200, Time=15ms
2025-04-03 22:37:42,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] REQUEST: GET /products/top
2025-04-03 22:37:42,743 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,743 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-6] Securing GET /products/top?limit=4
2025-04-03 22:37:42,743 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found Authorization header with Bearer token
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] JWT token validation successful
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-6] Extracted username from JWT token: a1234
2025-04-03 22:37:42,743 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Valid JWT token found for user: a1234
2025-04-03 22:37:42,745 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:42,746 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:42,746 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:42,746 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,747 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,747 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] User authorities: [ROLE_USER]
2025-04-03 22:37:42,747 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:42,747 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-6] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@706b7dab, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,747 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-6] Secured GET /products/top?limit=4
2025-04-03 22:37:42,748 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] ENTERING getTopProducts
2025-04-03 22:37:42,748 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:42,749 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:42,749 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,749 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:42,750 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,750 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:42,750 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,751 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:42,751 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-6] Method getTopProducts executed in 3 ms
2025-04-03 22:37:42,751 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,752 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,752 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,752 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,753 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:42,753 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:42,754 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,754 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:42,754 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,754 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:42,755 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:42,755 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,756 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,756 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,756 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,756 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,757 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,757 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,757 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,757 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-6] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,758 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-6] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,758 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-6] RESPONSE: Status=200, Time=15ms
2025-04-03 22:37:42,759 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] REQUEST: GET /products/top
2025-04-03 22:37:42,759 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] HEADERS: host=localhost:8080, connection=keep-alive, sec-ch-ua-platform="Windows", user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0, accept=application/json, text/plain, */*, sec-ch-ua="Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134", sec-ch-ua-mobile=?0, origin=http://localhost:3000, sec-fetch-site=same-site, sec-fetch-mode=cors, sec-fetch-dest=empty, referer=http://localhost:3000/, accept-encoding=gzip, deflate, br, zstd, accept-language=en-GB,en;q=0.9,en-US;q=0.8, 
2025-04-03 22:37:42,759 DEBUG org.springframework.security.web.FilterChainProxy [http-nio-8080-exec-1] Securing GET /products/top?limit=4
2025-04-03 22:37:42,759 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Set SecurityContextHolder to empty SecurityContext
2025-04-03 22:37:42,759 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Processing request to URL: /products/top, Method: GET
2025-04-03 22:37:42,759 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authorization header: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,759 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found Authorization header with Bearer token
2025-04-03 22:37:42,759 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Found JWT token in request: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhMTIzNCIsImlhdCI6MTc0MzY3MTUwMiwiZXhwIjoxNzQzNzU3OTAyfQ.WCb7K-tTn6nCncL_vVrr1gxmoBJdQcAeATOl5DCkFxLMKc1pX_Rwpr8PPZO6nEg_D2BDfryWxU6JtOD0_MZ4aw
2025-04-03 22:37:42,760 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] JWT token validation successful
2025-04-03 22:37:42,760 DEBUG com.example.tmdt.security.jwt.JwtUtils [http-nio-8080-exec-1] Extracted username from JWT token: a1234
2025-04-03 22:37:42,760 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Valid JWT token found for user: a1234
2025-04-03 22:37:42,761 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_,
        user0_.address as address2_16_,
        user0_.email as email3_16_,
        user0_.full_name as full_nam4_16_,
        user0_.password as password5_16_,
        user0_.phone_number as phone_nu6_16_,
        user0_.username as username7_16_ 
    from
        users user0_ 
    where
        user0_.username=?
2025-04-03 22:37:42,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [VARCHAR] - [a1234]
2025-04-03 22:37:42,762 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        roles0_.user_id as user_id1_15_0_,
        roles0_.role_id as role_id2_15_0_,
        role1_.id as id1_12_1_,
        role1_.name as name2_12_1_ 
    from
        user_roles roles0_ 
    inner join
        roles role1_ 
            on roles0_.role_id=role1_.id 
    where
        roles0_.user_id=?
2025-04-03 22:37:42,762 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,763 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User details loaded for: a1234, User class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,763 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] User authorities: [ROLE_USER]
2025-04-03 22:37:42,763 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Set authentication for user: a1234 with authorities: [ROLE_USER]
2025-04-03 22:37:42,763 DEBUG com.example.tmdt.security.jwt.AuthTokenFilter [http-nio-8080-exec-1] Authentication set in SecurityContext: UsernamePasswordAuthenticationToken [Principal=com.example.tmdt.security.services.UserDetailsImpl@10673234, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]], Principal class: com.example.tmdt.security.services.UserDetailsImpl
2025-04-03 22:37:42,763 DEBUG org.springframework.security.web.FilterChainProxy$VirtualFilterChain [http-nio-8080-exec-1] Secured GET /products/top?limit=4
2025-04-03 22:37:42,764 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] ENTERING getTopProducts
2025-04-03 22:37:42,764 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        product0_.id as id1_8_,
        product0_.average_rating as average_2_8_,
        product0_.category_id as categor14_8_,
        product0_.created_at as created_3_8_,
        product0_.description as descript4_8_,
        product0_.discount_percentage as discount5_8_,
        product0_.image_url as image_ur6_8_,
        product0_.is_featured as is_featu7_8_,
        product0_.name as name8_8_,
        product0_.price as price9_8_,
        product0_.review_count as review_10_8_,
        product0_.sold_count as sold_co11_8_,
        product0_.stock as stock12_8_,
        product0_.updated_at as updated13_8_ 
    from
        products product0_ 
    order by
        product0_.average_rating desc limit ?
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        category0_.id as id1_0_0_,
        category0_.created_at as created_2_0_0_,
        category0_.description as descript3_0_0_,
        category0_.display_order as display_4_0_0_,
        category0_.image_url as image_ur5_0_0_,
        category0_.is_active as is_activ6_0_0_,
        category0_.name as name7_0_0_,
        category0_.parent_id as parent_i9_0_0_,
        category0_.updated_at as updated_8_0_0_ 
    from
        categories category0_ 
    where
        category0_.id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,765 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] EXITING getTopProducts with result: [<200 OK OK,[Product(id=2, name=MacBook Pro M1, description=Powerful laptop with M1 chip, price=1299.99, stock=30, imageUrl=https://example.com/macbook.jpg, category=Category(id=3, name=Laptops, description=Portable computers, imageUrl=https://example.com/laptops.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.9, reviewCount=85, soldCount=300, isFeatured=true, discountPercentage=5.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:37:54), Product(id=1, name=iPhone 13 Pro, description=Latest iPhone model with advanced features, price=999.99, stock=50, imageUrl=https://example.com/iphone13.jpg, category=Category(id=2, name=Smartphones, description=Mobile phones and accessories, imageUrl=https://example.com/smartphones.jpg, isActive=true, displayOrder=1, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.8, reviewCount=120, soldCount=500, isFeatured=true, discountPercentage=10.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:38:28), Product(id=4, name=Summer Dress, description=Light and breezy summer dress, price=49.99, stock=149, imageUrl=https://example.com/dress.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.7, reviewCount=180, soldCount=800, isFeatured=true, discountPercentage=15.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:39:43), Product(id=3, name=Classic T-Shirt, description=Comfortable cotton t-shirt, price=29.99, stock=199, imageUrl=https://example.com/tshirt.jpg, category=Category(id=4, name=Fashion, description=Clothing and accessories, imageUrl=https://example.com/fashion.jpg, isActive=true, displayOrder=2, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-02T16:06:04), averageRating=4.5, reviewCount=250, soldCount=1000, isFeatured=false, discountPercentage=0.0, createdAt=2025-04-02T16:06:04, updatedAt=2025-04-03T16:41:29)],[]>]
2025-04-03 22:37:42,765 DEBUG com.example.tmdt.utils.LoggerUtil [http-nio-8080-exec-1] Method getTopProducts executed in 1 ms
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [1]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        user0_.id as id1_16_0_,
        user0_.address as address2_16_0_,
        user0_.email as email3_16_0_,
        user0_.full_name as full_nam4_16_0_,
        user0_.password as password5_16_0_,
        user0_.phone_number as phone_nu6_16_0_,
        user0_.username as username7_16_0_,
        roles1_.user_id as user_id1_15_1_,
        role2_.id as role_id2_15_1_,
        role2_.id as id1_12_2_,
        role2_.name as name2_12_2_ 
    from
        users user0_ 
    left outer join
        user_roles roles1_ 
            on user0_.id=roles1_.user_id 
    left outer join
        roles role2_ 
            on roles1_.role_id=role2_.id 
    where
        user0_.id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [2]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [4]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        images0_.product_id as product_5_6_0_,
        images0_.id as id1_6_0_,
        images0_.id as id1_6_1_,
        images0_.created_at as created_2_6_1_,
        images0_.display_order as display_3_6_1_,
        images0_.image_url as image_ur4_6_1_,
        images0_.product_id as product_5_6_1_ 
    from
        product_images images0_ 
    where
        images0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,765 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] 
    select
        reviews0_.product_id as product_7_11_0_,
        reviews0_.id as id1_11_0_,
        reviews0_.id as id1_11_1_,
        reviews0_.comment as comment2_11_1_,
        reviews0_.created_at as created_3_11_1_,
        reviews0_.product_id as product_7_11_1_,
        reviews0_.rating as rating4_11_1_,
        reviews0_.title as title5_11_1_,
        reviews0_.updated_at as updated_6_11_1_,
        reviews0_.user_id as user_id8_11_1_ 
    from
        reviews reviews0_ 
    where
        reviews0_.product_id=?
2025-04-03 22:37:42,765 TRACE org.hibernate.type.descriptor.sql.BasicBinder [http-nio-8080-exec-1] binding parameter [1] as [BIGINT] - [3]
2025-04-03 22:37:42,765 DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter [http-nio-8080-exec-1] Cleared SecurityContextHolder to complete request
2025-04-03 22:37:42,765 INFO com.example.tmdt.filter.RequestLoggingFilter [http-nio-8080-exec-1] RESPONSE: Status=200, Time=6ms
2025-04-03 22:50:37,909 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:50:37,911 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2025-04-03 22:50:37,918 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2025-04-03 22:50:41,703 INFO org.springframework.boot.StartupInfoLogger [main] Starting TmdtApplication using Java 17.0.12 on MyPC with PID 15804 (E:\tmdt\backend\target\classes started by leloi in E:\tmdt\backend)
2025-04-03 22:50:41,703 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2025-04-03 22:50:42,210 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-03 22:50:42,276 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 59 ms. Found 15 JPA repository interfaces.
2025-04-03 22:50:42,838 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2025-04-03 22:50:42,846 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2025-04-03 22:50:42,847 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2025-04-03 22:50:42,848 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-04-03 22:50:42,924 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2025-04-03 22:50:42,924 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1198 ms
2025-04-03 22:50:43,374 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:50:44,448 ERROR com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Exception during pool initialization.
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:115)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:272)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223)
	at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:295)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:252)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:223)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:173)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:693)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:510)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:642)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:642)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:213)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:176)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:171)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:156)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:262)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:236)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4936)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:795)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:249)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:922)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:104)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:481)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at com.example.tmdt.TmdtApplication.main(TmdtApplication.java:12)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:121)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 141 common frames omitted
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 144 common frames omitted
2025-04-03 22:50:45,581 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-03 22:50:45,954 DEBUG org.springframework.web.filter.GenericFilterBean [main] Filter 'authenticationJwtTokenFilter' configured for use
2025-04-03 22:50:47,329 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@14c1cba6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f78c132, org.springframework.security.web.context.SecurityContextPersistenceFilter@68823b6b, org.springframework.security.web.header.HeaderWriterFilter@741f8cf, org.springframework.web.filter.CorsFilter@57bd6a8f, org.springframework.security.web.authentication.logout.LogoutFilter@1e470a51, com.example.tmdt.security.jwt.AuthTokenFilter@604e8a6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@560e1459, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6aa7d7a0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a4bee4e, org.springframework.security.web.session.SessionManagementFilter@183e8c8a, org.springframework.security.web.access.ExceptionTranslationFilter@37e0614e, org.springframework.security.web.access.intercept.AuthorizationFilter@4290fcd7]
2025-04-03 22:50:47,407 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-03 22:50:47,499 INFO com.example.tmdt.config.WebMvcConfig [main] Added CurrentUserArgumentResolver to Spring MVC
2025-04-03 22:50:47,886 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2025-04-03 22:50:47,893 INFO org.springframework.boot.StartupInfoLogger [main] Started TmdtApplication in 6.578 seconds (JVM running for 7.227)
2025-04-03 22:50:47,900 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2025-04-03 22:50:47,911 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
