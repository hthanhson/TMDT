1.2.3 Các chức năng của hệ thống tra cứu ảnh dựa trên nội dung 
Một hệ thống tra cứu ảnh dựa trên nội dung tiêu biểu không chỉ liên quan tới các nguồn thông tin trong những dạng khác nhau (ví dụ như văn bản, ảnh, video) mà còn liên quan đến nhu cầu của người sử dụng. Về cơ bản nó phân tích cả nội dung của nguồn thông tin cũng như truy vấn của người sử dụng và sau đó đối sánh chúng để tìm ra những tiêu chí có liên quan này. Những chức năng chính của một hệ thống tra cứu ảnh bao gồm: 
1) Phân tích nội dung của nguồn thông tin và biểu diễn nội dung của các nguồn thông tin được phân tích phù hợp với sự đối sánh truy vấn của người sử dụng (không gian của thông tin nguồn được chuyển đổi thành không gian đặc điểm với mục đích đối sánh nhanh trong bước tiếp theo). Bước này thường là mất nhiều thời gian cho việc xử lý tuần tự các thông tin nguồn (ảnh) trong cơ sở dữ liệu. Nó chỉ phải làm một lần và có thể làm độc lập. 
2) Phân tích các truy vấn của người dùng và biểu diễn chúng thành các dạng phù hợp với việc đối sánh với cơ sở dữ liệu nguồn. Nhiệm vụ của bước này giống với bước trước nhưng chỉ được áp dụng với những ảnh truy vấn. 
3) Xác định chiến lược để đối sánh tìm kiếm truy vấn với thông tin được lưu trữ trong cơ sở dữ liệu. Bước này có thể thực hiện trực tuyến và thực hiện rất nhanh. Công nghệ đánh chỉ số hiện tại có thể được sử dụng để nhận dạng không gian đặc điểm để tăng tốc độ xử lý đối sánh. 
4) Tạo ra sự điều chỉnh cần thiết trong hệ thống (thường là bằng cách đối chiếu các tham số trong công nghệ đối sánh) dựa trên phản hồi từ người sử dụng hoặc những hình ảnh được tra cứu. 
Rõ ràng là từ trình bày ở trên ta thấy một mặt hệ thống tra cứu ảnh dựa trên nội dung có các nguồn thông tin trực quan trong các dạng khác nhau, mặt khác lại có cả các yêu cầu của người sử dụng. Chúng được liên kết với nhau qua một loạt các công việc như được minh hoạ trong hình 1.1. 
Yêu cầu của người sử dụng: Có rất nhiều cách có thể đưa truy vấn trực quan. Một phương pháp truy vấn tốt là phương pháp tự nhiên với người sử dụng tức là cung cấp đầy đủ thông tin từ người sử dụng để trích chọn những kết quả có ý nghĩa. Những phương pháp dưới đây thường được sử dụng trong kỹ thuật tra cứu ảnh dựa trên nội dung: 
Truy vấn bởi ví dụ (QBE-Query By Examble): Trong kiểu truy vấn này người sử dụng chỉ định một ảnh truy vấn gốc dựa trên cơ sở dữ liệu ảnh được tìm kiếm và so sánh. Ảnh truy vấn có thể là một ảnh chuẩn, một ảnh quét với độ phân giải thấp, hoặc người sử dụng vẽ bằng cách sử dụng công cụ vẽ đồ họa. Ưu điểm của kiểu hệ thống này là rất tự nhiên đối với người sử dụng để tra cứu ảnh trong cơ sở dữ liệu ảnh. 
Truy vấn bởi đặc điểm (QBF- Query By Feature): Trong hệ thống kiểu này người dùng chỉ định câu hỏi bởi những đặc điểm chỉ định rõ ràng đó là những đặc điểm được quan tâm trong tìm kiếm. Ví dụ người dùng có thể truy vấn cơ sở dữ liệu ảnh bởi việc đưa ra một câu lệnh “Đưa ra tất cả những ảnh có góc bên trên trái chứa 25% điểm màu vàng”. Truy vấn này được người dùng chỉ định bởi việc sử dụng công cụ giao diện đồ họa đặc biệt. Những người sử dụng chuyên nghiệp thì có thể tìm kiếm kiểu truy vấn tự nhiên này nhưng những người không chuyên thì rất khó. QBIC là một ví dụ về hệ thống tra cứu ảnh dựa trên nội dung mà người sử dụng truy vấn kiểu này. 
Những truy vấn dựa trên thuộc tính (Attribute-based queries): Những truy vấn dựa trên thuộc tính sử dụng những chú giải kết cấu được trích chọn đầu tiên bởi sự lỗ lực của con người như khoá tra cứu. Mô tả kiểu này đòi hỏi phải có mức trừu tượng cao, cái rất khó đạt được mức độ tự động hoá hoàn toàn bởi vì ảnh gồm rất nhiều thông tin và rất khó có thể tổng kết bằng một ít từ khoá. Trong khi phương pháp này nhìn chung là nhanh hơn và dễ thực thi hơn thì nó vốn có sự chủ quan và mơ hồ ở mức cao như đã giới thiệu phần trước. 
Phương pháp truy vấn nào là tự nhiên nhất ? Với người sử dụng nói chung thì chắc chắn là truy vấn dựa trên những thuộc tính. Người sử dụng đa số là thích hỏi hệ thống tra cứu ảnh dựa trên nội dung bởi câu hỏi tự nhiên “Đưa ra cho tôi tất cả những ảnh từ hai năm trước”, hoặc là “Tìm tất cả các ảnh trên Internet mà có bàn phím của máy tính”. Việc ánh xạ câu hỏi bằng ngôn ngữ tự nhiên này thành truy vấn trên cơ sở dữ liệu ảnh là vô cùng khó đối với việc sử dụng những phương pháp được tự động. Khả năng những máy tính thực hiện nhận dạng đối tượng tự động trên những ảnh vẫn đang là vấn đề nghiên cứu mở. Hầu hết những nghiên cứu cũng như các hệ thống mang tính thương mại đều tập trung xây dựng những hệ thống thực hiện tốt với những phương pháp QBE.
Trích chọn đặc điểm 
Công nghệ đánh chỉ số
Công nghệ đối sánh
Ảnh tra cứu được
Cơ 
sở 
dữ liệu ảnh
CSDL đặc điểm
Ảnh truy vấn
Đặc điểm truy vấn
Phân tích truy vấn
Người sử dụng
Hình 1.1. Các chức năng chính của hệ thống tra cứu ảnh dựa trên nội dung
1.2.4 Các phương pháp tra cứu ảnh dựa trên nội dung.
1.2.4.1. Tra cứu ảnh dựa trên màu sắc. 
Tra cứu ảnh dựa trên màu sắc hầu hết là biến đổi dựa trên ý tưởng giống nhau của các biểu đồ màu. Mỗi ảnh khi đưa vào tập hợp ảnh đều được phân tích, tính toán một biểu đồ màu. Sau đó, biểu đồ màu của mỗi ảnh sẽ được lưu trữ trong cơ sở dữ liệu. 
Khi tìm kiếm, người sử dụng có thể xác định tỷ lệ của mỗi màu mong muốn (ví dụ 75% Blue, 25% Red) hoặc đưa ra một ảnh mẫu với biểu đồ màu đã được tính toán. Quá trình tra cứu sẽ đối sánh biểu đồ màu này với biểu đồ màu trong cơ sở dữ liệu để tìm ra kết quả tương tự nhất. 
Kỹ thuật đối sánh được sử dụng phổ biến nhất là biểu đồ màu giao nhau được phát triển đầu tiên bởi Swain. Những kỹ thuật cải tiến từ kỹ thuật này ngày nay được sử dụng rộng rãi trong các hệ thống tra cứu ảnh hiện thời. Kết quả của các hệ thống này đã tạo những ấn tượng khá sâu sắc. 
1.2.4.2. Tra cứu ảnh dựa trên kết cấu. 
Khả năng tra cứu ảnh dựa trên kết cấu tương tự dường như không hiệu quả nhưng khả năng đối sánh dựa trên đặc điểm này thường có lợi cho việc phân biệt các vùng ảnh với màu tương tự (ví dụ như bầu trời và biển hoặc lá cây và cỏ). Một loạt các kỹ thuật đã được sử dụng cho việc đo kết cấu tương tự. Công nghệ tốt nhất được thiết lập dựa trên mô hình thống kê có thể tính toán được khoảng cách của kết cấu như mức độ tương phản, độ thô, phương hướng và tính cân đối hoặc chu kỳ, phương hướng và tính ngẫu nhiên. Các phương pháp phân tích kết cấu cho tra cứu thường sử dụng những bộ lọc Gabor. Các truy vấn kết cấu có thể được trình bày tương tự như truy vấn màu sắc bằng việc lựa chọn những mẫu kết cấu như mong muốn từ bảng màu hoặc bằng việc cung cấp ảnh truy vấn mẫu. Hệ thống sau đó sẽ tra cứu những ảnh với giá trị độ đo kết cấu giống nhau nhất với truy vấn. 
1.2.4.3. Tra cứu ảnh dựa trên hình dạng. 
Khả năng tra cứu bởi hình dạng có lẽ là nhu cầu hiển nhiên nhất ở mức độ nguyên thủy. Không như kết cấu, hình dạng là một khái niệm hoàn toàn rõ ràng, và bằng chứng là những vật thể tự nhiên đầu tiên được nhận thấy bởi hình dạng của chúng . Số lượng đặc điểm cơ bản của hình dạng đối tượng được tính toán cho mỗi đối tượng xác định trong mỗi ảnh. Hai kiểu chính của đặc điểm hình dạng thường được sử dụng là đặc điểm tổng thể (như tỷ lệ bên ngoài), và những đặc điểm cục bộ (như tập các đoạn biên liên tiếp). Các phương pháp khác đề cập tới sự đối sánh hình dạng bao gồm sự biến dạng co giãn của các khuôn dạng.... 
Những truy vấn đối với hệ thống tra cứu hình dạng thường được biểu diễn bằng cách xác định một hình ảnh mẫu để thực hiện như là hình thức truy vấn hoặc như là một bản phác thảo được vẽ ra bởi người sử dụng . 
1.2.5. Những hệ thống tra cứu ảnh dựa trên nội dung.
1.2.5.1. Hệ thống QBIC (Query By Image Content). 
Hệ thống QBIC cho phép người sử dụng tra cứu ảnh dựa vào màu sắc, hình dạng và kết cấu. QBIC cung cấp một số phương pháp: Simple, Multi-feature, và Multi-pass.
	Phương pháp truy vấn Simple chỉ sử dụng một đặc điểm cụ thể để tra cứu ảnh.
	Truy vấn Multi-feature bao gồm nhiều hơn một đặc điểm và mọi đặc điểm đều có trọng số như nhau trong suốt quá trình tìm kiếm. 
	Truy vấn Multi-pass sử dụng đầu ra của các truy vấn trước làm cơ sở cho bước tiếp theo. Người sử dụng có thể vẽ ra và chỉ định màu, kết cấu mẫu của hình ảnh yêu cầu. 
Trong hệ thống QBIC màu tương tự được tính toán bằng độ đo bình phương sử dụng biểu đồ màu k phần tử và màu trung bình được sử dụng như là bộ lọc để cải tiến hiệu quả của truy vấn.
1.2.5.2. Hệ thống Photobook. 
 Hệ thống này được phát triển ở viện kỹ thuật Massachusetts. Nó cho phép người sử dụng tra cứu ảnh dựa trên màu sắc, hình dạng và kết cấu. Hệ thống này cung cấp một tập các thuật toán đối sánh gồm: Euclidean, mahalanobis, histogram, vector space angle, Fourier peak, và wavelet tree distance... Hệ thống như là một công cụ bán tự động và có thể sinh ra một mẫu truy vấn dựa vào những ảnh mẫu được cung cấp bởi người sử dụng. Điều này cho phép người sử dụng trực tiếp đưa những yêu cầu truy vấn của họ với những lĩnh vực khác nhau, và mỗi lĩnh vực họ có thể thu được những mẫu truy vấn tối ưu.
1.2.5.3. Hệ thống VisualSEEK và WebSEEK. 
Cả hai hệ thống này đều được phát triển tại Trường Đại học Colombia. VisualSEEK là hệ thống cơ sở dữ liệu ảnh; Nó cho phép người sử dụng tra cứu ảnh dựa trên màu sắc, không gian miền và đặc điểm kết cấu. Thêm vào đó VisualSEEK còn cho phép người sử dụng tạo truy vấn bằng việc chỉ định vùng màu và những không gian vị trí của chúng. WebSEEK là một catalog ảnh và là công cụ tìm kiếm trên website. 
1.2.5.4. Hệ thống RetrievalWare. 
Hệ thống này được phát triển bởi tập đoàn công nghệ Excalibur cho phép người sử dụng tra cứu ảnh bởi nội dung màu, hình dạng, kết cấu, độ sáng, kết cấu màu và hệ số co. Người sử dụng có thể điều chỉnh tỷ trọng của những đặc điểm này trong suốt quá trình tìm kiếm. 
1.2.5.5. Hệ thống Imatch .
Hệ thống này cho phép người sử dụng tra cứu ảnh bởi nội dung màu, hình dạng, và kết cấu. Nó cung cấp một số phương pháp để tra cứu ảnh tương tự: Màu tương tự, màu và hình dạng, màu và hình dạng mờ, và phân bố màu. Màu tương tự để tra cứu những ảnh tương tự với ảnh mẫu dựa trên sự phân bố màu toàn cục. Màu và hình dạng thực hiện tra cứu bởi việc kết hợp cả hình dạng, kết cấu và màu. Màu và hình dạng mờ thực hiện thêm những bước xác định đối tượng trong ảnh mẫu. Phân bố màu cho phép người sử dụng xác định tỷ lệ phần trăm của một màu trong hình ảnh mong muốn. Imatch cũng cung cấp những đặc điểm khác nội dung để xác định ảnh: ảnh nhị phân, lưu trữ trong những định dạng khác và những ảnh có tên tương tự. 
1.2.6. Kết luận 
Trong chương này đã cung cấp cái nhìn tổng quan về một hệ thống tra cứu ảnh dựa trên nội dung. Những thành phần, những đặc điểm cũng như những ứng dụng cơ bản của một hệ thống tra cứu ảnh đã được xem xét. Thêm vào đó các chức năng chính của một hệ thống tra cứu ảnh cũng đã được đề cập. Và cuối cùng là một số hệ thống tra cứu ảnh dựa trên nội dung điển hình trên thế giới tiếp cận theo những hướng khác nhau cũng đã được xem xét.
Chương 2 : TÌM HIỂU CÁC PHƯƠNG PHÁP TRÍCH CHỌN ĐẶC TRƯNG HÌNH ẢNH
Trích chọn đặc trưng là cơ sở của tra cứu ảnh dựa vào nội dung.Theo nghĩa rộng, các đặc trưng có thể bao gồm cả các đặc trưng dựa vào văn bản và các đặc trưng trực quan như màu, kết cấu, hình dạng. Trong phạm vi đặc trưng trực quan, các đặc trưng có thể được phân loại tiếp thành các đặc trưng chung và các đặc trưng lĩnh vực cụ thể. Các đặc trưng trực quan chung gồm màu, kết cấu, và hình dạng trong khi các đặc trưng lĩnh vực cụ thể là phụ thuộc ứng dụng. Các đặc trưng lĩnh vực cụ thể bao gồm nhiều tri thức lĩnh vực.
Nhìn chung, không tồn tại một biểu diễn đơn tốt nhất cho một đặc trưng đã cho. Với mọi đặc trưng được cho tồn tại nhiều biểu diễn mô tả đặc trưng từ các cảnh huống khác nhau.
2.1 Màu sắc
Màu là đặc trưng trực quan quan trọng đầu tiên và đơn giản nhất cho việc đánh chỉ số và tra cứu các ảnh. Nó cũng là đặc trưng được sử dụng phổ biến nhất trong tra cứu ảnh dựa vào nội dung.
Một ảnh màu tiêu biểu được thu từ một camera số, hoặc được tải xuống từ Internet thường có ba kênh màu (các ảnh xám chỉ có một kênh, các ảnh đa phổ có thể có nhiều hơn ba kênh). Tuy nhiên, các giá trị của dữ liệu ba chiều (3 kênh màu) từ ảnh màu không cho chúng ta một mô tả chính xác của màu trong ảnh, nhưng cho vị trí của các điểm ảnh này trong không gian màu. Các điểm ảnh có các giá trị sẽ xuất hiện khác nhau về màu trong các không gian màu khác nhau. 
2.1.1 Không gian màu 
Không gian màu là sự biểu diễn tập hợp các màu ,một số không gian màu được sử dụng rộng rãi trong đồ hoạ máy tính.Những mô hình không gian màu có thể được phân biệt thành hướng phần cứng và hướng người sử dụng.Mô hình không gian màu hướng phần cứngbao gồm: RGB,IYQ,CMY dựa trên học thuyết 3 màu.Mô hình không gian màu hướng người sử dụng gồm:HLS,HCV,HSV,…dựa trên 3 tỷ lệ phần trăm của màu đó là:sắc màu,độ bão hoà,cường độ sáng.
Nếu chúng ta coi thông tin màu của một ảnh như tín hiệu một, hai, hoặc ba chiều, phân tích tín hiệu bằng việc sử dụng ước lượng mật độ xác suất là cách đơn giản nhất để mô tả thông tin màu của ảnh. Lược đồ là công cụ đơn giản nhất. 
2.1.2 Lược đồ màu 
Lược đồ màu là một tập hợp các mức,mỗi mức biểu thị xác suất của những điểm ảnh trong ảnh.Một biểu đồ màu trong ảnh được định nghĩa là một vecto: 
H={H[0],H[1],H[2],…,H[i],…,H[N]}
Trong đó : 
i là một màu trong biểu đồ màuvà tương ứng với một hình lập phương nhỏ của không gian màu RGB.
H[i] là số lượng điểm ảnh có màu i trong ảnh.
N là số mức trong biểu đồ màu.
Trong biểu đồ màu,giá trị của mỗi mức sẽ là tổng số điểm ảnh có cùng màu tương ứng.Để so sánh những ảnh có kích thước khác nhau,biểu đồ màu cần phải chuẩn hoá và được định nghĩa như sau:
H’={H’[0],H’[1],H’[2],…,H’[i],…,H’[N]}
Trong đó : với P tổng số điểm ảnh trong ảnh.
Lược đồ màu là dễ dàng để tính toán và hiệu quả trong mô tả cả phân bố màu toàn cục và cục bộ trong ảnh. Hơn nữa, nó mạnh với quay và dịch chuyển về trục quan sát và thay đổi chậm với tỷ lệ và góc quan sát.
Rõ ràng, một lược đồ màu chứa nhiều mức hơn,nó có khả năng phân biệt tốt hơn. Tuy nhiên, một lược đồ với một số lượng lớn các mức sẽ không chỉ tăng chi phí tính toán, mà cũng sẽ không thích hợp để xây dựng các cơ chế đánh chỉ số hiệu quả cho các cơ sở dữ liệu ảnh.Chính vì thế cần phải có sự cân nhắc trong việc xác định bao nhiêu mức nên được sử dụng trong biểu đồ màu .
2.2 Kết cấu
Kết cấu là một đặc tính quan trọng khác của ảnh. Các biểu diễn kết cấu đa dạng đã được nghiên cứu trong nhận dạng mẫu và thị giác máy tính. Về cơ bản, các phương pháp biểu diễn kết cấu có thể được phân ra thành hai loại: cấu trúc và thống kê. Các phương pháp cấu trúc, gồm toán tử hình thái và đồ thị kề, mô tả kết cấu bởi nhận dạng cấu trúc gốc và các luật sắp đặt của chúng. Chúng có khuynh hướng hiệu quả nhất khi được áp dụng với các kết cấu đều. Các phương pháp thống kê, gồm các kỹ thuật phổ năng lượng Fourier, các ma trận đồng khả năng, phân tích thành phần chính bất biến - trượt, đặc trưng Tamura, phân rã Wold, trường ngẫu nhiên Markov mô hình fractal, và lọc đa phân giải như biến đổi Gabor và sóng, mô tả kết cấu bằng phân bố thống kê của cường độ ảnh. Một số biểu diễn kết cấu được sử dụng thường xuyên và đã được chứng minh là hiệu quả trong tra cứu ảnh dựa vào nội dung.
2.2.1 Các đặc trưng Tamura
Các đặc trưng Tamura [39], bao gồm thô, tương phản, hướng, giống nhất, tính chất đều, và nhám, được thiết kế phù hợp với các nghiên cứu tâm lý về nhận thức của người đối với kết cấu. Ba thành phần đầu tiên của các đặc trưng Tamura được sử dụng trong một số hệ thống tra cứu ảnh nổi tiếng ban đầu, như QBIC và Photobook . Các tính toán của ba đặc trưng này được cho ở dưới.
2.2.1.1 Thô
Thô là một độ đo tính chất hột của kết cấu. Để tính toán thô, các trung bình động được tính đầu tiên sử dụng cỡ các cửa sổ tại mỗi điểm ảnh , tức là, 
Ở đây là cường độ điểm ảnh tại .
Sau đó, các sự khác nhau giữa các cặp trung bình động không chồng theo hướng ngang và đứng cho mỗi điểm ảnh được tính toán, tức là,
Sau đó, gía trị của cực đại hoá theo một trong hai hướng được sử dụng để đặt cỡ tốt nhất cho mỗi điểm ảnh, tức là,
Sau đó thô được tính bằng trung bình trên toàn bộ ảnh, tức là, 
Thay vì lấy trung bình của , một phiên bản được cải tiến của đặc trưng thô có thể thu được bởi sử dụng một lược đồ để mô tả phân bố của . So với sử dụng một giá trị đơn để biểu diễn thô, sử dụng biểu diễn thô dựa vào lược đồ có thể tăng đáng kể hiệu năng tra cứu. Sự điều chỉnh này làm cho đặc trưng có khả năng xử lý với một ảnh hoặc vùng có đa đặc tính kết cấu, và do đó là hữu ích hơn đối với các ứng dụng tra cứu ảnh.
2.2.1.2 Độ tương phản
Công thức cho tương phản là như sau: 
Ở đây là mômen thứ tư về trung bình, và phương sai . Công thức này có thể được sử dụng cho cả toàn bộ ảnh và một vùng của ảnh.
2.2.1.3 Hướng
Để tính hướng, ảnh được chập với hai dãy 3 ´ 3, tức là, và là một véc tơ gradient tại mỗi điểm ảnh được tính.
Độ lớn và góc của véc tơ này được định nghĩa bằng:
Ở đây và là các khác biệt ngang và dọc của chập. 
Sau đó, bằng lượng hoá và đếm số các điểm ảnh với độ lớn tương ứng lớn hơn một ngưỡng, một lược đồ của , biểu thị bằng , có thể được xây dựng. Lược đồ này sẽ cho biết các đỉnh bền vững cho các ảnh hướng cao và sẽ là tương đối phẳng với các ảnh không có hướng bền vững. Sau đó toàn bộ lược đồ được tóm lược để thu toàn bộ độ đo hướng dựa trên tính nhọn của các đỉnh:
Trong tổng các phạm vi này trên đỉnh; và mỗi đỉnh là tập các bin được phân bố trên nó; trong khi là bin nhận giá trị đỉnh.
2.2.2 Các đặc trưng Wold
Phân rã Wold cung cấp một cách tiếp cận khác để mô tả các kết cấu về mặt đặc tính nhận thức. Ba thành phần Wold, điều hoà, tạm thời, và vô định, tương ứng với chu kỳ, hướng, và tính ngẫu nhiên của kết cấu tương ứng. Các kết cấu chu kỳ có một thành phần điều hoà mạnh, các kết cấu hướng cao có một thành phần tạm thời mạnh, và các kết cấu được cấu trúc kém hơn có khuynh hướng có một thành phần không xác định mạnh hơn.
Đối với một trường ngẫu nhiên đều , phân rã Wold cho phép trường được phân rã thành ba thành phần trực giao lẫn nhau:
Ở đây là thành phần vô định; và là thành phần tiền định và thành phần tạm thời nó có thể được phân rã tiếp thành thành phần điều hoà và thành phần tạm thời . Trong miền tần số, một biểu diễn tương tự tồn tại:
Ở đây là các hàm phân bố phổ (SDF) của và tương ứng.
Trong miền không gian, ba thành phần trực giao có thể thu được bởi ước lượng khả năng nhất (MLE), nó gồm sự điều chỉnh một quá trình AR bậc cao, cực tiểu hoá hàm giá, và giải một tập các phương trình tuyến tính. Trong miền tần số, các thành phần Wold có thể thu được bởi ngưỡng toàn cục của các độ lớn phổ Fourier của ảnh.Phương pháp sử dụng trích rút đỉnh điều hoà và mô hình tự hồi quy đồng thời đa phân giải (MRSAR) thiếu một phân rã thực sự của ảnh được giới thiệu. Phương pháp này được thiết kế để dung sai sự đa dạng của các sự không đồng nhất trong các mẫu kết cấu tự nhiên.
2.2.3 Mô hình tự hồi qui đồng thời SAR
Mô hình SAR là một thể hiện của các mô hình trường ngẫu nhiên Markov (MRF), nó rất thành công về mô hình kết cấu trong những thập kỷ qua. So với các mô hình MRF, SAR sử dụng ít các tham số hơn. Trong mô hình SAR, các cường độ điểm ảnh nhận được bằng các biến ngẫu nhiên. Cường độ tại điểm ảnh có thể được ước lượng bằng một kết hợp tuyến tính của các giá trị điểm ảnh lân cận và một số hạng nhiễu cộng , tức là,
Ở đây là giá trị xiên được xác định bởi trung bình của toàn bộ ảnh; là tập lân cận của ; là tập các trọng số được kết hợp với mỗi điểm ảnh lân cận; là một biến ngẫu nhiên độc lập Gaussian với trung bình không và phương sai . Các tham số và được sử dụng để đo kết cấu. Thí dụ, một giá trị cao hơn hàm ý tính chất hột tốt hơn hoặc thô kém hơn; các giá trị và cao hơn chỉ ra rằng kết cấu được hướng thẳng đứng. Kỹ thuật sai số bình phương tối thiểu (LSE) hoặc phương pháp MLE thường được sử dụng để đánh giá các tham số của mô hình SAR.
Mô hình SAR là không bất biến quay. Để nhận được một mô hình SAR bất biến quay (RISAR), các điểm ảnh nằm trên các đường tròn có bán kính khác nhau có tâm tại mỗi điểm ảnh đáp ứng bằng tập lân cận của nó. Như thế cường độ tại điểm ảnh có thể được ước lượng bằng 
Ở đây là số lân cận tròn. Để tạo chi phí tính toán thấp và để thu được bất biến quay tại cùng thời điểm, không được quá lớn hoặc quá nhỏ. Thông thường có thể được tính toán bởi: 
Ở đây là lân cận tròn thứ của là một tập các trọng số được tính trước chỉ ra đóng góp của điểm ảnh trong vòng tròn thứ .
Để mô tả các kết cấu có các tính chất hột khác nhau, mô hình MRSAR được đề xuất để cho phép phân tích kết cấu đa mức. Một ảnh được biểu diễn bởi hình chóp Gaussian đa độ phân giải với lọc thông thấp và lấy mẫu dưới được áp dụng tại một số mức liên tiếp. Sau đó hoặc là mô hình SAR hoặc là mô hình RISAR có thể được áp dụng đối với mỗi mức của hình chóp.
MRSAR đã được chứng minh có hiệu năng trên cơ sở dữ liệu kết cấu Brodatz tốt hơn nhiều đặc trưng kết cấu khác, như phân tích thành phần chính, phân rã Wold, và biến đổi sóng. 
2.2.4 Các đặc trưng lọc Gabor
Lọc Gabor được sử dụng rộng rãi để trích rút các đặc trưng ảnh, đặc biệt là các đặc trưng kết cấu . Nó tối ưu về mặt cực tiểu hoá sự không chắc chắn chung trong miền không gian và miền tần số, và thường được sử dụng như một hướng và tỷ lệ biên điều hướng và phát hiện đường. Có nhiều cách tiếp cận đã được đề xuất để mô tả các kết cấu của các ảnh dựa trên các lọc Gabor. Ý tưởng cơ bản của sử dụng các lọc Gabor để trích rút các đặc trưng kết cấu được mô tả như sau.
Một hàm Gabor hai chiều được định nghĩa bằng: 
Ở đây, và là các độ lệch chuẩn của phân bố Gaussian theo hướng x và y.
Sau đó một tập các lọc Gabor có thể thu được bởi các giãn và các quay thích hợp của :
Ở đây , và . và là số các hướng và các tỷ lệ. Nhân tố tỷ lệ là để đảm bảo rằng năng lượng là độc lập của .
 Một ảnh đã cho, biến đổi Gabor của nó được định nghĩa bằng:
Ở đây * chỉ ra số liên hợp phức. Sau đó trung bình và độ lệch chuẩn của độ lớn , tức là, có thể được sử dụng để biểu diễn đặc trưng kết cấu của một vùng kết cấu thuần nhất.
2.2.5 Các đặc trưng biến đổi sóng
Tương tự với lọc Gabor, biến đổi sóng cung cấp một cách tiếp cận đa độ phân giải đối với phân tích kết cấu và phân lớp . Các biến đổi sóng phân rã một tín hiệu với một họ các hàm cơ sở thu được thông qua dịch chuyển và sự giãn của sóng mẹ , tức là, 
Ở đây, và là các tham số giãn và dịch chuyển. Một tín hiệu có thể được biểu diễn bằng:
Tính toán các biến đổi sóng của một tín hiệu hai chiều gồm lọc đệ quy và lấy mẫu dưới. Tại mỗi mức, tín hiệu được phân rã thành bốn dải tần số con, LL, LH, HL, và HH, ở đây L biểu thị tần số thấp và H biểu thị tần số cao. Hai loại biến đổi sóng chính được sử dụng cho phân tích kết cấu là biến đổi sóng cấu trúc hình chóp PWT và biến đổi sóng cấu trúc hình cây TWT. PWT phân rã dải LL một cách đệ quy. Tuy nhiên, với một số kết cấu thông tin quan trọng nhất thường xuất hiện trong các kênh tần số chung. Để khắc phục hạn chế này, TWT phân rã các dải khác như LH, HL hoặc HH khi cần.
Sau khi phân rã, các véc tơ đặc trưng có thể được xây dựng sử dụng trung bình và độ lệch chuẩn của phân bố năng lượng của mỗi dải con tại mỗi mức. Với phân rã ba mức, PWT đưa ra một véc tơ đặc trưng có 3´4´2 thành phần. Với TWT, đặc trưng sẽ phụ thuộc vào dải con nào tại mỗi mức được phân rã. Một cây phân rã cố định có thể thu được bởi phân rã liên tiếp các dải LL, LH, và HL, và vì thế cho ra một véc tơ đặc trưng có 52´2 thành phần. Lưu ý trong ví dụ này, đặc trưng thu được bởi PWT có thể được coi như tập con của đặc trưng thu được bởi TWT. Hơn nữa, theo so sánh của các đặc trưng biến đổi sóng khác nhau , chọn riêng lọc sóng không là then chốt cho phân tích kết cấu.
2.3 Hình dạng
Các đặc trưng hình của các đối tượng hoặc các vùng đã được sử dụng trong nhiều hệ thống tra cứu ảnh dựa vào nội dung . So với các đặc trưng màu và kết cấu, các đặc trưng hình thường được mô tả sau khi các ảnh được phân đoạn thành các vùng hoặc các đối tượng. Do phân đoạn ảnh mạnh và chính xác là khó đạt được, sử dụng các đặc trưng hình cho tra cứu ảnh bị giới hạn đối với các ứng dụng chuyên biệt, ở đó các đối tượng hoặc các vùng đã sẵn có. Các phương pháp state-of-art cho mô tả hình có thể được phân thành hoặc là các phương pháp dựa vào đường bao hoặc các phương pháp dựa vào vùng. Một biểu diễn đặc trưng hình tốt cho một đối tượng phải bất biến với dịch chuyển, quay và tỷ lệ. 
2.3.1 Các bất biến mômen
Biểu diễn hình cổ điển sử dụng một tập các bất biến mômen. Nếu đối tượng được biểu diễn như một ảnh nhị phân, thì các mômen trung tâm bậc cho hình của đối tượng được định nghĩa bằng:
Ở đây là tâm của đối tượng. Mômen trung tâm này có thể được chuẩn hoá để bất biến tỷ lệ :
Dựa trên các mômen này, một tập các bất biến mômen đối với dịch chuyển, quay và tỷ lệ có thể tìm thấy trong :
2.3.2 Các góc quay
Chu tuyến của một đối tượng hai chiều có thể được biểu diễn bởi một dãy các các điểm biên liên tiếp đóng , ở đây là tổng số các điểm ảnh trên đường biên. Hàm quay hoặc góc quay đo góc tang ngược chiều kim đồng hồ như một hàm độ dài cung theo một điểm tham chiếu trên đường biên đóng của đối tượng, có thể được xác định như sau: 
Một vấn đề chính đối với biểu diễn này là nó biến đổi đối với quay của đối tượng và cách chọn điểm tham chiếu. Nếu chúng ta trượt điểm tham chiếu dọc theo đường biên của đối tượng bởi một giá trị , thì hàm quay mới trở thành . Nếu chúng ta quay đối tượng một góc thì hàm mới trở thành .
Do đó, để so sánh sự tương tự hình giữa các đối tượng và với các hàm quay của nó, khoảng cách tối thiểu cần được tính toán trên tất cả các giá trị trượt và các quay có thể, tức là,
Ở đây chúng ta giả thiết rằng mỗi đối tượng đã tỷ lệ lại sao cho tổng độ dài chu vi là 1. Độ đo này là bất biến với dịch chuyển, quay, và thay đổi tỷ lệ.
2.3.3 Các ký hiệu mô tả Fourier
Các ký hiệu mô tả Fourier mô tả hình của một đối tượng với biến đổi Fourier của đường biên của nó. Xét đường biên đóng của một đối tượng hai chiều bằng một dãy đóng các điểm biên liên tiếp , ở đây và là tổng số các điểm ảnh trên đường biên. Sau đó ba loại biểu diễn đường biên đóng, tức là, độ cong, khoảng cách trọng tâm, và hàm toạ độ phức hợp, có thể được định nghĩa. 
Độ cong tại một điểm dọc theo đường biên đóng được định nghĩa như tỷ lệ thay đổi theo hướng tan của đường biên đóng, tức là, 
Ở đây là hàm quay của chu tuyến.
Khoảng cách trọng tâm được định nghĩa bằng hàm khoảng cách giữa các điểm biên và trọng tâm của đối tượng:
	Toạ độ phức hợp thu được bởi biểu diễn đơn giản các toạ độ của các điểm biên như các số phức hợp:
Các biến đổi Fourier của ba loại biểu diễn chu tuyến này sinh ra ba tập hệ số phức hợp, biểu diễn hình của một đối tượng trong miền tần số. Các hệ số tần số thấp hơn mô tả đặc tính hình chung, trong khi các hệ số tần số cao phản ánh các chi tiết hình. Để thu được bất biến quay (tức là, mã chu tuyến không liên quan đến chọn điểm tham chiếu), chỉ độ lớn của các hệ số phức hợp được sử dụng và các thành phần pha bị loại bỏ. Để thu được bất biến tỷ lệ, độ lớn của các hệ số được chia bằng độ lớn của thành phần hoặc hệ số khác không đầu tiên. Bất biến dịch chuyển thu được trực tiếp từ biểu diễn đường biên đóng. 
Các ký hiệu mô tả Fourier của đường cong là: 
Ký hiệu mô tả Fourier của khoảng cách trọng tâm là: 
Ở đây biểu thị thành phần thứ của các hệ số biến đổi Fourier. Ở đây chỉ các trục tần số dương được xem xét bởi vì đường cong và các hàm khoảng cách trọng tâm là thực và, do đó, các biến đổi Fourier của nó biểu lộ tính đối xứng, tức là, .
Ký hiệu mô tả Fourier của toạ độ phức hợp là: 
Ở đây là thành phần tần số khác không đầu tiên được sử dụng để chuẩn hoá các hệ số biến đổi. Ở đây cả hai thành phần tần số dương và âm được xem xét. Hệ số là phụ thuộc vào vị trí của hình, và do đó, bị loại bỏ. 
Để đảm bảo các đặc trưng hình kết quả của tất cả các đối tượng trong một cơ sở dữ liệu có cùng độ dài, đường biên của mỗi đối tượng được lấy mẫu lại với mẫu trước khi thực hiện biến đổi Fourier. Thí dụ, có thể đặt tới sao cho biến đổi có thể được thực hiện hiệu quả sử dụng biến đổi Fourier nhanh.
2.3.4 Hình tròn, độ lệch tâm, và hướng trục chính
Hình tròn được tính toán bằng: 
Ở đây là cỡ và là chu vi của một đối tượng. Giá trị này có phạm vi giữa 0 và 1.
Hướng trục chính có thể được định nghĩa như hướng của vectơ riêng lớn nhất của ma trận hiệp biến bậc hai của một vùng hoặc một đối tượng. Độ lệch tâm có thể được định nghĩa như tỷ lệ của trị riêng nhỏ nhất với trị riêng lớn nhất. 
2.4 Thông tin không gian
Các vùng hoặc đối tượng với các đặc tính màu và kết cấu tương tự có thể được phân biệt dễ dàng bằng việc tận dụng các ràng buộc không gian. Thí dụ, các vùng bầu trời màu xanh và biển xanh có thể có các lược đồ màu tương tự, nhưng các vị trí không gian của chúng trong các ảnh là khác nhau. Do đó, vị trí không gian của các vùng (hoặc các đối tượng) hoặc quan hệ không gian giữa nhiều vùng (hoặc đối tượng) trong một ảnh thì rất hữu ích cho tìm kiếm các ảnh. 
Thu thông tin không gian của các đối tượng trong một ảnh là một quá trình quan trọng đối với các hệ thống GIS. Quá trình này bao gồm việc biểu diễn vị trí không gian tuyệt đối và cũng bao gồm vị trí không gian tương đối của các đối tượng. Các thao tác như giao và chồng được sử dụng. Bố cục màu kết hợp thông tin không gian với thông tin màu xuất hiện trong ảnh và tạo ra một đặc trưng rất quan trọng trong quá trình tra cứu.
Tuy nhiên, tìm kiếm các ảnh dựa trên các quan hệ không gian của các vùng còn lại một vấn đề nghiên cứu khó trong tra cứu ảnh dựa vào nội dung, do phân đoạn tin cậy của các đối tượng hoặc các vùng thường là không khả thi ngoại trừ các ứng dụng rất giới hạn.
2.5 Phân đoạn
Phân đoạn là quá trình phân ảnh ra thành các vùng mà về lý tưởng nó sẽ tương ứng với các đối tượng xuất hiện trong ảnh. Đây là bước rất quan trọng đối với tra cứu ảnh. Cả đặc trưng hình và đặc trưng bố cục phụ thuộc vào phân đoạn tốt. 
Trong phân đoạn các yêu cầu chính xác phân đoạn là rất khác nhau cho các đặc trưng hình và các đặc trưng bố cục. Với các đặc trưng hình, phân đoạn chính xác là mong muốn cao trong khi các đặc trưng bố cục, một phân đoạn thô có thể là đủ.
Chương 3: CÁC ĐỘ ĐO TƯƠNG TỰ
Đầu tiên các đặc trưng của các ảnh trong cơ sở dữ liệu được trích rút và được mô tả bởi các véc tơ đặc trưng nhiều chiều. Các véc tơ đặc trưng của các ảnh trong cơ sở dữ liệu tạo thành một cơ sở dữ liệu đặc trưng. Sau đó để tra cứu các ảnh, người sử dụng cung cấp cho hệ thống tra cứu ảnh mẫu hoặc hình phác thảo, các đặc trưng của ảnh mẫu hoặc hình phác thảo (gọi là ảnh truy vấn) được trích rút. Các kết quả tìm kiếm thu được bởi độ đo sự tương tự giữa các đặc trưng của ảnh cơ sở dữ liệu và ảnh truy vấn.
Đo độ tương tự lý tưởng sẽ có một số hoặc tất cả các đặc tính cơ sở sau:
Tương tự nhận thức :Khoảng cách đặc trưng giữa hai ảnh chỉ lớn nếu hai ảnh là không tương tự, và nhỏ nếu các ảnh là tương tự. Các ảnh thường hay được mô tả trong không gian đặc trưng và độ tương tự giữa các ảnh thường được đo bởi một độ đo khoảng cách trong không gian đặc trưng. Đem vào bản miêu tả các đặc tính của không gian này với nhận thức của con người và các đặc tính cơ sở của các véc tơ đặc trưng biểu diễn các ảnh là rất quan trọng trong cải tiến đặc tính tương tự nhận thức của độ đo tương tự được đề xuất.
Hiệu quả: Độ đo cần được tính toán nhanh để có phản hồi nhanh trong pha tìm kiếm. Các ứng dụng CBIR tiêu biểu đòi hỏi một phản hồi rất nhanh, không lâu hơn vài giây. Trong chu kỳ thời gian ngắn đó, máy tìm kiếm thường phải tính toán hàng ngàn khoảng cách phụ thuộc vào cỡ của cơ sở dữ liệu ảnh. Do đó độ phức tạp của độ đo khoảng cách là quan trọng.
Khả năng: Hiệu năng của hệ thống không được giảm quá nhiều cho các cơ sở dữ liệu lớn do một hệ thống có thể tìm kiếm trong các cơ sở dữ liệu chứa hàng triệu ảnh. Một sự thực hiện của hệ thống CBIR tính toán tất cả các khoảng cách giữa ảnh truy vấn và các ảnh trong cơ sở dữ liệu. Sau đó các khoảng cách này được lưu trữ để tìm ra các ảnh tương tự nhất đối với ảnh truy vấn. Do đó sự phức tạp của máy tìm kiếm phải tương ứng với cỡ của cơ sở dữ liệu ảnh (hoặc nếu chúng ta coi N là số các ảnh). Các kỹ thuật đánh chỉ số nhiều chiều (như được đề cập trong phần 1.2) có thể được sử dụng để giảm sự phức tạp xuống .Tuy nhiên, đã có báo cáo rằng hiệu năng của các kỹ thuật đánh chỉ số hiện tại bị giảm về tuyến tính khi số chiều cần được đánh chỉ số là lớn hơn 20. Vậy chúng ta phải xem xét nhân tố này khi giải quyết với các cơ sở dữ liệu ảnh rất lớn.
Khoảng cách: Vấn đề khoảng cách tương tự có nên là độ đo hay không vẫn chưa được quyết định do thị giác người là rất phức tạp và các cơ chế của hệ thống trực quan người chưa được hiểu đầy đủ. Chúng ta muốn khoảng cách tương tự là độ đo do chúng ta xem các đặc tính dưới đây như các yêu cầu rất tự nhiên.
Sự bất biến của bản thân sự tương tự: Khoảng cách giữa một ảnh với bản thân nó phải bằng với một hằng số độc lập với ảnh.
Tối thiểu: Một ảnh phải tương tự với chính nó hơn là với các ảnh khác.
Tính đối xứng: Nếu ảnh tương tự với ảnh thì ảnh phải tương tự với ảnh . 
Tính bắc cầu: Cũng là vô lý nếu ảnh rất tương tự với ảnh,và lại rất tương tự với ,nhưng lại rất khác với .
Tuy nhiên, tính chất bắc cầu này có thể không giữ cho một chuỗi các ảnh. Ngay khi nếu ảnh tương tự với ảnh với.Điều này không có nghĩa rằng ảnh tương tự với ảnh .Thí dụ,trong một cảnh video mỗi frame tương tự với các frame lân cận của nó nhưng frame đầu tiên và frame cuối cùng của cảnh có thể rất khác nhau.
Tính chất mạnh: Hệ thống phải mạnh đối với các thay đổi trong các điều kiện ảnh của các ảnh cơ sở dữ liệu. Thí dụ nếu các ảnh trong cơ sở dữ liệu thu được dưới ánh sáng đèn điện, hệ thống tra cứu phải có thể tìm thấy các đối tượng này ngay cả khi đối tượng truy vấn thu được dưới ánh nắng ban ngày.
Nhiều độ đo tương tự đã được đề xuất, nhưng không có độ đo nào có tất cả các đặc tính nói trên. Dưới đây là một số độ đo tương tự được sử dụng phổ biến nhất.
3.1 Lược đồ giao 
Đây là một trong những độ đo khoảng cách đầu tiên trong tra cứu ảnh dựa vào màu. Khoảng cách được xác định dựa trên cỡ phần chung của hai lược đồ màu. Giả sử hai lược đồ màu được ký hiệu là và , khoảng cách giữa chúng có thể được định nghĩa bằng:
Độ đo khoảng cách này là nhanh. Tuy nhiên, nó không là độ đo và thông tin màu không được sử dụng khi thu khoảng cách. Điều này có thể dẫn đến các kết quả không mong muốn.
3.2 Khoảng cách Minkowski 
Khoảng cách L1, khoảng cách dạng Minkowski : khoảng cách dạng Minkowski giữa hai lược đồ được định nghĩa như sau: 
Khoảng cách dạng toàn phương : khoảng cách giữa hai lược đồ màu chiều và được định nghĩa như
Ở đây là một ma trận và các trọng số biểu thị sự tương tự giữa các bin và . Thông thường được cho bằng 
Ở đây là khoảng cách giữa màu và màu (thông thường là khoảng cách Ơ Cơ Lít giữa hai màu trong một số không gian màu đồng nhất như La*b* hoặc Lu*v*) và . là một hằng số điều khiển trọng số giữa các màu lân cận.
Sự lựa chọn thông thường khác cho 
3.4 Khoảng cách EMD : là dựa trên giá trị tối thiểu để biến đổi một phân bố thành một phân bố khác. Nếu giá trị dịch chuyển một đơn vị đặc trưng trong không gian đặc trưng là khoảng cách nền, thì khoảng cách giữa hai phân bố được cho bởi tổng các giá trị tối thiểu để di chuyển tất cả các đặc trưng riêng lẻ. EMD có thể được định nghĩa như giải pháp của vấn đề vận tải có thể được giải quyết bằng tối ưu tuyến tính:
Ở đây biểu thị sự không tương tự giữa các bin và , và là luồng tối ưu giữa hai phân bố sao cho tổng gía trị 
là cực tiểu, tuỳ vào các ràng buộc sau:
Với tất cả và . Mẫu số trong phương trình là một hệ số chuẩn hoá cho phép đối sánh các phần của các phân bố với tổng khối lượng khác nhau. Nếu khoảng cách nền là một độ đo và hai phân bố có cùng số lượng tổng khối lượng, EMD xác định một độ đo. Như một ưu điểm chính của EMD mỗi ảnh có thể được biểu diễn bởi các bin khác nhau mà thích nghi với phân bố cụ thể của chúng. Khi các lược đồ lề được sử dụng. Các giá trị không tương tự thu được cho các chiều riêng lẻ phải được kết hợp thành một giá trị không tương tự liên kết.
Các độ đo khoảng cách khác cũng được quan tâm là: 
Khoảng cách Kolmogorov-Smirnov được đề xuất trong . Nó được định nghĩa như sự khác nhau cực đại giữa các phân bố tích luỹ 
Ở đây là lược đồ tích luỹ của lược đồ 
Thống kê kiểu Cramer/Von Mises dựa trên các phân bố tích luỹ được định nghĩa 
Thống kê được cho bởi 
Ở đây biểu thị ước lượng chung. 
Kullback-Leibler divergence được định nghĩa bởi 
Jeffrey-divergence được định nghĩa bởi 
Weighted-Mean-Variance được đề xuất trong . Khoảng cách này được định nghĩa bởi
Ở đây là các tham số thực nghiệm và là các độ lệch chuẩn của hai lược đồ . biểu thị sự ước lượng của độ lệch chuẩn của thực thể tương ứng. 
Khoảng cách Bhattacharyya được định nghĩa
Ở đây 
Khoảng cách Mahalanobis được cho bởi 
Với các mô tả chi tiết hơn, chúng ta tham khảo các bài báo được trích dẫn. Trong cung cấp một sự so sánh toàn diện trên nhiều độ đo khoảng cách khác nhau. 
Chương 4 :CÀI ĐẶT THỬ NGHIỆM CHƯƠNG TRÌNH,KẾT LUẬN ,TÀI LIỆU THAM KHẢO---> tóm tắt phần trích rút đặc trung ở file này